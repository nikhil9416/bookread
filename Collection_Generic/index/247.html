<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p247" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_247{left:138px;bottom:911px;letter-spacing:0.11px;}
#t2_247{left:110px;bottom:882px;letter-spacing:-0.17px;word-spacing:1.31px;}
#t3_247{left:223px;bottom:883px;letter-spacing:0.01px;}
#t4_247{left:347px;bottom:882px;letter-spacing:-0.17px;word-spacing:1.31px;}
#t5_247{left:506px;bottom:883px;letter-spacing:0.01px;}
#t6_247{left:532px;bottom:882px;letter-spacing:-0.16px;}
#t7_247{left:562px;bottom:883px;letter-spacing:0.01px;}
#t8_247{left:609px;bottom:882px;letter-spacing:-0.15px;word-spacing:1.31px;}
#t9_247{left:110px;bottom:864px;letter-spacing:0.01px;}
#ta_247{left:232px;bottom:863px;letter-spacing:-0.17px;word-spacing:-0.78px;}
#tb_247{left:110px;bottom:845px;letter-spacing:-0.17px;word-spacing:0.63px;}
#tc_247{left:110px;bottom:826px;letter-spacing:-0.17px;word-spacing:0.45px;}
#td_247{left:110px;bottom:807px;letter-spacing:-0.17px;word-spacing:-0.69px;}
#te_247{left:110px;bottom:789px;letter-spacing:-0.16px;word-spacing:-0.58px;}
#tf_247{left:294px;bottom:789px;letter-spacing:0.01px;}
#tg_247{left:388px;bottom:789px;letter-spacing:-0.12px;}
#th_247{left:427px;bottom:789px;letter-spacing:0.01px;}
#ti_247{left:549px;bottom:789px;letter-spacing:-0.19px;word-spacing:-0.58px;}
#tj_247{left:110px;bottom:770px;letter-spacing:-0.15px;}
#tk_247{left:160px;bottom:771px;letter-spacing:0.01px;}
#tl_247{left:195px;bottom:770px;letter-spacing:-0.16px;word-spacing:-0.26px;}
#tm_247{left:454px;bottom:771px;letter-spacing:0.01px;}
#tn_247{left:485px;bottom:770px;letter-spacing:-0.19px;word-spacing:-0.26px;}
#to_247{left:110px;bottom:751px;letter-spacing:-0.18px;word-spacing:1.45px;}
#tp_247{left:110px;bottom:733px;letter-spacing:-0.16px;word-spacing:0.41px;}
#tq_247{left:246px;bottom:733px;letter-spacing:0.01px;}
#tr_247{left:285px;bottom:733px;letter-spacing:-0.16px;word-spacing:0.41px;}
#ts_247{left:110px;bottom:715px;letter-spacing:0.01px;}
#tt_247{left:142px;bottom:714px;letter-spacing:-0.17px;word-spacing:-0.17px;}
#tu_247{left:583px;bottom:715px;letter-spacing:0.01px;}
#tv_247{left:110px;bottom:696px;letter-spacing:0.01px;}
#tw_247{left:157px;bottom:695px;letter-spacing:-0.19px;word-spacing:0.76px;}
#tx_247{left:110px;bottom:676px;letter-spacing:-0.17px;}
#ty_247{left:137px;bottom:655px;letter-spacing:0.11px;}
#tz_247{left:150px;bottom:640px;letter-spacing:0.11px;}
#t10_247{left:150px;bottom:626px;letter-spacing:0.11px;}
#t11_247{left:162px;bottom:611px;letter-spacing:0.11px;}
#t12_247{left:162px;bottom:596px;letter-spacing:0.11px;}
#t13_247{left:150px;bottom:582px;}
#t14_247{left:150px;bottom:567px;letter-spacing:0.11px;}
#t15_247{left:162px;bottom:553px;letter-spacing:0.11px;}
#t16_247{left:150px;bottom:538px;}
#t17_247{left:137px;bottom:523px;}
#t18_247{left:110px;bottom:494px;letter-spacing:-0.17px;word-spacing:-0.05px;}
#t19_247{left:110px;bottom:476px;letter-spacing:-0.18px;word-spacing:1.4px;}
#t1a_247{left:196px;bottom:476px;letter-spacing:0.01px;}
#t1b_247{left:315px;bottom:476px;letter-spacing:-0.18px;word-spacing:1.4px;}
#t1c_247{left:110px;bottom:457px;letter-spacing:-0.18px;word-spacing:0.53px;}
#t1d_247{left:110px;bottom:438px;letter-spacing:-0.15px;}
#t1e_247{left:110px;bottom:412px;letter-spacing:-0.17px;word-spacing:1.73px;}
#t1f_247{left:329px;bottom:413px;letter-spacing:0.01px;}
#t1g_247{left:426px;bottom:412px;letter-spacing:-0.16px;word-spacing:1.73px;}
#t1h_247{left:522px;bottom:413px;letter-spacing:0.01px;}
#t1i_247{left:647px;bottom:412px;letter-spacing:-0.18px;}
#t1j_247{left:110px;bottom:393px;letter-spacing:-0.19px;word-spacing:1.29px;}
#t1k_247{left:110px;bottom:375px;letter-spacing:-0.18px;word-spacing:0.16px;}
#t1l_247{left:110px;bottom:356px;letter-spacing:-0.17px;word-spacing:-1.46px;}
#t1m_247{left:110px;bottom:337px;letter-spacing:-0.17px;}
#t1n_247{left:110px;bottom:311px;letter-spacing:-0.16px;word-spacing:-0.36px;}
#t1o_247{left:475px;bottom:311px;letter-spacing:0.01px;}
#t1p_247{left:570px;bottom:311px;letter-spacing:-0.15px;word-spacing:-0.36px;}
#t1q_247{left:110px;bottom:292px;letter-spacing:-0.17px;}
#t1r_247{left:110px;bottom:251px;letter-spacing:-0.03px;}
#t1s_247{left:110px;bottom:228px;letter-spacing:-0.17px;word-spacing:-0.78px;}
#t1t_247{left:190px;bottom:228px;letter-spacing:0.01px;}
#t1u_247{left:214px;bottom:228px;letter-spacing:-0.16px;word-spacing:-0.78px;}
#t1v_247{left:110px;bottom:209px;letter-spacing:-0.18px;word-spacing:-0.83px;}
#t1w_247{left:110px;bottom:190px;letter-spacing:-0.17px;word-spacing:0.59px;}
#t1x_247{left:110px;bottom:171px;letter-spacing:-0.18px;word-spacing:1.11px;}
#t1y_247{left:110px;bottom:153px;letter-spacing:-0.18px;word-spacing:0.28px;}
#t1z_247{left:110px;bottom:134px;letter-spacing:-0.17px;word-spacing:0.16px;}
#t20_247{left:432px;bottom:135px;letter-spacing:0.01px;}
#t21_247{left:481px;bottom:134px;letter-spacing:-0.17px;word-spacing:0.16px;}
#t22_247{left:511px;bottom:60px;letter-spacing:-0.07px;}
#t23_247{left:535px;bottom:60px;letter-spacing:-0.1px;}
#t24_247{left:631px;bottom:60px;}
#t25_247{left:643px;bottom:60px;letter-spacing:-0.1px;}

.s1_247{font-size:12px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s2_247{font-size:16px;font-family:CNCSGY-2bBirka_1c;color:#000;}
.s3_247{font-size:14px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s4_247{font-size:23px;font-family:CNCSGY-2bMyriadPro-SemiboldCo_q;color:#000;}
.s5_247{font-size:14px;font-family:CNCSGY-2bMyriadPro-SemiboldCo_q;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts247" type="text/css" >

@font-face {
	font-family: CNCSGY-2bBirka_1c;
	src: url("fonts/CNCSGY-2bBirka_1c.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bMyriadPro-SemiboldCo_q;
	src: url("fonts/CNCSGY-2bMyriadPro-SemiboldCo_q.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bTheSansMonoCd-W5Reg_dv;
	src: url("fonts/CNCSGY-2bTheSansMonoCd-W5Reg_dv.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg247Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg247" style="-webkit-user-select: none;"><object width="770" height="1010" data="247/247.svg" type="image/svg+xml" id="pdf247" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_247" class="t s1_247">protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) </span>
<span id="t2_247" class="t s2_247">The contract for </span><span id="t3_247" class="t s3_247">removeEldestEntry </span><span id="t4_247" class="t s2_247">states that the methods </span><span id="t5_247" class="t s3_247">put </span><span id="t6_247" class="t s2_247">and </span><span id="t7_247" class="t s3_247">putAll </span><span id="t8_247" class="t s2_247">will call </span>
<span id="t9_247" class="t s3_247">removeEldestEntry </span><span id="ta_247" class="t s2_247">whenever a new entry is added to the map, passing to it the “eldest” </span>
<span id="tb_247" class="t s2_247">entry. In an insertion-ordered map, the eldest entry will be the one that was least re- </span>
<span id="tc_247" class="t s2_247">cently added to the map, but in an access-ordered map it is the one least recently ac- </span>
<span id="td_247" class="t s2_247">cessed (and if some entries have never been accessed, it is the one amongst these which </span>
<span id="te_247" class="t s2_247">was least recently added). In </span><span id="tf_247" class="t s3_247">LinkedHashMap </span><span id="tg_247" class="t s2_247">itself, </span><span id="th_247" class="t s3_247">removeEldestEntry </span><span id="ti_247" class="t s2_247">does nothing and </span>
<span id="tj_247" class="t s2_247">returns </span><span id="tk_247" class="t s3_247">false</span><span id="tl_247" class="t s2_247">, but subclasses can override it to return </span><span id="tm_247" class="t s3_247">true </span><span id="tn_247" class="t s2_247">under some circumstances. </span>
<span id="to_247" class="t s2_247">The contract for this method specifies that although it may itself remove the eldest </span>
<span id="tp_247" class="t s2_247">entry, it must return </span><span id="tq_247" class="t s3_247">false </span><span id="tr_247" class="t s2_247">if it has done so, since it is expected that a return value of </span>
<span id="ts_247" class="t s3_247">true </span><span id="tt_247" class="t s2_247">will cause its calling method to do the removal. A simple example of </span><span id="tu_247" class="t s3_247">removeEldes </span>
<span id="tv_247" class="t s3_247">tEntry </span><span id="tw_247" class="t s2_247">would allow a map to grow to a given maximum size and then maintain that </span>
<span id="tx_247" class="t s2_247">size by deleting the eldest entry each time a new one is added: </span>
<span id="ty_247" class="t s1_247">class BoundedSizeMap extends LinkedHashMap { </span>
<span id="tz_247" class="t s1_247">private int maxEntries; </span>
<span id="t10_247" class="t s1_247">public BoundedSizeMap(int maxEntries) { </span>
<span id="t11_247" class="t s1_247">super(16, 0.75f, true); </span>
<span id="t12_247" class="t s1_247">this.maxEntries = maxEntries; </span>
<span id="t13_247" class="t s1_247">} </span>
<span id="t14_247" class="t s1_247">protected boolean removeEldestEntry(Map.Entry eldest) { </span>
<span id="t15_247" class="t s1_247">return size() &gt; maxEntries; </span>
<span id="t16_247" class="t s1_247">} </span>
<span id="t17_247" class="t s1_247">} </span>
<span id="t18_247" class="t s2_247">A refinement of this simple example could take into account the entry supplied as the </span>
<span id="t19_247" class="t s2_247">argument to </span><span id="t1a_247" class="t s3_247">removeEldestEntry</span><span id="t1b_247" class="t s2_247">. For example, a directory cache might have a set of </span>
<span id="t1c_247" class="t s2_247">reserved names which should never be removed, even if the cache continues to grow </span>
<span id="t1d_247" class="t s2_247">as a result. </span>
<span id="t1e_247" class="t s2_247">Notice that an insertion-ordered </span><span id="t1f_247" class="t s3_247">LinkedHashMap </span><span id="t1g_247" class="t s2_247">that overrides </span><span id="t1h_247" class="t s3_247">removeEldestEntry </span><span id="t1i_247" class="t s2_247">as </span>
<span id="t1j_247" class="t s2_247">shown above will implement a FIFO strategy. FIFO caching has often been used in </span>
<span id="t1k_247" class="t s2_247">preference to LRU because it is much simpler to implement in maps that do not offer </span>
<span id="t1l_247" class="t s2_247">access ordering. However LRU is usually more effective than FIFO, because the reduced </span>
<span id="t1m_247" class="t s2_247">cost of cache refreshes outweighs the overhead of maintaining access ordering. </span>
<span id="t1n_247" class="t s2_247">Iteration over a collection of keys or values returned by a </span><span id="t1o_247" class="t s3_247">LinkedHashMap </span><span id="t1p_247" class="t s2_247">is linear in the </span>
<span id="t1q_247" class="t s2_247">number of elements. The iterators over such collections are fail-fast. </span>
<span id="t1r_247" class="t s4_247">16.2.3. WeakHashMap </span>
<span id="t1s_247" class="t s2_247">An ordinary </span><span id="t1t_247" class="t s3_247">Map </span><span id="t1u_247" class="t s2_247">keeps ordinary (“strong”) references to all the objects it contains. That </span>
<span id="t1v_247" class="t s2_247">means that even when a key has become unreachable by any means other than through </span>
<span id="t1w_247" class="t s2_247">the map itself, it cannot be garbage collected. Often, that’s exactly what we want; in </span>
<span id="t1x_247" class="t s2_247">the example at the beginning of this chapter, where we mapped tasks to clients, we </span>
<span id="t1y_247" class="t s2_247">wouldn’t have wanted a mapping to disappear just because we weren’t holding a ref- </span>
<span id="t1z_247" class="t s2_247">erence to the task object that we had put into the </span><span id="t20_247" class="t s3_247">HashMap</span><span id="t21_247" class="t s2_247">. To look up the value asso- </span>
<span id="t22_247" class="t s5_247">16.2 </span><span id="t23_247" class="t s5_247">Implementing Map </span><span id="t24_247" class="t s5_247">| </span><span id="t25_247" class="t s5_247">229 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
