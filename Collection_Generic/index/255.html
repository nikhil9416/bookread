<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p255" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_255{left:110px;bottom:906px;letter-spacing:-0.17px;word-spacing:0.16px;}
#t2_255{left:110px;bottom:887px;letter-spacing:-0.18px;word-spacing:-0.27px;}
#t3_255{left:110px;bottom:861px;letter-spacing:-0.17px;word-spacing:0.5px;}
#t4_255{left:247px;bottom:862px;letter-spacing:0.01px;}
#t5_255{left:301px;bottom:861px;letter-spacing:-0.17px;word-spacing:0.5px;}
#t6_255{left:110px;bottom:842px;letter-spacing:-0.16px;}
#t7_255{left:185px;bottom:843px;letter-spacing:0.01px;}
#t8_255{left:259px;bottom:842px;letter-spacing:-0.17px;}
#t9_255{left:593px;bottom:843px;letter-spacing:0.01px;}
#ta_255{left:656px;bottom:842px;}
#tb_255{left:110px;bottom:824px;letter-spacing:-0.19px;}
#tc_255{left:138px;bottom:802px;letter-spacing:0.11px;}
#td_255{left:138px;bottom:788px;letter-spacing:0.11px;}
#te_255{left:110px;bottom:759px;letter-spacing:-0.17px;word-spacing:0.16px;}
#tf_255{left:110px;bottom:740px;letter-spacing:-0.17px;word-spacing:0.42px;}
#tg_255{left:283px;bottom:741px;letter-spacing:0.01px;}
#th_255{left:336px;bottom:740px;letter-spacing:-0.16px;word-spacing:0.34px;}
#ti_255{left:110px;bottom:721px;letter-spacing:-0.17px;word-spacing:-0.09px;}
#tj_255{left:110px;bottom:703px;letter-spacing:-0.14px;}
#tk_255{left:189px;bottom:703px;letter-spacing:0.01px;}
#tl_255{left:252px;bottom:703px;}
#tm_255{left:110px;bottom:677px;letter-spacing:0.01px;}
#tn_255{left:163px;bottom:676px;letter-spacing:-0.17px;word-spacing:0.44px;}
#to_255{left:437px;bottom:677px;letter-spacing:0.01px;}
#tp_255{left:486px;bottom:676px;letter-spacing:-0.17px;word-spacing:0.44px;}
#tq_255{left:635px;bottom:677px;letter-spacing:0.01px;}
#tr_255{left:656px;bottom:676px;}
#ts_255{left:110px;bottom:658px;letter-spacing:0.01px;}
#tt_255{left:131px;bottom:658px;letter-spacing:-0.14px;}
#tu_255{left:167px;bottom:658px;letter-spacing:0.01px;}
#tv_255{left:209px;bottom:658px;letter-spacing:-0.16px;}
#tw_255{left:291px;bottom:658px;}
#tx_255{left:303px;bottom:658px;letter-spacing:-0.13px;}
#ty_255{left:332px;bottom:658px;}
#tz_255{left:340px;bottom:658px;letter-spacing:-0.16px;}
#t10_255{left:110px;bottom:599px;letter-spacing:-0.14px;}
#t11_255{left:158px;bottom:599px;letter-spacing:-0.2px;}
#t12_255{left:110px;bottom:576px;letter-spacing:-0.18px;word-spacing:0.51px;}
#t13_255{left:110px;bottom:558px;letter-spacing:-0.18px;word-spacing:-0.33px;}
#t14_255{left:110px;bottom:539px;letter-spacing:-0.18px;word-spacing:0.28px;}
#t15_255{left:110px;bottom:520px;letter-spacing:-0.17px;}
#t16_255{left:281px;bottom:521px;letter-spacing:0.01px;}
#t17_255{left:470px;bottom:520px;letter-spacing:-0.17px;}
#t18_255{left:110px;bottom:501px;letter-spacing:-0.17px;word-spacing:0.25px;}
#t19_255{left:110px;bottom:483px;letter-spacing:-0.16px;word-spacing:0.05px;}
#t1a_255{left:567px;bottom:483px;letter-spacing:-0.16px;}
#t1b_255{left:644px;bottom:483px;}
#t1c_255{left:110px;bottom:464px;letter-spacing:-0.16px;word-spacing:-0.45px;}
#t1d_255{left:562px;bottom:465px;letter-spacing:0.01px;}
#t1e_255{left:110px;bottom:446px;letter-spacing:0.01px;}
#t1f_255{left:131px;bottom:445px;letter-spacing:-0.16px;word-spacing:0.86px;}
#t1g_255{left:110px;bottom:427px;letter-spacing:-0.16px;word-spacing:-1.4px;}
#t1h_255{left:110px;bottom:408px;letter-spacing:-0.17px;}
#t1i_255{left:110px;bottom:382px;letter-spacing:-0.16px;word-spacing:-1px;}
#t1j_255{left:332px;bottom:382px;letter-spacing:0.01px;}
#t1k_255{left:424px;bottom:382px;letter-spacing:-0.17px;word-spacing:-1px;}
#t1l_255{left:110px;bottom:363px;letter-spacing:-0.18px;}
#t1m_255{left:138px;bottom:342px;letter-spacing:0.11px;}
#t1n_255{left:186px;bottom:327px;letter-spacing:0.11px;}
#t1o_255{left:186px;bottom:312px;letter-spacing:0.11px;}
#t1p_255{left:186px;bottom:298px;letter-spacing:0.11px;}
#t1q_255{left:138px;bottom:283px;letter-spacing:0.11px;}
#t1r_255{left:186px;bottom:268px;letter-spacing:0.11px;}
#t1s_255{left:186px;bottom:254px;letter-spacing:0.11px;}
#t1t_255{left:138px;bottom:239px;letter-spacing:0.11px;}
#t1u_255{left:186px;bottom:224px;letter-spacing:0.11px;}
#t1v_255{left:186px;bottom:210px;letter-spacing:0.11px;}
#t1w_255{left:186px;bottom:195px;letter-spacing:0.11px;}
#t1x_255{left:138px;bottom:180px;letter-spacing:0.11px;}
#t1y_255{left:186px;bottom:166px;letter-spacing:0.11px;}
#t1z_255{left:186px;bottom:151px;letter-spacing:0.11px;}
#t20_255{left:528px;bottom:60px;letter-spacing:-0.07px;}
#t21_255{left:552px;bottom:60px;letter-spacing:-0.1px;}
#t22_255{left:631px;bottom:60px;}
#t23_255{left:643px;bottom:60px;letter-spacing:-0.1px;}

.s1_255{font-size:16px;font-family:CNCSGY-2bBirka_1c;color:#000;}
.s2_255{font-size:14px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s3_255{font-size:12px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s4_255{font-size:16px;font-family:CNCSGY-2bBirka-Italic_1i;color:#000;}
.s5_255{font-size:28px;font-family:CNCSGY-2bMyriadPro-SemiboldCo_q;color:#000;}
.s6_255{font-size:14px;font-family:CNCSGY-2bMyriadPro-SemiboldCo_q;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts255" type="text/css" >

@font-face {
	font-family: CNCSGY-2bBirka-Italic_1i;
	src: url("fonts/CNCSGY-2bBirka-Italic_1i.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bBirka_1c;
	src: url("fonts/CNCSGY-2bBirka_1c.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bMyriadPro-SemiboldCo_q;
	src: url("fonts/CNCSGY-2bMyriadPro-SemiboldCo_q.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bTheSansMonoCd-W5Reg_dv;
	src: url("fonts/CNCSGY-2bTheSansMonoCd-W5Reg_dv.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg255Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg255" style="-webkit-user-select: none;"><object width="770" height="1010" data="255/255.svg" type="image/svg+xml" id="pdf255" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_255" class="t s1_255">every key is associated with the same standard value, so the explanation of the mech- </span>
<span id="t2_255" class="t s1_255">anism and performance of red-black trees given in Section 13.2.2 applies equally here. </span>
<span id="t3_255" class="t s1_255">The constructors for </span><span id="t4_255" class="t s2_255">TreeMap </span><span id="t5_255" class="t s1_255">include, besides the standard ones, one that allows you </span>
<span id="t6_255" class="t s1_255">to supply a </span><span id="t7_255" class="t s2_255">Comparator </span><span id="t8_255" class="t s1_255">and one that allows you to create one from another </span><span id="t9_255" class="t s2_255">SortedMap</span><span id="ta_255" class="t s1_255">, </span>
<span id="tb_255" class="t s1_255">using both the same comparator and the same mappings: </span>
<span id="tc_255" class="t s3_255">public TreeMap(Comparator&lt;? super K&gt; comparator) </span>
<span id="td_255" class="t s3_255">public TreeMap(SortedMap&lt;K, ? extends V&gt; m) </span>
<span id="te_255" class="t s1_255">Notice that the second of these constructors suffer from a similar problem to the cor- </span>
<span id="tf_255" class="t s1_255">responding constructor of </span><span id="tg_255" class="t s2_255">TreeSet </span><span id="th_255" class="t s1_255">(see Section 13.2.2), because the standard conver- </span>
<span id="ti_255" class="t s1_255">sion constructor always uses the natural ordering of the keys, even when its argument </span>
<span id="tj_255" class="t s1_255">is actually a </span><span id="tk_255" class="t s2_255">SortedMap</span><span id="tl_255" class="t s1_255">. </span>
<span id="tm_255" class="t s2_255">TreeMap </span><span id="tn_255" class="t s1_255">has similar performance characteristics to </span><span id="to_255" class="t s2_255">TreeSet</span><span id="tp_255" class="t s1_255">: the basic operations (</span><span id="tq_255" class="t s2_255">get</span><span id="tr_255" class="t s1_255">, </span>
<span id="ts_255" class="t s2_255">put</span><span id="tt_255" class="t s1_255">, and </span><span id="tu_255" class="t s2_255">remove</span><span id="tv_255" class="t s1_255">) perform in </span><span id="tw_255" class="t s4_255">O</span><span id="tx_255" class="t s1_255">(log </span><span id="ty_255" class="t s4_255">n</span><span id="tz_255" class="t s1_255">) time). The collection view iterators are fail-fast. </span>
<span id="t10_255" class="t s5_255">16.4 </span><span id="t11_255" class="t s5_255">ConcurrentMap </span>
<span id="t12_255" class="t s1_255">Maps are often used in high-performance server applications—for example, as cache </span>
<span id="t13_255" class="t s1_255">implementations—so a high-throughput thread-safe map implementation is an essen- </span>
<span id="t14_255" class="t s1_255">tial part of the Java platform. This requirement cannot be met by synchronized maps </span>
<span id="t15_255" class="t s1_255">such as those provided by </span><span id="t16_255" class="t s2_255">Collections.synchronizedMap</span><span id="t17_255" class="t s1_255">, because with full synchroni- </span>
<span id="t18_255" class="t s1_255">zation each operation needs to obtain an exclusive lock on the entire map, effectively </span>
<span id="t19_255" class="t s1_255">serializing access to it. Locking only a part of the collection at a time—</span><span id="t1a_255" class="t s4_255">lock striping</span><span id="t1b_255" class="t s1_255">— </span>
<span id="t1c_255" class="t s1_255">can achieve very large gains in throughput, as we shall see shortly with </span><span id="t1d_255" class="t s2_255">ConcurrentHash </span>
<span id="t1e_255" class="t s2_255">Map</span><span id="t1f_255" class="t s1_255">. But because there is no single lock for a client to hold to gain exclusive access, </span>
<span id="t1g_255" class="t s1_255">client-side locking no longer works, and clients need assistance from the collection itself </span>
<span id="t1h_255" class="t s1_255">to carry out atomic actions. </span>
<span id="t1i_255" class="t s1_255">That is the purpose of the interface </span><span id="t1j_255" class="t s2_255">ConcurrentMap</span><span id="t1k_255" class="t s1_255">. It provides declarations for methods </span>
<span id="t1l_255" class="t s1_255">that perform compound operations atomically. There are four of these methods: </span>
<span id="t1m_255" class="t s3_255">V putIfAbsent(K key, V value) </span>
<span id="t1n_255" class="t s3_255">// associate key with value only if key is not currently present. </span>
<span id="t1o_255" class="t s3_255">// return the old value (may be null) if the key was present, </span>
<span id="t1p_255" class="t s3_255">// otherwise return null </span>
<span id="t1q_255" class="t s3_255">boolean remove(Object key, Object value) </span>
<span id="t1r_255" class="t s3_255">// remove key only if it is currently mapped to value. Returns </span>
<span id="t1s_255" class="t s3_255">// true if the value was removed, false otherwise </span>
<span id="t1t_255" class="t s3_255">V replace(K key, V value) </span>
<span id="t1u_255" class="t s3_255">// replace entry for key only if it is currently present. Return </span>
<span id="t1v_255" class="t s3_255">// the old value (may be null) if the key was present, otherwise </span>
<span id="t1w_255" class="t s3_255">// return null </span>
<span id="t1x_255" class="t s3_255">boolean replace(K key, V oldValue, V newValue) </span>
<span id="t1y_255" class="t s3_255">// replace entry for key only if it is currently mapped to oldValue. </span>
<span id="t1z_255" class="t s3_255">// return true if the value was replaced, false otherwise </span>
<span id="t20_255" class="t s6_255">16.4 </span><span id="t21_255" class="t s6_255">ConcurrentMap </span><span id="t22_255" class="t s6_255">| </span><span id="t23_255" class="t s6_255">237 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
