<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p181" style="overflow: hidden; position: relative; background-color: white; width: 770px; height: 1010px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_181{left:110px;bottom:906px;letter-spacing:-0.17px;word-spacing:0.3px;}
#t2_181{left:110px;bottom:888px;letter-spacing:0.01px;}
#t3_181{left:161px;bottom:887px;letter-spacing:-0.16px;word-spacing:-1.5px;}
#t4_181{left:110px;bottom:869px;letter-spacing:-0.18px;word-spacing:-0.12px;}
#t5_181{left:110px;bottom:850px;letter-spacing:-0.17px;}
#t6_181{left:138px;bottom:829px;letter-spacing:0.11px;}
#t7_181{left:138px;bottom:814px;letter-spacing:0.11px;}
#t8_181{left:110px;bottom:785px;letter-spacing:-0.17px;word-spacing:0.72px;}
#t9_181{left:110px;bottom:766px;letter-spacing:-0.17px;word-spacing:-1.25px;}
#ta_181{left:138px;bottom:745px;letter-spacing:0.11px;}
#tb_181{left:138px;bottom:730px;letter-spacing:0.11px;}
#tc_181{left:138px;bottom:716px;letter-spacing:0.11px;}
#td_181{left:290px;bottom:716px;letter-spacing:0.11px;}
#te_181{left:400px;bottom:716px;letter-spacing:0.11px;}
#tf_181{left:110px;bottom:687px;letter-spacing:-0.17px;}
#tg_181{left:160px;bottom:687px;letter-spacing:-0.21px;}
#th_181{left:187px;bottom:687px;letter-spacing:-0.16px;}
#ti_181{left:295px;bottom:688px;}
#tj_181{left:306px;bottom:687px;letter-spacing:-0.16px;word-spacing:0.11px;}
#tk_181{left:440px;bottom:688px;letter-spacing:0.01px;}
#tl_181{left:500px;bottom:687px;letter-spacing:-0.17px;word-spacing:0.11px;}
#tm_181{left:110px;bottom:668px;letter-spacing:-0.17px;word-spacing:1.43px;}
#tn_181{left:110px;bottom:649px;letter-spacing:-0.17px;}
#to_181{left:137px;bottom:628px;letter-spacing:0.11px;}
#tp_181{left:217px;bottom:628px;letter-spacing:0.11px;}
#tq_181{left:137px;bottom:613px;letter-spacing:0.11px;}
#tr_181{left:192px;bottom:613px;letter-spacing:0.11px;}
#ts_181{left:110px;bottom:585px;letter-spacing:-0.17px;word-spacing:1.15px;}
#tt_181{left:110px;bottom:566px;letter-spacing:-0.16px;word-spacing:-0.69px;}
#tu_181{left:399px;bottom:567px;letter-spacing:0.01px;}
#tv_181{left:451px;bottom:566px;letter-spacing:-0.18px;word-spacing:-0.7px;}
#tw_181{left:110px;bottom:540px;letter-spacing:-0.16px;word-spacing:0.42px;}
#tx_181{left:110px;bottom:521px;letter-spacing:-0.18px;}
#ty_181{left:137px;bottom:500px;letter-spacing:0.11px;}
#tz_181{left:400px;bottom:500px;}
#t10_181{left:406px;bottom:500px;letter-spacing:0.11px;}
#t11_181{left:137px;bottom:485px;letter-spacing:0.11px;}
#t12_181{left:382px;bottom:485px;letter-spacing:0.11px;}
#t13_181{left:110px;bottom:456px;letter-spacing:-0.15px;word-spacing:-0.47px;}
#t14_181{left:238px;bottom:457px;letter-spacing:0.01px;}
#t15_181{left:371px;bottom:456px;letter-spacing:-0.16px;word-spacing:-0.47px;}
#t16_181{left:110px;bottom:437px;letter-spacing:-0.17px;}
#t17_181{left:110px;bottom:411px;letter-spacing:-0.17px;word-spacing:0.48px;}
#t18_181{left:110px;bottom:392px;letter-spacing:-0.16px;word-spacing:-1.23px;}
#t19_181{left:110px;bottom:374px;letter-spacing:-0.16px;word-spacing:-0.48px;}
#t1a_181{left:110px;bottom:355px;letter-spacing:-0.17px;word-spacing:0.16px;}
#t1b_181{left:110px;bottom:336px;letter-spacing:-0.16px;word-spacing:-1.11px;}
#t1c_181{left:110px;bottom:318px;letter-spacing:-0.17px;word-spacing:0.3px;}
#t1d_181{left:110px;bottom:299px;letter-spacing:-0.17px;}
#t1e_181{left:110px;bottom:273px;letter-spacing:-0.17px;}
#t1f_181{left:137px;bottom:251px;letter-spacing:0.11px;}
#t1g_181{left:137px;bottom:237px;letter-spacing:0.11px;}
#t1h_181{left:345px;bottom:237px;letter-spacing:0.11px;}
#t1i_181{left:110px;bottom:208px;letter-spacing:-0.17px;word-spacing:0.94px;}
#t1j_181{left:385px;bottom:208px;}
#t1k_181{left:397px;bottom:208px;letter-spacing:-0.18px;word-spacing:0.94px;}
#t1l_181{left:110px;bottom:189px;letter-spacing:-0.17px;word-spacing:0.26px;}
#t1m_181{left:574px;bottom:190px;letter-spacing:0.01px;}
#t1n_181{left:599px;bottom:189px;letter-spacing:-0.16px;}
#t1o_181{left:632px;bottom:190px;letter-spacing:0.01px;}
#t1p_181{left:110px;bottom:171px;letter-spacing:0.01px;}
#t1q_181{left:131px;bottom:170px;letter-spacing:-0.17px;word-spacing:0.56px;}
#t1r_181{left:110px;bottom:152px;letter-spacing:-0.16px;word-spacing:-0.28px;}
#t1s_181{left:110px;bottom:133px;letter-spacing:-0.16px;}
#t1t_181{left:515px;bottom:60px;letter-spacing:-0.08px;}
#t1u_181{left:631px;bottom:60px;}
#t1v_181{left:643px;bottom:60px;letter-spacing:-0.1px;}

.s1_181{font-size:16px;font-family:CNCSGY-2bBirka_1c;color:#000;}
.s2_181{font-size:14px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s3_181{font-size:12px;font-family:CNCSGY-2bTheSansMonoCd-W5Reg_dv;color:#000;}
.s4_181{font-size:12px;font-family:CNCSGY-2bTheSansMonoCd-W7Bol_e9;color:#000;}
.s5_181{font-size:16px;font-family:CNCSGY-2bBirka-Italic_1i;color:#000;}
.s6_181{font-size:14px;font-family:CNCSGY-2bMyriadPro-SemiboldCo_q;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts181" type="text/css" >

@font-face {
	font-family: CNCSGY-2bBirka-Italic_1i;
	src: url("fonts/CNCSGY-2bBirka-Italic_1i.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bBirka_1c;
	src: url("fonts/CNCSGY-2bBirka_1c.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bMyriadPro-SemiboldCo_q;
	src: url("fonts/CNCSGY-2bMyriadPro-SemiboldCo_q.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bTheSansMonoCd-W5Reg_dv;
	src: url("fonts/CNCSGY-2bTheSansMonoCd-W5Reg_dv.woff") format("woff");
}

@font-face {
	font-family: CNCSGY-2bTheSansMonoCd-W7Bol_e9;
	src: url("fonts/CNCSGY-2bTheSansMonoCd-W7Bol_e9.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg181Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg181" style="-webkit-user-select: none;"><object width="770" height="1010" data="181/181.svg" type="image/svg+xml" id="pdf181" style="width:770px; height:1010px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_181" class="t s1_181">new array of that type is created. The first case can be useful if you want to allow the </span>
<span id="t2_181" class="t s2_181">toArray </span><span id="t3_181" class="t s1_181">method to reuse an array that you supply; this can be more efficient, particularly </span>
<span id="t4_181" class="t s1_181">if the method is being called repeatedly. The second case is more convenientâ€”a com- </span>
<span id="t5_181" class="t s1_181">mon and straightforward idiom is to supply an array of zero length: </span>
<span id="t6_181" class="t s3_181">Collection&lt;String&gt; cs = ... </span>
<span id="t7_181" class="t s3_181">String[] sa = cs.toArray(new String[0]); </span>
<span id="t8_181" class="t s1_181">A more efficient alternative, if a class uses this idiom more than once, is to declare a </span>
<span id="t9_181" class="t s1_181">single empty array of the required type, that can then be used as many times as required: </span>
<span id="ta_181" class="t s4_181">private static final String[] EMPTY_STRING_ARRAY = new String[0]; </span>
<span id="tb_181" class="t s3_181">Collection&lt;String&gt; cs = ... </span>
<span id="tc_181" class="t s3_181">String[] sa = cs.toArray(</span><span id="td_181" class="t s4_181">EMPTY_STRING_ARRAY</span><span id="te_181" class="t s3_181">); </span>
<span id="tf_181" class="t s1_181">Why is </span><span id="tg_181" class="t s5_181">any </span><span id="th_181" class="t s1_181">type allowed for </span><span id="ti_181" class="t s2_181">T </span><span id="tj_181" class="t s1_181">in the declaration of </span><span id="tk_181" class="t s2_181">toArray? </span><span id="tl_181" class="t s1_181">One reason is to give the </span>
<span id="tm_181" class="t s1_181">flexibility to allocate a more specific array type if the collection happens to contain </span>
<span id="tn_181" class="t s1_181">elements of that type: </span>
<span id="to_181" class="t s4_181">List&lt;Object&gt; </span><span id="tp_181" class="t s3_181">l = Array.asList("zero","one"); </span>
<span id="tq_181" class="t s4_181">String[] </span><span id="tr_181" class="t s3_181">a = l.toArray(new String[0]); </span>
<span id="ts_181" class="t s1_181">Here, a list of objects happens to contain only strings, so it can be converted into a </span>
<span id="tt_181" class="t s1_181">string array, in an operation analogous to the </span><span id="tu_181" class="t s2_181">promote </span><span id="tv_181" class="t s1_181">method described in Section 6.2. </span>
<span id="tw_181" class="t s1_181">If the list contains an object that is not a string, the error is caught at run time rather </span>
<span id="tx_181" class="t s1_181">than compile time: </span>
<span id="ty_181" class="t s3_181">List&lt;Object&gt; l = Array.asList("zero","one",</span><span id="tz_181" class="t s4_181">2</span><span id="t10_181" class="t s3_181">); </span>
<span id="t11_181" class="t s3_181">String[] a = l.toArray(new String[0]); </span><span id="t12_181" class="t s4_181">// run-time error </span>
<span id="t13_181" class="t s1_181">Here, the call raises </span><span id="t14_181" class="t s2_181">ArrayStoreException</span><span id="t15_181" class="t s1_181">, the exception that occurs if you try to assign </span>
<span id="t16_181" class="t s1_181">to an array with an incompatible reified type. </span>
<span id="t17_181" class="t s1_181">In general, one may want to copy a collection of a given type into an array of a more </span>
<span id="t18_181" class="t s1_181">specific type (for instance, copying a list of objects into an array of strings, as we showed </span>
<span id="t19_181" class="t s1_181">earlier), or of a more general type (for instance, copying a list of strings into an array of </span>
<span id="t1a_181" class="t s1_181">objects). One would never want to copy a collection of a given type into an array of a </span>
<span id="t1b_181" class="t s1_181">completely unrelated type (for instance, copying a list of integers into an array of strings </span>
<span id="t1c_181" class="t s1_181">is always wrong). However, there is no way to specify this constraint in Java, so such </span>
<span id="t1d_181" class="t s1_181">errors are caught at run time rather than compile time. </span>
<span id="t1e_181" class="t s1_181">One drawback of this design is that it does not work with arrays of primitive type: </span>
<span id="t1f_181" class="t s3_181">List&lt;Integer&gt; l = Array.asList(0,1,2); </span>
<span id="t1g_181" class="t s3_181">int[] a = l.toArray(new int[0]); </span><span id="t1h_181" class="t s4_181">// compile-time error </span>
<span id="t1i_181" class="t s1_181">This is illegal because the type parameter </span><span id="t1j_181" class="t s2_181">T </span><span id="t1k_181" class="t s1_181">in the method call must, as always, be a </span>
<span id="t1l_181" class="t s1_181">reference type. The call would work if we replaced both occurrences of </span><span id="t1m_181" class="t s2_181">int </span><span id="t1n_181" class="t s1_181">with </span><span id="t1o_181" class="t s2_181">Inte </span>
<span id="t1p_181" class="t s2_181">ger</span><span id="t1q_181" class="t s1_181">, but often this will not do because, for performance or compatibility reasons, we </span>
<span id="t1r_181" class="t s1_181">require an array of primitive type. In such cases, there is nothing for it but to copy the </span>
<span id="t1s_181" class="t s1_181">array explicitly: </span>
<span id="t1t_181" class="t s6_181">The Collection Interface </span><span id="t1u_181" class="t s6_181">| </span><span id="t1v_181" class="t s6_181">163 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
