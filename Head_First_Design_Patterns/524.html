<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p524" style="overflow: hidden; position: relative; background-color: white; width: 907px; height: 1045px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_524{left:92px;bottom:55px;letter-spacing:0.17px;}
#t2_524{left:147px;bottom:55px;letter-spacing:-0.25px;word-spacing:0.13px;}
#t3_524{left:91px;bottom:923px;letter-spacing:-0.12px;}
#t4_524{left:162px;bottom:923px;letter-spacing:-0.14px;}
#t5_524{left:91px;bottom:786px;letter-spacing:0.27px;}
#t6_524{left:131px;bottom:793px;letter-spacing:0.03px;}
#t7_524{left:91px;bottom:776px;letter-spacing:-0.04px;word-spacing:0.06px;}
#t8_524{left:91px;bottom:760px;letter-spacing:-0.03px;}
#t9_524{left:149px;bottom:760px;letter-spacing:-0.01px;word-spacing:0.05px;}
#ta_524{left:91px;bottom:743px;letter-spacing:0.02px;word-spacing:0.01px;}
#tb_524{left:91px;bottom:726px;letter-spacing:-0.01px;word-spacing:0.03px;}
#tc_524{left:91px;bottom:665px;letter-spacing:0.64px;}
#td_524{left:132px;bottom:675px;letter-spacing:-0.04px;word-spacing:0.08px;}
#te_524{left:91px;bottom:658px;letter-spacing:0.02px;word-spacing:0.02px;}
#tf_524{left:91px;bottom:642px;letter-spacing:-0.01px;word-spacing:0.05px;}
#tg_524{left:91px;bottom:625px;word-spacing:0.04px;}
#th_524{left:91px;bottom:608px;letter-spacing:0.03px;}
#ti_524{left:91px;bottom:591px;letter-spacing:0.05px;}
#tj_524{left:91px;bottom:537px;letter-spacing:0.27px;}
#tk_524{left:131px;bottom:544px;letter-spacing:-0.01px;word-spacing:0.02px;}
#tl_524{left:91px;bottom:527px;letter-spacing:-0.06px;word-spacing:0.09px;}
#tm_524{left:91px;bottom:510px;letter-spacing:0.01px;word-spacing:0.01px;}
#tn_524{left:91px;bottom:493px;letter-spacing:-0.05px;word-spacing:0.08px;}
#to_524{left:91px;bottom:432px;letter-spacing:0.64px;}
#tp_524{left:132px;bottom:443px;letter-spacing:0.16px;word-spacing:0.01px;}
#tq_524{left:91px;bottom:426px;letter-spacing:0.14px;word-spacing:0.03px;}
#tr_524{left:91px;bottom:410px;letter-spacing:0.16px;word-spacing:0.01px;}
#ts_524{left:91px;bottom:393px;letter-spacing:0.16px;word-spacing:0.01px;}
#tt_524{left:252px;bottom:393px;letter-spacing:0.14px;word-spacing:0.02px;}
#tu_524{left:91px;bottom:377px;letter-spacing:0.16px;word-spacing:-0.1px;}
#tv_524{left:91px;bottom:360px;letter-spacing:0.12px;word-spacing:0.04px;}
#tw_524{left:91px;bottom:343px;letter-spacing:0.1px;}
#tx_524{left:91px;bottom:289px;letter-spacing:0.27px;}
#ty_524{left:131px;bottom:296px;word-spacing:0.04px;}
#tz_524{left:91px;bottom:279px;letter-spacing:0.02px;word-spacing:0.02px;}
#t10_524{left:339px;bottom:783px;letter-spacing:0.27px;}
#t11_524{left:379px;bottom:793px;letter-spacing:-0.3px;}
#t12_524{left:406px;bottom:793px;letter-spacing:0.02px;word-spacing:0.02px;}
#t13_524{left:339px;bottom:776px;letter-spacing:-0.01px;word-spacing:0.04px;}
#t14_524{left:339px;bottom:760px;letter-spacing:0.04px;}
#t15_524{left:339px;bottom:743px;letter-spacing:0.04px;}
#t16_524{left:339px;bottom:726px;letter-spacing:0.04px;}
#t17_524{left:375px;bottom:726px;word-spacing:0.04px;}
#t18_524{left:339px;bottom:709px;letter-spacing:0.04px;}
#t19_524{left:339px;bottom:692px;letter-spacing:0.05px;word-spacing:-0.01px;}
#t1a_524{left:339px;bottom:638px;letter-spacing:0.27px;}
#t1b_524{left:379px;bottom:645px;letter-spacing:0.01px;word-spacing:0.02px;}
#t1c_524{left:339px;bottom:628px;letter-spacing:0.04px;word-spacing:-0.03px;}
#t1d_524{left:339px;bottom:611px;letter-spacing:-0.01px;}
#t1e_524{left:339px;bottom:554px;letter-spacing:0.27px;}
#t1f_524{left:379px;bottom:564px;letter-spacing:-0.14px;word-spacing:0.19px;}
#t1g_524{left:497px;bottom:564px;letter-spacing:-0.09px;word-spacing:0.16px;}
#t1h_524{left:339px;bottom:547px;letter-spacing:0.02px;word-spacing:0.01px;}
#t1i_524{left:339px;bottom:531px;letter-spacing:0.01px;word-spacing:0.02px;}
#t1j_524{left:339px;bottom:514px;letter-spacing:0.03px;word-spacing:0.01px;}
#t1k_524{left:339px;bottom:497px;letter-spacing:0.03px;word-spacing:0.01px;}
#t1l_524{left:405px;bottom:497px;letter-spacing:0.04px;}
#t1m_524{left:339px;bottom:480px;letter-spacing:0.04px;}
#t1n_524{left:339px;bottom:463px;letter-spacing:0.03px;}
#t1o_524{left:502px;bottom:463px;letter-spacing:-0.13px;word-spacing:0.16px;}
#t1p_524{left:339px;bottom:446px;letter-spacing:0.01px;word-spacing:0.02px;}
#t1q_524{left:339px;bottom:430px;word-spacing:0.03px;}
#t1r_524{left:339px;bottom:413px;letter-spacing:0.03px;}
#t1s_524{left:339px;bottom:396px;letter-spacing:0.03px;}
#t1t_524{left:406px;bottom:396px;letter-spacing:0.01px;word-spacing:0.02px;}
#t1u_524{left:339px;bottom:379px;letter-spacing:-0.01px;word-spacing:0.05px;}
#t1v_524{left:339px;bottom:362px;letter-spacing:0.04px;}
#t1w_524{left:339px;bottom:346px;word-spacing:0.03px;}
#t1x_524{left:339px;bottom:291px;letter-spacing:0.27px;}
#t1y_524{left:379px;bottom:298px;letter-spacing:-0.02px;word-spacing:0.04px;}
#t1z_524{left:339px;bottom:281px;letter-spacing:0.02px;word-spacing:0.01px;}
#t20_524{left:339px;bottom:265px;letter-spacing:-0.05px;word-spacing:0.08px;}
#t21_524{left:587px;bottom:776px;letter-spacing:0.27px;}
#t22_524{left:627px;bottom:787px;letter-spacing:-0.12px;word-spacing:0.16px;}
#t23_524{left:587px;bottom:770px;letter-spacing:0.03px;word-spacing:0.01px;}
#t24_524{left:770px;bottom:770px;letter-spacing:-0.03px;}
#t25_524{left:587px;bottom:753px;letter-spacing:-0.02px;word-spacing:0.06px;}
#t26_524{left:587px;bottom:736px;letter-spacing:0.04px;word-spacing:0.01px;}
#t27_524{left:587px;bottom:719px;letter-spacing:0.04px;word-spacing:-0.01px;}
#t28_524{left:587px;bottom:703px;letter-spacing:0.03px;word-spacing:0.01px;}
#t29_524{left:587px;bottom:686px;letter-spacing:0.02px;word-spacing:0.01px;}
#t2a_524{left:587px;bottom:669px;letter-spacing:0.03px;}
#t2b_524{left:587px;bottom:652px;word-spacing:0.03px;}
#t2c_524{left:587px;bottom:635px;letter-spacing:0.02px;word-spacing:0.01px;}
#t2d_524{left:587px;bottom:619px;letter-spacing:0.03px;}
#t2e_524{left:587px;bottom:564px;letter-spacing:0.27px;}
#t2f_524{left:627px;bottom:571px;letter-spacing:-0.05px;word-spacing:0.09px;}
#t2g_524{left:587px;bottom:554px;letter-spacing:-0.03px;word-spacing:0.05px;}
#t2h_524{left:587px;bottom:538px;letter-spacing:-0.07px;word-spacing:0.1px;}
#t2i_524{left:691px;bottom:538px;letter-spacing:0.01px;word-spacing:0.02px;}
#t2j_524{left:587px;bottom:480px;letter-spacing:0.27px;}
#t2k_524{left:627px;bottom:490px;letter-spacing:0.07px;}
#t2l_524{left:683px;bottom:490px;letter-spacing:-0.06px;word-spacing:0.1px;}
#t2m_524{left:587px;bottom:473px;letter-spacing:0.02px;}
#t2n_524{left:587px;bottom:457px;letter-spacing:0.02px;word-spacing:0.01px;}
#t2o_524{left:587px;bottom:440px;letter-spacing:-0.02px;word-spacing:0.05px;}
#t2p_524{left:682px;bottom:440px;letter-spacing:-0.02px;word-spacing:0.05px;}
#t2q_524{left:587px;bottom:423px;letter-spacing:0.01px;word-spacing:-0.15px;}
#t2r_524{left:587px;bottom:406px;letter-spacing:0.02px;word-spacing:0.02px;}
#t2s_524{left:587px;bottom:389px;letter-spacing:0.02px;word-spacing:0.01px;}
#t2t_524{left:587px;bottom:373px;letter-spacing:0.04px;}
#t2u_524{left:587px;bottom:356px;letter-spacing:0.03px;word-spacing:0.01px;}
#t2v_524{left:587px;bottom:339px;letter-spacing:-0.06px;word-spacing:0.09px;}
#t2w_524{left:587px;bottom:322px;letter-spacing:0.01px;word-spacing:0.03px;}
#t2x_524{left:587px;bottom:305px;letter-spacing:0.04px;word-spacing:-0.01px;}
#t2y_524{left:587px;bottom:289px;letter-spacing:0.01px;word-spacing:0.02px;}
#t2z_524{left:368px;bottom:852px;letter-spacing:-0.07px;word-spacing:0.02px;}
#t30_524{left:351px;bottom:829px;letter-spacing:-0.2px;word-spacing:0.24px;}

.s1_524{font-size:15px;font-family:ArialRoundedMTBold_7g;color:#000;}
.s2_524{font-size:14px;font-family:Arial-BoldItalic_10g;color:#939393;}
.s3_524{font-size:14px;font-family:Arial-BoldItalic_10g;color:#000;}
.s4_524{font-size:37px;font-family:Couchlover_7w;color:#000;}
.s5_524{font-size:14px;font-family:Myriad-Bold_279;color:#000;}
.s6_524{font-size:14px;font-family:Myriad-Roman_75;color:#000;}
.s7_524{font-size:20px;font-family:Couchlover_7w;color:#000;}
.s8_524{font-size:32px;font-family:Couchlover_7w;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts524" type="text/css" >

@font-face {
	font-family: Arial-BoldItalic_10g;
	src: url("fonts/Arial-BoldItalic_10g.woff") format("woff");
}

@font-face {
	font-family: ArialRoundedMTBold_7g;
	src: url("fonts/ArialRoundedMTBold_7g.woff") format("woff");
}

@font-face {
	font-family: Couchlover_7w;
	src: url("fonts/Couchlover_7w.woff") format("woff");
}

@font-face {
	font-family: Myriad-Bold_279;
	src: url("fonts/Myriad-Bold_279.woff") format("woff");
}

@font-face {
	font-family: Myriad-Roman_75;
	src: url("fonts/Myriad-Roman_75.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg524Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg524" style="-webkit-user-select: none;"><object width="907" height="1045" data="524/524.svg" type="image/svg+xml" id="pdf524" style="width:907px; height:1045px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_524" class="t s1_524">486 </span><span id="t2_524" class="t s2_524">Chapter 11 </span>
<span id="t3_524" class="t s3_524">q&amp;a about </span><span id="t4_524" class="t s2_524">proxy </span>
<span id="t5_524" class="t s4_524">Q: </span>
<span id="t6_524" class="t s5_524">So what exactly is the </span>
<span id="t7_524" class="t s5_524">“dynamic” aspect of dynamic </span>
<span id="t8_524" class="t s5_524">proxies? </span><span id="t9_524" class="t s5_524">Is it that I’m instantiating </span>
<span id="ta_524" class="t s5_524">the proxy and setting it to a handler </span>
<span id="tb_524" class="t s5_524">at runtime? </span>
<span id="tc_524" class="t s4_524">A: </span><span id="td_524" class="t s6_524">No, the proxy is dynamic </span>
<span id="te_524" class="t s6_524">because its class is created at runtime. </span>
<span id="tf_524" class="t s6_524">Think about it: before your code runs </span>
<span id="tg_524" class="t s6_524">there is no proxy class; it is created on </span>
<span id="th_524" class="t s6_524">demand from the set of interfaces you </span>
<span id="ti_524" class="t s6_524">pass it. </span>
<span id="tj_524" class="t s4_524">Q: </span>
<span id="tk_524" class="t s5_524">My InvocationHandler seems </span>
<span id="tl_524" class="t s5_524">like a very strange proxy, it doesn’t </span>
<span id="tm_524" class="t s5_524">implement any of the methods of </span>
<span id="tn_524" class="t s5_524">the class it’s proxying. </span>
<span id="to_524" class="t s4_524">A: </span><span id="tp_524" class="t s6_524">That is because the </span>
<span id="tq_524" class="t s6_524">InvocationHandler isn’t a proxy − it is </span>
<span id="tr_524" class="t s6_524">a class that the proxy dispatches to </span>
<span id="ts_524" class="t s6_524">for handling method calls. </span><span id="tt_524" class="t s6_524">The proxy </span>
<span id="tu_524" class="t s6_524">itself is created dynamically at runtime </span>
<span id="tv_524" class="t s6_524">by the static Proxy.newProxyInstance() </span>
<span id="tw_524" class="t s6_524">method. </span>
<span id="tx_524" class="t s4_524">Q: </span>
<span id="ty_524" class="t s5_524">Is there any way to tell if a </span>
<span id="tz_524" class="t s5_524">class is a Proxy class? </span>
<span id="t10_524" class="t s4_524">A: </span><span id="t11_524" class="t s6_524">Yes. </span><span id="t12_524" class="t s6_524">The Proxy class has a static </span>
<span id="t13_524" class="t s6_524">method called isProxyClass(). Calling </span>
<span id="t14_524" class="t s6_524">this method with a class will return </span>
<span id="t15_524" class="t s6_524">true if the class is a dynamic proxy </span>
<span id="t16_524" class="t s6_524">class. </span><span id="t17_524" class="t s6_524">Other than that, the proxy class </span>
<span id="t18_524" class="t s6_524">will act like any other class that imple- </span>
<span id="t19_524" class="t s6_524">ments a particular set of interfaces. </span>
<span id="t1a_524" class="t s4_524">Q: </span>
<span id="t1b_524" class="t s5_524">Are there any restrictions on </span>
<span id="t1c_524" class="t s5_524">the types of interfaces I can pass into </span>
<span id="t1d_524" class="t s5_524">newProxyInstance()? </span>
<span id="t1e_524" class="t s4_524">A: </span><span id="t1f_524" class="t s6_524">Yes, there are a few. </span><span id="t1g_524" class="t s6_524">First, it is </span>
<span id="t1h_524" class="t s6_524">worth pointing out that we always </span>
<span id="t1i_524" class="t s6_524">pass newProxyInstance() an array of </span>
<span id="t1j_524" class="t s6_524">interfaces – only interfaces are allowed, </span>
<span id="t1k_524" class="t s6_524">no classes. </span><span id="t1l_524" class="t s6_524">The major restrictions are </span>
<span id="t1m_524" class="t s6_524">that all non-public interfaces need to </span>
<span id="t1n_524" class="t s6_524">be from the same package. </span><span id="t1o_524" class="t s6_524">You also </span>
<span id="t1p_524" class="t s6_524">can’t have interfaces with clashing </span>
<span id="t1q_524" class="t s6_524">method names (that is, two interfaces </span>
<span id="t1r_524" class="t s6_524">with a method with the same </span>
<span id="t1s_524" class="t s6_524">signature). </span><span id="t1t_524" class="t s6_524">There are a few other minor </span>
<span id="t1u_524" class="t s6_524">nuances as well, so at some point you </span>
<span id="t1v_524" class="t s6_524">should take a look at the ﬁne print on </span>
<span id="t1w_524" class="t s6_524">dynamic proxies in the javadoc. </span>
<span id="t1x_524" class="t s4_524">Q: </span>
<span id="t1y_524" class="t s5_524">Why are you using skeletons? </span>
<span id="t1z_524" class="t s5_524">I thought we got rid of those back in </span>
<span id="t20_524" class="t s5_524">Java 1.2. </span>
<span id="t21_524" class="t s4_524">A: </span><span id="t22_524" class="t s6_524">You’re right; we don’t need </span>
<span id="t23_524" class="t s6_524">to actually generate skeletons. </span><span id="t24_524" class="t s6_524">As </span>
<span id="t25_524" class="t s6_524">of Java 1.2, the RMI runtime can </span>
<span id="t26_524" class="t s6_524">dispatch the client calls directly to </span>
<span id="t27_524" class="t s6_524">the remote service using reﬂection. </span>
<span id="t28_524" class="t s6_524">But we like to show the skeleton, </span>
<span id="t29_524" class="t s6_524">because conceptually it helps you to </span>
<span id="t2a_524" class="t s6_524">understand that there is something </span>
<span id="t2b_524" class="t s6_524">under the covers that’s making that </span>
<span id="t2c_524" class="t s6_524">communication between the client </span>
<span id="t2d_524" class="t s6_524">stub and the remote service happen. </span>
<span id="t2e_524" class="t s4_524">Q: </span>
<span id="t2f_524" class="t s5_524">I heard that in Java 5, I </span>
<span id="t2g_524" class="t s5_524">don’t even need to generate stubs </span>
<span id="t2h_524" class="t s5_524">anymore either. </span><span id="t2i_524" class="t s5_524">Is that true? </span>
<span id="t2j_524" class="t s4_524">A: </span><span id="t2k_524" class="t s6_524">It sure is. </span><span id="t2l_524" class="t s6_524">In Java 5, RMI and </span>
<span id="t2m_524" class="t s6_524">Dynamic Proxy got together and now </span>
<span id="t2n_524" class="t s6_524">stubs are generated dynamically using </span>
<span id="t2o_524" class="t s6_524">Dynamic Proxy. </span><span id="t2p_524" class="t s6_524">The remote object’s </span>
<span id="t2q_524" class="t s6_524">stub is a java.lang.reﬂect.Proxy instance </span>
<span id="t2r_524" class="t s6_524">(with an invocation handler) that is </span>
<span id="t2s_524" class="t s6_524">automatically generated to handle all </span>
<span id="t2t_524" class="t s6_524">the details of getting the local method </span>
<span id="t2u_524" class="t s6_524">calls by the client to the remote object. </span>
<span id="t2v_524" class="t s6_524">So, now you don’t have to use rmic at </span>
<span id="t2w_524" class="t s6_524">all; everything you need to get a client </span>
<span id="t2x_524" class="t s6_524">talking to a remote object is handled </span>
<span id="t2y_524" class="t s6_524">for you behind the scenes. </span>
<span id="t2z_524" class="t s7_524">there are no </span>
<span id="t30_524" class="t s8_524">Dumb Questions </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
