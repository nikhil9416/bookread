<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p29" style="overflow: hidden; position: relative; background-color: white; width: 662px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_29{left:57px;bottom:942px;}
#t2_29{left:454px;bottom:942px;letter-spacing:0.13px;}
#t3_29{left:508px;bottom:942px;}
#t4_29{left:515px;bottom:942px;letter-spacing:0.1px;word-spacing:5.59px;}
#t5_29{left:57px;bottom:893px;letter-spacing:0.07px;word-spacing:0.96px;}
#t6_29{left:494px;bottom:893px;}
#t7_29{left:506px;bottom:893px;letter-spacing:0.14px;}
#t8_29{left:537px;bottom:893px;}
#t9_29{left:545px;bottom:893px;letter-spacing:-0.03px;word-spacing:1.24px;}
#ta_29{left:57px;bottom:875px;letter-spacing:0.03px;word-spacing:0.65px;}
#tb_29{left:57px;bottom:832px;}
#tc_29{left:65px;bottom:832px;}
#td_29{left:69px;bottom:832px;}
#te_29{left:78px;bottom:832px;}
#tf_29{left:82px;bottom:832px;}
#tg_29{left:107px;bottom:832px;letter-spacing:-0.21px;word-spacing:0.74px;}
#th_29{left:57px;bottom:805px;letter-spacing:0.09px;word-spacing:2.1px;}
#ti_29{left:57px;bottom:787px;letter-spacing:0.09px;word-spacing:2.62px;}
#tj_29{left:433px;bottom:787px;letter-spacing:0.1px;word-spacing:2.19px;}
#tk_29{left:57px;bottom:769px;letter-spacing:0.1px;word-spacing:2.08px;}
#tl_29{left:57px;bottom:750px;letter-spacing:0.1px;word-spacing:2.03px;}
#tm_29{left:57px;bottom:732px;letter-spacing:0.07px;word-spacing:0.93px;}
#tn_29{left:57px;bottom:714px;letter-spacing:0.1px;word-spacing:1.24px;}
#to_29{left:372px;bottom:714px;letter-spacing:0.05px;word-spacing:1.19px;}
#tp_29{left:470px;bottom:714px;letter-spacing:0.09px;word-spacing:1.23px;}
#tq_29{left:57px;bottom:695px;letter-spacing:0.1px;word-spacing:0.46px;}
#tr_29{left:80px;bottom:677px;letter-spacing:0.09px;}
#ts_29{left:126px;bottom:677px;letter-spacing:0.07px;}
#tt_29{left:167px;bottom:677px;letter-spacing:0.08px;word-spacing:1.91px;}
#tu_29{left:57px;bottom:659px;letter-spacing:0.09px;word-spacing:2.37px;}
#tv_29{left:57px;bottom:641px;letter-spacing:0.1px;word-spacing:2.29px;}
#tw_29{left:57px;bottom:622px;letter-spacing:0.08px;word-spacing:0.87px;}
#tx_29{left:57px;bottom:604px;letter-spacing:0.07px;word-spacing:2.56px;}
#ty_29{left:57px;bottom:586px;letter-spacing:0.08px;word-spacing:1.37px;}
#tz_29{left:57px;bottom:568px;letter-spacing:0.12px;word-spacing:0.26px;}
#t10_29{left:184px;bottom:568px;}
#t11_29{left:200px;bottom:568px;letter-spacing:0.06px;word-spacing:0.35px;}
#t12_29{left:445px;bottom:568px;}
#t13_29{left:458px;bottom:568px;letter-spacing:-0.04px;word-spacing:0.6px;}
#t14_29{left:57px;bottom:549px;}
#t15_29{left:73px;bottom:549px;letter-spacing:0.04px;word-spacing:2.18px;}
#t16_29{left:196px;bottom:549px;}
#t17_29{left:213px;bottom:549px;letter-spacing:-0.08px;word-spacing:2.66px;}
#t18_29{left:341px;bottom:549px;letter-spacing:0.13px;}
#t19_29{left:402px;bottom:549px;letter-spacing:0.2px;}
#t1a_29{left:423px;bottom:549px;letter-spacing:0.09px;word-spacing:2.22px;}
#t1b_29{left:57px;bottom:531px;letter-spacing:0.07px;word-spacing:1.35px;}
#t1c_29{left:536px;bottom:531px;letter-spacing:0.2px;}
#t1d_29{left:551px;bottom:531px;}
#t1e_29{left:555px;bottom:531px;}
#t1f_29{left:563px;bottom:531px;letter-spacing:0.07px;word-spacing:1.21px;}
#t1g_29{left:57px;bottom:513px;letter-spacing:0.08px;word-spacing:0.77px;}
#t1h_29{left:162px;bottom:513px;letter-spacing:0.2px;}
#t1i_29{left:177px;bottom:513px;}
#t1j_29{left:181px;bottom:513px;}
#t1k_29{left:189px;bottom:513px;}
#t1l_29{left:193px;bottom:513px;}
#t1m_29{left:201px;bottom:513px;letter-spacing:0.09px;word-spacing:0.43px;}
#t1n_29{left:359px;bottom:513px;letter-spacing:0.2px;}
#t1o_29{left:374px;bottom:513px;}
#t1p_29{left:378px;bottom:513px;}
#t1q_29{left:385px;bottom:513px;}
#t1r_29{left:389px;bottom:513px;}
#t1s_29{left:397px;bottom:513px;letter-spacing:0.1px;word-spacing:0.76px;}
#t1t_29{left:57px;bottom:495px;letter-spacing:0.09px;word-spacing:1.5px;}
#t1u_29{left:57px;bottom:476px;letter-spacing:0.05px;word-spacing:1.24px;}
#t1v_29{left:57px;bottom:458px;letter-spacing:0.05px;word-spacing:0.73px;}
#t1w_29{left:57px;bottom:415px;}
#t1x_29{left:65px;bottom:415px;}
#t1y_29{left:69px;bottom:415px;}
#t1z_29{left:78px;bottom:415px;}
#t20_29{left:82px;bottom:415px;}
#t21_29{left:107px;bottom:415px;letter-spacing:-0.17px;word-spacing:0.79px;}
#t22_29{left:57px;bottom:388px;letter-spacing:0.05px;word-spacing:-0.25px;}
#t23_29{left:199px;bottom:388px;letter-spacing:0.11px;}
#t24_29{left:275px;bottom:388px;letter-spacing:0.06px;word-spacing:0.08px;}
#t25_29{left:573px;bottom:388px;letter-spacing:0.08px;}
#t26_29{left:57px;bottom:370px;letter-spacing:0.09px;}
#t27_29{left:98px;bottom:370px;letter-spacing:0.04px;word-spacing:0.95px;}
#t28_29{left:57px;bottom:352px;letter-spacing:0.06px;word-spacing:1.92px;}
#t29_29{left:57px;bottom:333px;letter-spacing:0.08px;word-spacing:0.66px;}
#t2a_29{left:57px;bottom:315px;letter-spacing:0.06px;word-spacing:1.88px;}
#t2b_29{left:57px;bottom:297px;letter-spacing:0.09px;word-spacing:0.19px;}
#t2c_29{left:57px;bottom:278px;letter-spacing:0.07px;word-spacing:0.72px;}
#t2d_29{left:80px;bottom:260px;letter-spacing:0.08px;word-spacing:2.4px;}
#t2e_29{left:57px;bottom:242px;letter-spacing:0.08px;word-spacing:2.92px;}
#t2f_29{left:57px;bottom:224px;letter-spacing:0.1px;word-spacing:1.2px;}
#t2g_29{left:163px;bottom:224px;letter-spacing:0.09px;word-spacing:1.46px;}
#t2h_29{left:57px;bottom:205px;letter-spacing:0.11px;word-spacing:2.1px;}
#t2i_29{left:57px;bottom:187px;letter-spacing:0.04px;word-spacing:3.27px;}
#t2j_29{left:252px;bottom:187px;letter-spacing:0.06px;word-spacing:3.36px;}
#t2k_29{left:57px;bottom:169px;letter-spacing:0.07px;word-spacing:2.33px;}
#t2l_29{left:57px;bottom:151px;letter-spacing:0.09px;word-spacing:1.9px;}
#t2m_29{left:57px;bottom:132px;letter-spacing:0.08px;word-spacing:1.72px;}
#t2n_29{left:57px;bottom:114px;letter-spacing:0.1px;word-spacing:0.86px;}
#t2o_29{left:57px;bottom:96px;letter-spacing:0.12px;word-spacing:-0.15px;}
#t2p_29{left:245px;bottom:96px;letter-spacing:0.2px;}
#t2q_29{left:264px;bottom:96px;letter-spacing:0.07px;word-spacing:-0.3px;}
#t2r_29{left:57px;bottom:77px;letter-spacing:0.06px;}

.s0_29{font-size:15px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s1_29{font-size:15px;font-family:Palatino-Italic_amd;color:#000;}
.s2_29{font-size:15px;font-family:TeXPalladioL-ItalicOsF_amn;color:#000;}
.s3_29{font-size:15px;font-family:Palatino-Roman_ame;color:#000;}
.s4_29{font-size:17px;font-family:TeXPalladioL-BoldOsF_aml;color:#000;}
.s5_29{font-size:17px;font-family:Palatino-Bold_amf;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts29" type="text/css" >

@font-face {
	font-family: Palatino-Bold_amf;
	src: url("fonts/Palatino-Bold_amf.woff") format("woff");
}

@font-face {
	font-family: Palatino-Italic_amd;
	src: url("fonts/Palatino-Italic_amd.woff") format("woff");
}

@font-face {
	font-family: Palatino-Roman_ame;
	src: url("fonts/Palatino-Roman_ame.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-BoldOsF_aml;
	src: url("fonts/TeXPalladioL-BoldOsF_aml.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-ItalicOsF_amn;
	src: url("fonts/TeXPalladioL-ItalicOsF_amn.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-SC_amc;
	src: url("fonts/TeXPalladioL-SC_amc.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg29Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg29" style="-webkit-user-select: none;"><object width="662" height="1017" data="29/29.svg" type="image/svg+xml" id="pdf29" style="width:662px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_29" class="t s0_29">8 </span><span id="t2_29" class="t s1_29">Chapter </span><span id="t3_29" class="t s2_29">1</span><span id="t4_29" class="t s1_29">. Introduction </span>
<span id="t5_29" class="t s3_29">affects those guarantees, but if you follow the rules in Chapters </span><span id="t6_29" class="t s0_29">2 </span><span id="t7_29" class="t s3_29">and </span><span id="t8_29" class="t s0_29">3</span><span id="t9_29" class="t s3_29">, you can </span>
<span id="ta_29" class="t s3_29">safely avoid these low-level details.) </span>
<span id="tb_29" class="t s4_29">1</span><span id="tc_29" class="t s5_29">.</span><span id="td_29" class="t s4_29">3</span><span id="te_29" class="t s5_29">.</span><span id="tf_29" class="t s4_29">2 </span><span id="tg_29" class="t s5_29">Liveness hazards </span>
<span id="th_29" class="t s3_29">It is critically important to pay attention to thread safety issues when develop- </span>
<span id="ti_29" class="t s3_29">ing concurrent code: safety cannot be compromised. </span><span id="tj_29" class="t s3_29">The importance of safety </span>
<span id="tk_29" class="t s3_29">is not unique to multithreaded programs—single-threaded programs also must </span>
<span id="tl_29" class="t s3_29">take care to preserve safety and correctness—but the use of threads introduces </span>
<span id="tm_29" class="t s3_29">additional safety hazards not present in single-threaded programs. Similarly, the </span>
<span id="tn_29" class="t s3_29">use of threads introduces additional forms of </span><span id="to_29" class="t s1_29">liveness failure </span><span id="tp_29" class="t s3_29">that do not occur in </span>
<span id="tq_29" class="t s3_29">single-threaded programs. </span>
<span id="tr_29" class="t s3_29">While </span><span id="ts_29" class="t s1_29">safety </span><span id="tt_29" class="t s3_29">means “nothing bad ever happens”, liveness concerns the com- </span>
<span id="tu_29" class="t s3_29">plementary goal that “something good eventually happens”. A liveness failure </span>
<span id="tv_29" class="t s3_29">occurs when an activity gets into a state such that it is permanently unable to </span>
<span id="tw_29" class="t s3_29">make forward progress. One form of liveness failure that can occur in sequential </span>
<span id="tx_29" class="t s3_29" data-mappings='[[29,"fi"]]'>programs is an inadvertent inﬁnite loop, where the code that follows the loop </span>
<span id="ty_29" class="t s3_29">never gets executed. The use of threads introduces additional liveness risks. For </span>
<span id="tz_29" class="t s3_29">example, if thread </span><span id="t10_29" class="t s1_29">A </span><span id="t11_29" class="t s3_29">is waiting for a resource that thread </span><span id="t12_29" class="t s1_29">B </span><span id="t13_29" class="t s3_29">holds exclusively, and </span>
<span id="t14_29" class="t s1_29">B </span><span id="t15_29" class="t s3_29">never releases it, </span><span id="t16_29" class="t s1_29">A </span><span id="t17_29" class="t s3_29">will wait forever. </span><span id="t18_29" class="t s3_29">Chapter </span><span id="t19_29" class="t s0_29">10 </span><span id="t1a_29" class="t s3_29">describes various forms of </span>
<span id="t1b_29" class="t s3_29">liveness failures and how to avoid them, including deadlock (Section </span><span id="t1c_29" class="t s0_29">10</span><span id="t1d_29" class="t s3_29">.</span><span id="t1e_29" class="t s0_29">1</span><span id="t1f_29" class="t s3_29">), star- </span>
<span id="t1g_29" class="t s3_29">vation (Section </span><span id="t1h_29" class="t s0_29">10</span><span id="t1i_29" class="t s3_29">.</span><span id="t1j_29" class="t s0_29">3</span><span id="t1k_29" class="t s3_29">.</span><span id="t1l_29" class="t s0_29">1</span><span id="t1m_29" class="t s3_29">), and livelock (Section </span><span id="t1n_29" class="t s0_29">10</span><span id="t1o_29" class="t s3_29">.</span><span id="t1p_29" class="t s0_29">3</span><span id="t1q_29" class="t s3_29">.</span><span id="t1r_29" class="t s0_29">3</span><span id="t1s_29" class="t s3_29">). Like most concurrency bugs, </span>
<span id="t1t_29" class="t s3_29">bugs that cause liveness failures can be elusive because they depend on the rel- </span>
<span id="t1u_29" class="t s3_29">ative timing of events in different threads, and therefore do not always manifest </span>
<span id="t1v_29" class="t s3_29">themselves in development or testing. </span>
<span id="t1w_29" class="t s4_29">1</span><span id="t1x_29" class="t s5_29">.</span><span id="t1y_29" class="t s4_29">3</span><span id="t1z_29" class="t s5_29">.</span><span id="t20_29" class="t s4_29">3 </span><span id="t21_29" class="t s5_29">Performance hazards </span>
<span id="t22_29" class="t s3_29">Related to liveness is </span><span id="t23_29" class="t s1_29">performance</span><span id="t24_29" class="t s3_29">. While liveness means that something good </span><span id="t25_29" class="t s1_29">even- </span>
<span id="t26_29" class="t s1_29">tually </span><span id="t27_29" class="t s3_29">happens, eventually may not be good enough—we often want good things </span>
<span id="t28_29" class="t s3_29">to happen quickly. Performance issues subsume a broad range of problems, in- </span>
<span id="t29_29" class="t s3_29">cluding poor service time, responsiveness, throughput, resource consumption, or </span>
<span id="t2a_29" class="t s3_29">scalability. Just as with safety and liveness, multithreaded programs are subject </span>
<span id="t2b_29" class="t s3_29">to all the performance hazards of single-threaded programs, and to others as well </span>
<span id="t2c_29" class="t s3_29">that are introduced by the use of threads. </span>
<span id="t2d_29" class="t s3_29">In well designed concurrent applications the use of threads is a net perfor- </span>
<span id="t2e_29" class="t s3_29">mance gain, but threads nevertheless carry some degree of runtime overhead. </span>
<span id="t2f_29" class="t s1_29">Context switches</span><span id="t2g_29" class="t s3_29">—when the scheduler suspends the active thread temporarily so </span>
<span id="t2h_29" class="t s3_29">another thread can run—are more frequent in applications with many threads, </span>
<span id="t2i_29" class="t s3_29" data-mappings='[[14,"fi"]]'>and have signiﬁcant costs: </span><span id="t2j_29" class="t s3_29">saving and restoring execution context, loss of lo- </span>
<span id="t2k_29" class="t s3_29">cality, and CPU time spent scheduling threads instead of running them. When </span>
<span id="t2l_29" class="t s3_29">threads share data, they must use synchronization mechanisms that can inhibit </span>
<span id="t2m_29" class="t s3_29">compiler optimizations, ﬂush or invalidate memory caches, and create synchro- </span>
<span id="t2n_29" class="t s3_29" data-mappings='[[13,"fi"]]'>nization trafﬁc on the shared memory bus. All these factors introduce additional </span>
<span id="t2o_29" class="t s3_29">performance costs; Chapter </span><span id="t2p_29" class="t s0_29">11 </span><span id="t2q_29" class="t s3_29">covers techniques for analyzing and reducing these </span>
<span id="t2r_29" class="t s3_29">costs. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
