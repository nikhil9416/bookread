<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p75" style="overflow: hidden; position: relative; background-color: white; width: 662px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_75{left:57px;bottom:942px;letter-spacing:0.2px;}
#t2_75{left:433px;bottom:942px;letter-spacing:0.13px;}
#t3_75{left:486px;bottom:942px;}
#t4_75{left:494px;bottom:942px;letter-spacing:0.09px;word-spacing:2.97px;}
#t5_75{left:57px;bottom:893px;}
#t6_75{left:65px;bottom:893px;}
#t7_75{left:69px;bottom:893px;}
#t8_75{left:78px;bottom:893px;}
#t9_75{left:82px;bottom:893px;}
#ta_75{left:107px;bottom:893px;letter-spacing:-0.17px;word-spacing:0.76px;}
#tb_75{left:57px;bottom:865px;letter-spacing:0.09px;word-spacing:2.99px;}
#tc_75{left:57px;bottom:847px;letter-spacing:0.09px;word-spacing:2.52px;}
#td_75{left:57px;bottom:829px;letter-spacing:0.08px;word-spacing:1.62px;}
#te_75{left:57px;bottom:811px;letter-spacing:0.04px;word-spacing:0.96px;}
#tf_75{left:57px;bottom:792px;letter-spacing:0.11px;word-spacing:0.59px;}
#tg_75{left:193px;bottom:792px;letter-spacing:0.11px;}
#th_75{left:220px;bottom:792px;letter-spacing:0.08px;word-spacing:0.62px;}
#ti_75{left:72px;bottom:745px;letter-spacing:-0.24px;word-spacing:-0.09px;}
#tj_75{left:93px;bottom:723px;}
#tk_75{left:111px;bottom:724px;letter-spacing:-0.26px;word-spacing:0.98px;}
#tl_75{left:245px;bottom:724px;letter-spacing:-0.27px;word-spacing:-0.04px;}
#tm_75{left:93px;bottom:702px;}
#tn_75{left:111px;bottom:703px;letter-spacing:-0.25px;word-spacing:0.84px;}
#to_75{left:320px;bottom:703px;letter-spacing:-0.24px;}
#tp_75{left:93px;bottom:681px;}
#tq_75{left:111px;bottom:682px;letter-spacing:-0.26px;word-spacing:0.04px;}
#tr_75{left:223px;bottom:682px;letter-spacing:-0.24px;word-spacing:-0.95px;}
#ts_75{left:111px;bottom:662px;letter-spacing:-0.26px;word-spacing:0.03px;}
#tt_75{left:57px;bottom:593px;}
#tu_75{left:65px;bottom:593px;}
#tv_75{left:69px;bottom:593px;}
#tw_75{left:78px;bottom:593px;}
#tx_75{left:82px;bottom:593px;}
#ty_75{left:107px;bottom:593px;letter-spacing:-0.15px;word-spacing:0.7px;}
#tz_75{left:57px;bottom:565px;letter-spacing:0.04px;word-spacing:1.96px;}
#t10_75{left:57px;bottom:547px;letter-spacing:0.05px;word-spacing:2.45px;}
#t11_75{left:57px;bottom:529px;letter-spacing:0.08px;word-spacing:-0.07px;}
#t12_75{left:57px;bottom:510px;letter-spacing:0.09px;word-spacing:0.75px;}
#t13_75{left:57px;bottom:492px;letter-spacing:0.08px;word-spacing:0.72px;}
#t14_75{left:72px;bottom:444px;letter-spacing:-0.25px;word-spacing:2.07px;}
#t15_75{left:72px;bottom:424px;letter-spacing:-0.35px;word-spacing:0.36px;}
#t16_75{left:72px;bottom:388px;letter-spacing:-0.3px;}
#t17_75{left:212px;bottom:388px;letter-spacing:-0.26px;word-spacing:0.03px;}
#t18_75{left:111px;bottom:367px;letter-spacing:-0.25px;word-spacing:-0.08px;}
#t19_75{left:72px;bottom:334px;letter-spacing:-0.38px;word-spacing:1.53px;}
#t1a_75{left:216px;bottom:334px;letter-spacing:-0.3px;word-spacing:2.61px;}
#t1b_75{left:111px;bottom:314px;letter-spacing:-0.25px;word-spacing:1.83px;}
#t1c_75{left:111px;bottom:293px;letter-spacing:-0.26px;word-spacing:0.2px;}
#t1d_75{left:111px;bottom:272px;letter-spacing:-0.23px;word-spacing:-0.23px;}
#t1e_75{left:72px;bottom:239px;letter-spacing:-0.27px;word-spacing:1.33px;}
#t1f_75{left:233px;bottom:239px;letter-spacing:-0.26px;word-spacing:1.21px;}
#t1g_75{left:111px;bottom:219px;letter-spacing:-0.28px;word-spacing:1.49px;}
#t1h_75{left:111px;bottom:198px;letter-spacing:-0.25px;word-spacing:-0.05px;}
#t1i_75{left:72px;bottom:165px;letter-spacing:-0.3px;}
#t1j_75{left:151px;bottom:165px;letter-spacing:-0.27px;word-spacing:2.45px;}
#t1k_75{left:111px;bottom:144px;letter-spacing:-0.26px;word-spacing:2.5px;}
#t1l_75{left:111px;bottom:124px;letter-spacing:-0.26px;word-spacing:1.4px;}
#t1m_75{left:111px;bottom:103px;letter-spacing:-0.26px;word-spacing:0.01px;}

.s0_75{font-size:15px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s1_75{font-size:15px;font-family:Palatino-Italic_amd;color:#000;}
.s2_75{font-size:15px;font-family:TeXPalladioL-ItalicOsF_amn;color:#000;}
.s3_75{font-size:17px;font-family:TeXPalladioL-BoldOsF_aml;color:#000;}
.s4_75{font-size:17px;font-family:Palatino-Bold_amf;color:#000;}
.s5_75{font-size:15px;font-family:Palatino-Roman_ame;color:#000;}
.s6_75{font-size:15px;font-family:LucidaSans_amq;color:#000;}
.s7_75{font-size:17px;font-family:Palatino-Roman_ame;color:#000;}
.s8_75{font-size:15px;font-family:LucidaSans-Italic_ams;color:#000;}
.s9_75{font-size:15px;font-family:LucidaSans-Bold_amu;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts75" type="text/css" >

@font-face {
	font-family: LucidaSans-Bold_amu;
	src: url("fonts/LucidaSans-Bold_amu.woff") format("woff");
}

@font-face {
	font-family: LucidaSans-Italic_ams;
	src: url("fonts/LucidaSans-Italic_ams.woff") format("woff");
}

@font-face {
	font-family: LucidaSans_amq;
	src: url("fonts/LucidaSans_amq.woff") format("woff");
}

@font-face {
	font-family: Palatino-Bold_amf;
	src: url("fonts/Palatino-Bold_amf.woff") format("woff");
}

@font-face {
	font-family: Palatino-Italic_amd;
	src: url("fonts/Palatino-Italic_amd.woff") format("woff");
}

@font-face {
	font-family: Palatino-Roman_ame;
	src: url("fonts/Palatino-Roman_ame.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-BoldOsF_aml;
	src: url("fonts/TeXPalladioL-BoldOsF_aml.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-ItalicOsF_amn;
	src: url("fonts/TeXPalladioL-ItalicOsF_amn.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-SC_amc;
	src: url("fonts/TeXPalladioL-SC_amc.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg75Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg75" style="-webkit-user-select: none;"><object width="662" height="1017" data="75/75.svg" type="image/svg+xml" id="pdf75" style="width:662px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_75" class="t s0_75">54 </span><span id="t2_75" class="t s1_75">Chapter </span><span id="t3_75" class="t s2_75">3</span><span id="t4_75" class="t s1_75">. Sharing Objects </span>
<span id="t5_75" class="t s3_75">3</span><span id="t6_75" class="t s4_75">.</span><span id="t7_75" class="t s3_75">5</span><span id="t8_75" class="t s4_75">.</span><span id="t9_75" class="t s3_75">5 </span><span id="ta_75" class="t s4_75">Mutable objects </span>
<span id="tb_75" class="t s5_75" data-mappings='[[24,"fi"]]'>If an object may be modiﬁed after construction, safe publication ensures only </span>
<span id="tc_75" class="t s5_75">the visibility of the as-published state. Synchronization must be used not only </span>
<span id="td_75" class="t s5_75">to publish a mutable object, but also every time the object is accessed to ensure </span>
<span id="te_75" class="t s5_75" data-mappings='[[29,"fi"]]'>visibility of subsequent modiﬁcations. To share mutable objects safely, they must </span>
<span id="tf_75" class="t s5_75">be safely published </span><span id="tg_75" class="t s1_75">and </span><span id="th_75" class="t s5_75">be either thread-safe or guarded by a lock. </span>
<span id="ti_75" class="t s6_75">The publication requirements for an object depend on its mutability: </span>
<span id="tj_75" class="t s7_75">• </span><span id="tk_75" class="t s8_75">Immutable objects </span><span id="tl_75" class="t s6_75">can be published through any mechanism; </span>
<span id="tm_75" class="t s7_75">• </span><span id="tn_75" class="t s8_75" data-mappings='[[1,"ff"]]'>Eﬀectively immutable objects </span><span id="to_75" class="t s6_75">must be safely published; </span>
<span id="tp_75" class="t s7_75">• </span><span id="tq_75" class="t s8_75">Mutable objects </span><span id="tr_75" class="t s6_75">must be safely published, and must be either thread- </span>
<span id="ts_75" class="t s6_75">safe or guarded by a lock. </span>
<span id="tt_75" class="t s3_75">3</span><span id="tu_75" class="t s4_75">.</span><span id="tv_75" class="t s3_75">5</span><span id="tw_75" class="t s4_75">.</span><span id="tx_75" class="t s3_75">6 </span><span id="ty_75" class="t s4_75">Sharing objects safely </span>
<span id="tz_75" class="t s5_75">Whenever you acquire a reference to an object, you should know what you are </span>
<span id="t10_75" class="t s5_75">allowed to do with it. Do you need to acquire a lock before using it? Are you </span>
<span id="t11_75" class="t s5_75">allowed to modify its state, or only to read it? Many concurrency errors stem from </span>
<span id="t12_75" class="t s5_75">failing to understand these “rules of engagement” for a shared object. When you </span>
<span id="t13_75" class="t s5_75">publish an object, you should document how the object can be accessed. </span>
<span id="t14_75" class="t s6_75">The most useful policies for using and sharing objects in a concurrent </span>
<span id="t15_75" class="t s6_75">program are: </span>
<span id="t16_75" class="t s9_75" data-mappings='[[10,"fi"]]'>Thread-conﬁned. </span><span id="t17_75" class="t s6_75" data-mappings='[[12,"fi"]]'>A thread-conﬁned object is owned exclusively by and </span>
<span id="t18_75" class="t s6_75" data-mappings='[[3,"fi"],[38,"fi"]]'>conﬁned to one thread, and can be modiﬁed by its owning thread. </span>
<span id="t19_75" class="t s9_75">Shared read-only. </span><span id="t1a_75" class="t s6_75">A shared read-only object can be accessed concur- </span>
<span id="t1b_75" class="t s6_75">rently by multiple threads without additional synchronization, but </span>
<span id="t1c_75" class="t s6_75" data-mappings='[[14,"fi"]]'>cannot be modiﬁed by any thread. Shared read-only objects include </span>
<span id="t1d_75" class="t s6_75" data-mappings='[[15,"ff"]]'>immutable and eﬀectively immutable objects. </span>
<span id="t1e_75" class="t s9_75">Shared thread-safe. </span><span id="t1f_75" class="t s6_75">A thread-safe object performs synchronization in- </span>
<span id="t1g_75" class="t s6_75">ternally, so multiple threads can freely access it through its public </span>
<span id="t1h_75" class="t s6_75">interface without further synchronization. </span>
<span id="t1i_75" class="t s9_75">Guarded. </span><span id="t1j_75" class="t s6_75" data-mappings='[[50,"fi"]]'>A guarded object can be accessed only with a speciﬁc lock </span>
<span id="t1k_75" class="t s6_75">held. Guarded objects include those that are encapsulated within </span>
<span id="t1l_75" class="t s6_75">other thread-safe objects and published objects that are known to </span>
<span id="t1m_75" class="t s6_75" data-mappings='[[21,"fi"]]'>be guarded by a speciﬁc lock. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
