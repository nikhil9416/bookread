<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p304" style="overflow: hidden; position: relative; background-color: white; width: 662px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_304{left:57px;bottom:942px;letter-spacing:0.2px;}
#t2_304{left:72px;bottom:942px;}
#t3_304{left:76px;bottom:942px;}
#t4_304{left:84px;bottom:942px;letter-spacing:0.06px;word-spacing:5.46px;}
#t5_304{left:584px;bottom:942px;letter-spacing:0.2px;}
#t6_304{left:293px;bottom:598px;letter-spacing:0.14px;word-spacing:-0.09px;}
#t7_304{left:63px;bottom:789px;letter-spacing:0.15px;}
#t8_304{left:59px;bottom:770px;letter-spacing:0.13px;word-spacing:-0.02px;}
#t9_304{left:47px;bottom:752px;letter-spacing:0.05px;}
#ta_304{left:86px;bottom:734px;letter-spacing:0.08px;}
#tb_304{left:56px;bottom:716px;letter-spacing:0.11px;word-spacing:-0.22px;}
#tc_304{left:184px;bottom:616px;}
#td_304{left:239px;bottom:616px;}
#te_304{left:294px;bottom:616px;}
#tf_304{left:349px;bottom:616px;}
#tg_304{left:400px;bottom:616px;letter-spacing:0.21px;}
#th_304{left:455px;bottom:616px;letter-spacing:0.21px;}
#ti_304{left:510px;bottom:616px;letter-spacing:0.21px;}
#tj_304{left:164px;bottom:642px;}
#tk_304{left:164px;bottom:686px;}
#tl_304{left:164px;bottom:730px;}
#tm_304{left:164px;bottom:774px;}
#tn_304{left:164px;bottom:818px;}
#to_304{left:164px;bottom:862px;}
#tp_304{left:497px;bottom:831px;letter-spacing:0.15px;word-spacing:-0.02px;}
#tq_304{left:497px;bottom:699px;letter-spacing:0.16px;word-spacing:-0.04px;}
#tr_304{left:57px;bottom:574px;}
#ts_304{left:65px;bottom:574px;letter-spacing:0.14px;word-spacing:0.42px;}
#tt_304{left:124px;bottom:574px;}
#tu_304{left:128px;bottom:574px;}
#tv_304{left:135px;bottom:574px;letter-spacing:0.05px;word-spacing:0.85px;}
#tw_304{left:306px;bottom:574px;letter-spacing:0.05px;}
#tx_304{left:414px;bottom:574px;letter-spacing:0.05px;word-spacing:0.54px;}
#ty_304{left:557px;bottom:574px;}
#tz_304{left:565px;bottom:574px;}
#t10_304{left:569px;bottom:574px;}
#t11_304{left:581px;bottom:574px;letter-spacing:0.14px;}
#t12_304{left:57px;bottom:555px;letter-spacing:-0.21px;}
#t13_304{left:89px;bottom:555px;}
#t14_304{left:97px;bottom:555px;}
#t15_304{left:72px;bottom:485px;letter-spacing:-0.3px;word-spacing:-0.07px;}
#t16_304{left:563px;bottom:485px;}
#t17_304{left:578px;bottom:485px;letter-spacing:-0.17px;}
#t18_304{left:72px;bottom:464px;letter-spacing:-0.22px;word-spacing:-0.08px;}
#t19_304{left:153px;bottom:464px;}
#t1a_304{left:168px;bottom:464px;letter-spacing:-0.3px;word-spacing:0.04px;}
#t1b_304{left:57px;bottom:390px;letter-spacing:0.17px;}
#t1c_304{left:75px;bottom:390px;}
#t1d_304{left:80px;bottom:390px;}
#t1e_304{left:107px;bottom:390px;letter-spacing:0.19px;}
#t1f_304{left:57px;bottom:358px;letter-spacing:0.11px;}
#t1g_304{left:88px;bottom:359px;letter-spacing:0.05px;}
#t1h_304{left:198px;bottom:358px;letter-spacing:0.06px;word-spacing:2.25px;}
#t1i_304{left:437px;bottom:358px;letter-spacing:0.06px;}
#t1j_304{left:490px;bottom:358px;letter-spacing:0.09px;word-spacing:3.42px;}
#t1k_304{left:57px;bottom:340px;letter-spacing:0.09px;}
#t1l_304{left:106px;bottom:340px;letter-spacing:0.09px;word-spacing:0.8px;}
#t1m_304{left:258px;bottom:340px;letter-spacing:0.08px;}
#t1n_304{left:284px;bottom:340px;letter-spacing:0.1px;word-spacing:0.92px;}
#t1o_304{left:57px;bottom:322px;letter-spacing:0.09px;word-spacing:0.67px;}
#t1p_304{left:440px;bottom:322px;letter-spacing:0.06px;}
#t1q_304{left:488px;bottom:322px;letter-spacing:0.11px;word-spacing:0.94px;}
#t1r_304{left:57px;bottom:304px;letter-spacing:0.09px;word-spacing:2.01px;}
#t1s_304{left:57px;bottom:285px;letter-spacing:0.05px;word-spacing:1.99px;}
#t1t_304{left:318px;bottom:286px;letter-spacing:0.05px;}
#t1u_304{left:395px;bottom:285px;letter-spacing:0.09px;word-spacing:1.47px;}
#t1v_304{left:57px;bottom:267px;letter-spacing:0.08px;word-spacing:0.72px;}
#t1w_304{left:317px;bottom:268px;letter-spacing:0.05px;}
#t1x_304{left:420px;bottom:267px;letter-spacing:-0.01px;word-spacing:0.51px;}
#t1y_304{left:57px;bottom:249px;letter-spacing:0.06px;word-spacing:0.54px;}
#t1z_304{left:57px;bottom:231px;letter-spacing:0.07px;word-spacing:1.2px;}
#t20_304{left:57px;bottom:212px;letter-spacing:0.07px;word-spacing:0.85px;}
#t21_304{left:57px;bottom:194px;letter-spacing:0.09px;word-spacing:0.66px;}
#t22_304{left:525px;bottom:201px;}
#t23_304{left:80px;bottom:176px;letter-spacing:0.06px;word-spacing:-0.08px;}
#t24_304{left:57px;bottom:158px;letter-spacing:0.09px;word-spacing:2.72px;}
#t25_304{left:57px;bottom:139px;letter-spacing:0.09px;word-spacing:2.52px;}
#t26_304{left:57px;bottom:121px;letter-spacing:0.11px;word-spacing:1.87px;}
#t27_304{left:57px;bottom:103px;letter-spacing:0.11px;word-spacing:1.01px;}
#t28_304{left:194px;bottom:103px;letter-spacing:0.09px;}
#t29_304{left:264px;bottom:103px;letter-spacing:0.09px;word-spacing:1.13px;}
#t2a_304{left:57px;bottom:85px;letter-spacing:0.06px;word-spacing:1.74px;}
#t2b_304{left:57px;bottom:55px;}
#t2c_304{left:63px;bottom:55px;}
#t2d_304{left:74px;bottom:55px;letter-spacing:0.08px;word-spacing:0.48px;}
#t2e_304{left:136px;bottom:55px;letter-spacing:-0.2px;}
#t2f_304{left:184px;bottom:55px;letter-spacing:-0.02px;word-spacing:0.77px;}

.s0_304{font-size:15px;font-family:TeXPalladioL-ItalicOsF_amn;color:#000;}
.s1_304{font-size:15px;font-family:Palatino-Italic_amd;color:#000;}
.s2_304{font-size:15px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s3_304{font-size:13px;font-family:LucidaSans_amq;color:#000;}
.s4_304{font-size:13px;font-family:LucidaSansTypewriter_amm;color:#000;}
.s5_304{font-size:9px;font-family:LucidaSans_amq;color:#000;}
.s6_304{font-size:15px;font-family:Palatino-Roman_ame;color:#000;}
.s7_304{font-size:15px;font-family:LucidaSans_amq;color:#000;}
.s8_304{font-size:15px;font-family:LucidaSans-Italic_ams;color:#000;}
.s9_304{font-size:18px;font-family:TeXPalladioL-BoldOsF_aml;color:#000;}
.sa_304{font-size:18px;font-family:Palatino-Bold_amf;color:#000;}
.sb_304{font-size:12px;font-family:TeXPalladioL-SC_amc;color:#000;}
.sc_304{font-size:12px;font-family:Palatino-Roman_ame;color:#000;}
.sd_304{font-size:11px;font-family:LucidaSansTypewriter_amm;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts304" type="text/css" >

@font-face {
	font-family: LucidaSans-Italic_ams;
	src: url("fonts/LucidaSans-Italic_ams.woff") format("woff");
}

@font-face {
	font-family: LucidaSansTypewriter_amm;
	src: url("fonts/LucidaSansTypewriter_amm.woff") format("woff");
}

@font-face {
	font-family: LucidaSans_amq;
	src: url("fonts/LucidaSans_amq.woff") format("woff");
}

@font-face {
	font-family: Palatino-Bold_amf;
	src: url("fonts/Palatino-Bold_amf.woff") format("woff");
}

@font-face {
	font-family: Palatino-Italic_amd;
	src: url("fonts/Palatino-Italic_amd.woff") format("woff");
}

@font-face {
	font-family: Palatino-Roman_ame;
	src: url("fonts/Palatino-Roman_ame.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-BoldOsF_aml;
	src: url("fonts/TeXPalladioL-BoldOsF_aml.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-ItalicOsF_amn;
	src: url("fonts/TeXPalladioL-ItalicOsF_amn.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-SC_amc;
	src: url("fonts/TeXPalladioL-SC_amc.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg304Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg304" style="-webkit-user-select: none;"><object width="662" height="1017" data="304/304.svg" type="image/svg+xml" id="pdf304" style="width:662px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_304" class="t s0_304">13</span><span id="t2_304" class="t s1_304">.</span><span id="t3_304" class="t s0_304">3</span><span id="t4_304" class="t s1_304">. Fairness </span><span id="t5_304" class="t s2_304">283 </span>
<span id="t6_304" class="t s3_304">Number of threads </span>
<span id="t7_304" class="t s3_304">Throughput </span>
<span id="t8_304" class="t s3_304">advantage of </span>
<span id="t9_304" class="t s4_304">ReentrantLock </span>
<span id="ta_304" class="t s3_304">over </span>
<span id="tb_304" class="t s3_304">intrinsic locks </span>
<span id="tc_304" class="t s3_304">1 </span><span id="td_304" class="t s3_304">2 </span><span id="te_304" class="t s3_304">4 </span><span id="tf_304" class="t s3_304">8 </span><span id="tg_304" class="t s3_304">16 </span><span id="th_304" class="t s3_304">32 </span><span id="ti_304" class="t s3_304">64 </span>
<span id="tj_304" class="t s3_304">0 </span>
<span id="tk_304" class="t s3_304">1 </span>
<span id="tl_304" class="t s3_304">2 </span>
<span id="tm_304" class="t s3_304">3 </span>
<span id="tn_304" class="t s3_304">4 </span>
<span id="to_304" class="t s3_304">5 </span>
<span id="tp_304" class="t s5_304">Java 5.0 </span>
<span id="tq_304" class="t s5_304">Java 6 </span>
<span id="tr_304" class="t s6_304">F</span><span id="ts_304" class="t s2_304">igure 13</span><span id="tt_304" class="t s6_304">.</span><span id="tu_304" class="t s2_304">1</span><span id="tv_304" class="t s6_304">. Intrinsic locking versus </span><span id="tw_304" class="t s4_304">ReentrantLock </span><span id="tx_304" class="t s6_304">performance on Java </span><span id="ty_304" class="t s2_304">5</span><span id="tz_304" class="t s6_304">.</span><span id="t10_304" class="t s2_304">0 </span><span id="t11_304" class="t s6_304">and </span>
<span id="t12_304" class="t s6_304">Java </span><span id="t13_304" class="t s2_304">6</span><span id="t14_304" class="t s6_304">. </span>
<span id="t15_304" class="t s7_304">Performance is a moving target; yesterday’s benchmark showing that </span><span id="t16_304" class="t s8_304">X </span><span id="t17_304" class="t s7_304">is </span>
<span id="t18_304" class="t s7_304">faster than </span><span id="t19_304" class="t s8_304">Y </span><span id="t1a_304" class="t s7_304">may already be out of date today. </span>
<span id="t1b_304" class="t s9_304">13</span><span id="t1c_304" class="t sa_304">.</span><span id="t1d_304" class="t s9_304">3 </span><span id="t1e_304" class="t sa_304">Fairness </span>
<span id="t1f_304" class="t s6_304">The </span><span id="t1g_304" class="t s4_304">ReentrantLock </span><span id="t1h_304" class="t s6_304">constructor offers a choice of two </span><span id="t1i_304" class="t s1_304">fairness </span><span id="t1j_304" class="t s6_304">options: create a </span>
<span id="t1k_304" class="t s1_304">nonfair </span><span id="t1l_304" class="t s6_304">lock (the default) or a </span><span id="t1m_304" class="t s1_304">fair </span><span id="t1n_304" class="t s6_304">lock. Threads acquire a fair lock in the order in </span>
<span id="t1o_304" class="t s6_304">which they requested it, whereas a nonfair lock permits </span><span id="t1p_304" class="t s1_304">barging</span><span id="t1q_304" class="t s6_304">: threads request- </span>
<span id="t1r_304" class="t s6_304">ing a lock can jump ahead of the queue of waiting threads if the lock happens </span>
<span id="t1s_304" class="t s6_304">to be available when it is requested. (</span><span id="t1t_304" class="t s4_304">Semaphore </span><span id="t1u_304" class="t s6_304">also offers the choice of fair or </span>
<span id="t1v_304" class="t s6_304">nonfair acquisition ordering.) Nonfair </span><span id="t1w_304" class="t s4_304">ReentrantLock</span><span id="t1x_304" class="t s6_304">s do not go out of their way </span>
<span id="t1y_304" class="t s6_304">to promote barging—they simply don’t prevent a thread from barging if it shows </span>
<span id="t1z_304" class="t s6_304">up at the right time. With a fair lock, a newly requesting thread is queued if the </span>
<span id="t20_304" class="t s6_304">lock is held by another thread or if threads are queued waiting for the lock; with </span>
<span id="t21_304" class="t s6_304">a nonfair lock, the thread is queued only if the lock is currently held. </span>
<span id="t22_304" class="t sb_304">4 </span>
<span id="t23_304" class="t s6_304">Wouldn’t we want all locks to be fair? After all, fairness is good and unfairness </span>
<span id="t24_304" class="t s6_304">is bad, right? (Just ask your kids.) When it comes to locking, though, fairness </span>
<span id="t25_304" class="t s6_304" data-mappings='[[11,"fi"]]'>has a signiﬁcant performance cost because of the overhead of suspending and </span>
<span id="t26_304" class="t s6_304">resuming threads. In practice, a statistical fairness guarantee—promising that a </span>
<span id="t27_304" class="t s6_304">blocked thread will </span><span id="t28_304" class="t s1_304">eventually </span><span id="t29_304" class="t s6_304">acquire the lock—is often good enough, and is far </span>
<span id="t2a_304" class="t s6_304">less expensive to deliver. Some algorithms rely on fair queueing to ensure their </span>
<span id="t2b_304" class="t sb_304">4</span><span id="t2c_304" class="t sc_304">. </span><span id="t2d_304" class="t sc_304">The polled </span><span id="t2e_304" class="t sd_304">tryLock </span><span id="t2f_304" class="t sc_304">always barges, even for fair locks. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
