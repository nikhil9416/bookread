<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p114" style="overflow: hidden; position: relative; background-color: white; width: 662px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_114{left:57px;bottom:942px;}
#t2_114{left:65px;bottom:942px;}
#t3_114{left:68px;bottom:942px;}
#t4_114{left:76px;bottom:942px;letter-spacing:0.1px;word-spacing:1.67px;}
#t5_114{left:591px;bottom:942px;letter-spacing:0.2px;}
#t6_114{left:57px;bottom:894px;letter-spacing:0.05px;}
#t7_114{left:159px;bottom:893px;letter-spacing:0.09px;word-spacing:2.1px;}
#t8_114{left:57px;bottom:875px;letter-spacing:0.1px;word-spacing:2.06px;}
#t9_114{left:57px;bottom:857px;letter-spacing:0.05px;word-spacing:1.47px;}
#ta_114{left:57px;bottom:839px;letter-spacing:0.08px;word-spacing:2.28px;}
#tb_114{left:566px;bottom:839px;letter-spacing:0.15px;}
#tc_114{left:57px;bottom:820px;letter-spacing:0.1px;word-spacing:2.14px;}
#td_114{left:474px;bottom:821px;letter-spacing:0.05px;}
#te_114{left:543px;bottom:820px;letter-spacing:0.11px;word-spacing:2.09px;}
#tf_114{left:57px;bottom:802px;letter-spacing:0.09px;word-spacing:0.64px;}
#tg_114{left:80px;bottom:784px;letter-spacing:0.11px;}
#th_114{left:110px;bottom:785px;letter-spacing:0.05px;}
#ti_114{left:139px;bottom:784px;letter-spacing:0.14px;}
#tj_114{left:169px;bottom:785px;letter-spacing:0.05px;}
#tk_114{left:206px;bottom:784px;letter-spacing:0.09px;word-spacing:1.12px;}
#tl_114{left:288px;bottom:785px;letter-spacing:0.05px;}
#tm_114{left:396px;bottom:784px;letter-spacing:0.05px;word-spacing:1.27px;}
#tn_114{left:527px;bottom:785px;letter-spacing:0.05px;}
#to_114{left:57px;bottom:767px;letter-spacing:0.05px;}
#tp_114{left:144px;bottom:766px;letter-spacing:0.11px;word-spacing:2.46px;}
#tq_114{left:507px;bottom:767px;letter-spacing:0.05px;}
#tr_114{left:602px;bottom:766px;}
#ts_114{left:57px;bottom:747px;letter-spacing:0.07px;word-spacing:2.42px;}
#tt_114{left:251px;bottom:748px;letter-spacing:0.08px;}
#tu_114{left:409px;bottom:747px;letter-spacing:0.03px;word-spacing:2.67px;}
#tv_114{left:57px;bottom:729px;letter-spacing:0.09px;word-spacing:0.56px;}
#tw_114{left:335px;bottom:729px;letter-spacing:0.08px;}
#tx_114{left:405px;bottom:729px;letter-spacing:0.08px;word-spacing:0.5px;}
#ty_114{left:57px;bottom:711px;letter-spacing:-0.05px;word-spacing:1.27px;}
#tz_114{left:80px;bottom:693px;letter-spacing:0.05px;}
#t10_114{left:135px;bottom:693px;letter-spacing:0.04px;word-spacing:3.98px;}
#t11_114{left:230px;bottom:693px;letter-spacing:0.05px;}
#t12_114{left:310px;bottom:693px;letter-spacing:0.11px;word-spacing:3.81px;}
#t13_114{left:57px;bottom:674px;letter-spacing:0.11px;word-spacing:0.04px;}
#t14_114{left:57px;bottom:656px;letter-spacing:0.09px;word-spacing:0.6px;}
#t15_114{left:80px;bottom:638px;letter-spacing:0.09px;word-spacing:1.84px;}
#t16_114{left:198px;bottom:638px;letter-spacing:0.11px;}
#t17_114{left:272px;bottom:638px;letter-spacing:0.1px;word-spacing:2.41px;}
#t18_114{left:57px;bottom:620px;letter-spacing:0.09px;word-spacing:-0.25px;}
#t19_114{left:444px;bottom:620px;}
#t1a_114{left:459px;bottom:620px;letter-spacing:0.1px;word-spacing:-0.37px;}
#t1b_114{left:577px;bottom:620px;}
#t1c_114{left:587px;bottom:620px;}
#t1d_114{left:595px;bottom:620px;}
#t1e_114{left:57px;bottom:601px;letter-spacing:0.09px;word-spacing:-0.09px;}
#t1f_114{left:228px;bottom:601px;}
#t1g_114{left:241px;bottom:601px;letter-spacing:0.06px;word-spacing:-0.02px;}
#t1h_114{left:57px;bottom:583px;letter-spacing:0.07px;word-spacing:1.02px;}
#t1i_114{left:57px;bottom:565px;letter-spacing:0.09px;word-spacing:2.08px;}
#t1j_114{left:57px;bottom:546px;letter-spacing:0.06px;word-spacing:1.68px;}
#t1k_114{left:57px;bottom:528px;letter-spacing:0.09px;word-spacing:0.25px;}
#t1l_114{left:57px;bottom:510px;letter-spacing:0.08px;word-spacing:0.74px;}
#t1m_114{left:80px;bottom:492px;letter-spacing:0.04px;word-spacing:-0.07px;}
#t1n_114{left:374px;bottom:492px;letter-spacing:0.08px;}
#t1o_114{left:533px;bottom:492px;letter-spacing:-0.02px;word-spacing:0.64px;}
#t1p_114{left:57px;bottom:473px;letter-spacing:0.06px;word-spacing:1.22px;}
#t1q_114{left:57px;bottom:455px;letter-spacing:0.09px;word-spacing:0.76px;}
#t1r_114{left:57px;bottom:422px;letter-spacing:0.14px;word-spacing:0.48px;}
#t1s_114{left:157px;bottom:422px;letter-spacing:0.08px;}
#t1t_114{left:315px;bottom:422px;}
#t1u_114{left:328px;bottom:422px;letter-spacing:0.07px;word-spacing:2.76px;}
#t1v_114{left:95px;bottom:403px;letter-spacing:0.02px;word-spacing:-0.27px;}
#t1w_114{left:395px;bottom:404px;letter-spacing:0.08px;}
#t1x_114{left:558px;bottom:403px;letter-spacing:-0.07px;word-spacing:-0.04px;}
#t1y_114{left:95px;bottom:385px;letter-spacing:0.01px;word-spacing:0.2px;}
#t1z_114{left:352px;bottom:386px;letter-spacing:0.08px;}
#t20_114{left:510px;bottom:385px;letter-spacing:0.08px;word-spacing:0.15px;}
#t21_114{left:95px;bottom:367px;letter-spacing:0.09px;word-spacing:0.66px;}
#t22_114{left:57px;bottom:336px;letter-spacing:0.16px;word-spacing:0.37px;}
#t23_114{left:215px;bottom:336px;letter-spacing:0.06px;word-spacing:1.16px;}
#t24_114{left:419px;bottom:337px;letter-spacing:0.09px;}
#t25_114{left:577px;bottom:336px;letter-spacing:0.09px;word-spacing:2.28px;}
#t26_114{left:95px;bottom:318px;letter-spacing:0.07px;word-spacing:0.04px;}
#t27_114{left:341px;bottom:319px;letter-spacing:0.05px;}
#t28_114{left:404px;bottom:318px;letter-spacing:0.04px;word-spacing:0.6px;}
#t29_114{left:95px;bottom:300px;letter-spacing:0.13px;}
#t2a_114{left:136px;bottom:301px;letter-spacing:0.08px;}
#t2b_114{left:301px;bottom:300px;letter-spacing:0.09px;word-spacing:1.88px;}
#t2c_114{left:95px;bottom:283px;letter-spacing:0.05px;}
#t2d_114{left:172px;bottom:282px;letter-spacing:0.1px;word-spacing:1.41px;}
#t2e_114{left:95px;bottom:263px;letter-spacing:0.09px;word-spacing:0.62px;}
#t2f_114{left:505px;bottom:263px;}
#t2g_114{left:513px;bottom:263px;}
#t2h_114{left:517px;bottom:263px;letter-spacing:0.2px;}
#t2i_114{left:532px;bottom:263px;}
#t2j_114{left:80px;bottom:230px;letter-spacing:0.05px;word-spacing:2.93px;}
#t2k_114{left:57px;bottom:212px;letter-spacing:0.06px;word-spacing:2.34px;}
#t2l_114{left:57px;bottom:193px;letter-spacing:-0.01px;word-spacing:2.28px;}
#t2m_114{left:140px;bottom:193px;letter-spacing:0.1px;}
#t2n_114{left:166px;bottom:193px;letter-spacing:0.11px;word-spacing:1.82px;}
#t2o_114{left:226px;bottom:194px;letter-spacing:0.08px;}
#t2p_114{left:384px;bottom:193px;letter-spacing:0.1px;word-spacing:2.03px;}
#t2q_114{left:57px;bottom:175px;letter-spacing:0.08px;word-spacing:0.02px;}
#t2r_114{left:57px;bottom:157px;letter-spacing:0.08px;word-spacing:0.43px;}
#t2s_114{left:584px;bottom:157px;letter-spacing:0.19px;}
#t2t_114{left:57px;bottom:138px;letter-spacing:0.09px;word-spacing:0.06px;}
#t2u_114{left:57px;bottom:121px;letter-spacing:0.05px;}
#t2v_114{left:109px;bottom:120px;letter-spacing:0.09px;word-spacing:0.75px;}
#t2w_114{left:491px;bottom:120px;letter-spacing:0.11px;word-spacing:1.06px;}
#t2x_114{left:57px;bottom:102px;letter-spacing:0.09px;word-spacing:0.52px;}
#t2y_114{left:415px;bottom:102px;}
#t2z_114{left:423px;bottom:102px;}

.s0_114{font-size:15px;font-family:TeXPalladioL-ItalicOsF_amn;color:#000;}
.s1_114{font-size:15px;font-family:Palatino-Italic_amd;color:#000;}
.s2_114{font-size:15px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s3_114{font-size:13px;font-family:LucidaSansTypewriter_amm;color:#000;}
.s4_114{font-size:15px;font-family:Palatino-Roman_ame;color:#000;}
.s5_114{font-size:15px;font-family:Palatino-Bold_amf;color:#000;}
.s6_114{font-size:13px;font-family:LucidaSansTypewriter-Bd_amr;color:#000;}
.s7_114{font-size:13px;font-family:LucidaSansTypewriter-Obl_amo;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts114" type="text/css" >

@font-face {
	font-family: LucidaSansTypewriter-Bd_amr;
	src: url("fonts/LucidaSansTypewriter-Bd_amr.woff") format("woff");
}

@font-face {
	font-family: LucidaSansTypewriter-Obl_amo;
	src: url("fonts/LucidaSansTypewriter-Obl_amo.woff") format("woff");
}

@font-face {
	font-family: LucidaSansTypewriter_amm;
	src: url("fonts/LucidaSansTypewriter_amm.woff") format("woff");
}

@font-face {
	font-family: Palatino-Bold_amf;
	src: url("fonts/Palatino-Bold_amf.woff") format("woff");
}

@font-face {
	font-family: Palatino-Italic_amd;
	src: url("fonts/Palatino-Italic_amd.woff") format("woff");
}

@font-face {
	font-family: Palatino-Roman_ame;
	src: url("fonts/Palatino-Roman_ame.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-ItalicOsF_amn;
	src: url("fonts/TeXPalladioL-ItalicOsF_amn.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-SC_amc;
	src: url("fonts/TeXPalladioL-SC_amc.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg114Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg114" style="-webkit-user-select: none;"><object width="662" height="1017" data="114/114.svg" type="image/svg+xml" id="pdf114" style="width:662px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_114" class="t s0_114">5</span><span id="t2_114" class="t s1_114">.</span><span id="t3_114" class="t s0_114">4</span><span id="t4_114" class="t s1_114">. Blocking and interruptible methods </span><span id="t5_114" class="t s2_114">93 </span>
<span id="t6_114" class="t s3_114">TIMED_WAITING</span><span id="t7_114" class="t s4_114">). The distinction between a blocking operation and an ordinary </span>
<span id="t8_114" class="t s4_114" data-mappings='[[43,"fi"]]'>operation that merely takes a long time to ﬁnish is that a blocked thread must </span>
<span id="t9_114" class="t s4_114">wait for an event that is beyond its control before it can proceed—the I/O com- </span>
<span id="ta_114" class="t s4_114" data-mappings='[[64,"fi"]]'>pletes, the lock becomes available, or the external computation ﬁnishes. </span><span id="tb_114" class="t s4_114">When </span>
<span id="tc_114" class="t s4_114">that external event occurs, the thread is placed back in the </span><span id="td_114" class="t s3_114">RUNNABLE </span><span id="te_114" class="t s4_114">state and </span>
<span id="tf_114" class="t s4_114">becomes eligible again for scheduling. </span>
<span id="tg_114" class="t s4_114">The </span><span id="th_114" class="t s3_114">put </span><span id="ti_114" class="t s4_114">and </span><span id="tj_114" class="t s3_114">take </span><span id="tk_114" class="t s4_114">methods of </span><span id="tl_114" class="t s3_114">BlockingQueue </span><span id="tm_114" class="t s4_114">throw the checked </span><span id="tn_114" class="t s3_114">Interrupt- </span>
<span id="to_114" class="t s3_114">edException</span><span id="tp_114" class="t s4_114">, as do a number of other library methods such as </span><span id="tq_114" class="t s3_114">Thread.sleep</span><span id="tr_114" class="t s4_114">. </span>
<span id="ts_114" class="t s4_114">When a method can throw </span><span id="tt_114" class="t s3_114">InterruptedException</span><span id="tu_114" class="t s4_114">, it is telling you that it is a </span>
<span id="tv_114" class="t s4_114">blocking method, and further that if it is </span><span id="tw_114" class="t s1_114">interrupted</span><span id="tx_114" class="t s4_114">, it will make an effort to stop </span>
<span id="ty_114" class="t s4_114">blocking early. </span>
<span id="tz_114" class="t s3_114">Thread </span><span id="t10_114" class="t s4_114">provides the </span><span id="t11_114" class="t s3_114">interrupt </span><span id="t12_114" class="t s4_114">method for interrupting a thread and for </span>
<span id="t13_114" class="t s4_114">querying whether a thread has been interrupted. Each thread has a boolean prop- </span>
<span id="t14_114" class="t s4_114">erty that represents its interrupted status; interrupting a thread sets this status. </span>
<span id="t15_114" class="t s4_114">Interruption is a </span><span id="t16_114" class="t s1_114">cooperative </span><span id="t17_114" class="t s4_114">mechanism. One thread cannot force another to </span>
<span id="t18_114" class="t s4_114">stop what it is doing and do something else; when thread </span><span id="t19_114" class="t s1_114">A </span><span id="t1a_114" class="t s4_114">interrupts thread </span><span id="t1b_114" class="t s1_114">B</span><span id="t1c_114" class="t s4_114">, </span><span id="t1d_114" class="t s1_114">A </span>
<span id="t1e_114" class="t s4_114">is merely requesting that </span><span id="t1f_114" class="t s1_114">B </span><span id="t1g_114" class="t s4_114">stop what it is doing when it gets to a convenient stop- </span>
<span id="t1h_114" class="t s4_114">ping point—if it feels like it. While there is nothing in the API or language spec- </span>
<span id="t1i_114" class="t s4_114" data-mappings='[[1,"fi"],[31,"fi"]]'>iﬁcation that demands any speciﬁc application-level semantics for interruption, </span>
<span id="t1j_114" class="t s4_114">the most sensible use for interruption is to cancel an activity. Blocking methods </span>
<span id="t1k_114" class="t s4_114">that are responsive to interruption make it easier to cancel long-running activities </span>
<span id="t1l_114" class="t s4_114">on a timely basis. </span>
<span id="t1m_114" class="t s4_114">When your code calls a method that throws </span><span id="t1n_114" class="t s3_114">InterruptedException</span><span id="t1o_114" class="t s4_114">, then your </span>
<span id="t1p_114" class="t s4_114">method is a blocking method too, and must have a plan for responding to inter- </span>
<span id="t1q_114" class="t s4_114">ruption. For library code, there are basically two choices: </span>
<span id="t1r_114" class="t s5_114">Propagate the </span><span id="t1s_114" class="t s6_114">InterruptedException</span><span id="t1t_114" class="t s5_114">. </span><span id="t1u_114" class="t s4_114">This is often the most sensible policy if </span>
<span id="t1v_114" class="t s4_114">you can get away with it—just propagate the </span><span id="t1w_114" class="t s3_114">InterruptedException </span><span id="t1x_114" class="t s4_114">to your </span>
<span id="t1y_114" class="t s4_114">caller. This could involve not catching </span><span id="t1z_114" class="t s3_114">InterruptedException</span><span id="t20_114" class="t s4_114">, or catching it </span>
<span id="t21_114" class="t s4_114" data-mappings='[[64,"fi"]]'>and throwing it again after performing some brief activity-speciﬁc cleanup. </span>
<span id="t22_114" class="t s5_114">Restore the interrupt. </span><span id="t23_114" class="t s4_114">Sometimes you cannot throw </span><span id="t24_114" class="t s3_114">InterruptedException</span><span id="t25_114" class="t s4_114">, for </span>
<span id="t26_114" class="t s4_114">instance when your code is part of a </span><span id="t27_114" class="t s3_114">Runnable</span><span id="t28_114" class="t s4_114">. In these situations, you must </span>
<span id="t29_114" class="t s4_114">catch </span><span id="t2a_114" class="t s3_114">InterruptedException </span><span id="t2b_114" class="t s4_114">and restore the interrupted status by calling </span>
<span id="t2c_114" class="t s3_114">interrupt </span><span id="t2d_114" class="t s4_114">on the current thread, so that code higher up the call stack can </span>
<span id="t2e_114" class="t s4_114">see that an interrupt was issued, as demonstrated in Listing </span><span id="t2f_114" class="t s2_114">5</span><span id="t2g_114" class="t s4_114">.</span><span id="t2h_114" class="t s2_114">10</span><span id="t2i_114" class="t s4_114">. </span>
<span id="t2j_114" class="t s4_114">You can get much more sophisticated with interruption, but these two ap- </span>
<span id="t2k_114" class="t s4_114">proaches should work in the vast majority of situations. But there is one thing </span>
<span id="t2l_114" class="t s4_114">you should </span><span id="t2m_114" class="t s1_114">not </span><span id="t2n_114" class="t s4_114">do with </span><span id="t2o_114" class="t s3_114">InterruptedException</span><span id="t2p_114" class="t s4_114">—catch it and do nothing in re- </span>
<span id="t2q_114" class="t s4_114">sponse. This deprives code higher up on the call stack of the opportunity to act on </span>
<span id="t2r_114" class="t s4_114">the interruption, because the evidence that the thread was interrupted is lost. </span><span id="t2s_114" class="t s1_114">The </span>
<span id="t2t_114" class="t s1_114">only situation in which it is acceptable to swallow an interrupt is when you are extending </span>
<span id="t2u_114" class="t s7_114">Thread </span><span id="t2v_114" class="t s1_114">and therefore control all the code higher up on the call stack. </span><span id="t2w_114" class="t s4_114">Cancellation and </span>
<span id="t2x_114" class="t s4_114">interruption are covered in greater detail in Chapter </span><span id="t2y_114" class="t s2_114">7</span><span id="t2z_114" class="t s4_114">. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
