<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p243" style="overflow: hidden; position: relative; background-color: white; width: 662px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_243{left:57px;bottom:942px;letter-spacing:0.2px;}
#t2_243{left:351px;bottom:942px;letter-spacing:0.13px;}
#t3_243{left:404px;bottom:942px;letter-spacing:0.2px;}
#t4_243{left:420px;bottom:942px;letter-spacing:0.09px;word-spacing:2.14px;}
#t5_243{left:57px;bottom:893px;letter-spacing:0.08px;word-spacing:1.07px;}
#t6_243{left:57px;bottom:875px;letter-spacing:0.02px;word-spacing:1.11px;}
#t7_243{left:57px;bottom:857px;letter-spacing:-0.01px;word-spacing:3.19px;}
#t8_243{left:259px;bottom:857px;letter-spacing:0.1px;word-spacing:2.74px;}
#t9_243{left:57px;bottom:839px;letter-spacing:0.09px;word-spacing:0.59px;}
#ta_243{left:537px;bottom:846px;}
#tb_243{left:80px;bottom:820px;letter-spacing:0.08px;word-spacing:1.37px;}
#tc_243{left:57px;bottom:802px;letter-spacing:0.02px;word-spacing:1.31px;}
#td_243{left:57px;bottom:784px;letter-spacing:0.07px;word-spacing:-0.08px;}
#te_243{left:57px;bottom:766px;letter-spacing:0.08px;word-spacing:2.88px;}
#tf_243{left:57px;bottom:747px;letter-spacing:0.1px;word-spacing:0.62px;}
#tg_243{left:57px;bottom:729px;letter-spacing:0.07px;word-spacing:1.36px;}
#th_243{left:443px;bottom:729px;letter-spacing:0.06px;}
#ti_243{left:485px;bottom:729px;letter-spacing:0.02px;word-spacing:2.15px;}
#tj_243{left:57px;bottom:711px;letter-spacing:0.08px;word-spacing:1.25px;}
#tk_243{left:57px;bottom:692px;letter-spacing:0.01px;word-spacing:1.35px;}
#tl_243{left:57px;bottom:674px;letter-spacing:0.1px;word-spacing:0.82px;}
#tm_243{left:57px;bottom:656px;letter-spacing:0.01px;word-spacing:0.8px;}
#tn_243{left:57px;bottom:614px;letter-spacing:-0.25px;}
#to_243{left:73px;bottom:614px;}
#tp_243{left:78px;bottom:614px;}
#tq_243{left:86px;bottom:614px;}
#tr_243{left:90px;bottom:614px;}
#ts_243{left:115px;bottom:614px;letter-spacing:-0.18px;word-spacing:0.78px;}
#tt_243{left:57px;bottom:587px;letter-spacing:0.1px;word-spacing:1.2px;}
#tu_243{left:57px;bottom:568px;letter-spacing:-0.01px;word-spacing:0.18px;}
#tv_243{left:57px;bottom:550px;letter-spacing:0.06px;word-spacing:-0.1px;}
#tw_243{left:57px;bottom:532px;letter-spacing:0.06px;word-spacing:1.14px;}
#tx_243{left:57px;bottom:514px;letter-spacing:0.09px;word-spacing:0.68px;}
#ty_243{left:72px;bottom:466px;letter-spacing:-0.21px;}
#tz_243{left:151px;bottom:466px;letter-spacing:-0.25px;word-spacing:0.68px;}
#t10_243{left:72px;bottom:445px;letter-spacing:-0.29px;word-spacing:1.26px;}
#t11_243{left:72px;bottom:425px;letter-spacing:-0.25px;}
#t12_243{left:80px;bottom:378px;letter-spacing:0.09px;word-spacing:1.38px;}
#t13_243{left:57px;bottom:360px;letter-spacing:0.11px;word-spacing:0.66px;}
#t14_243{left:57px;bottom:342px;letter-spacing:0.08px;word-spacing:1px;}
#t15_243{left:253px;bottom:342px;letter-spacing:0.12px;}
#t16_243{left:288px;bottom:342px;letter-spacing:-0.01px;word-spacing:1.16px;}
#t17_243{left:363px;bottom:342px;letter-spacing:0.03px;}
#t18_243{left:390px;bottom:342px;letter-spacing:0.07px;word-spacing:0.95px;}
#t19_243{left:57px;bottom:323px;letter-spacing:0.09px;word-spacing:0.36px;}
#t1a_243{left:440px;bottom:323px;}
#t1b_243{left:452px;bottom:323px;}
#t1c_243{left:459px;bottom:323px;}
#t1d_243{left:467px;bottom:330px;}
#t1e_243{left:474px;bottom:323px;}
#t1f_243{left:484px;bottom:323px;letter-spacing:0.09px;word-spacing:0.5px;}
#t1g_243{left:57px;bottom:305px;}
#t1h_243{left:69px;bottom:305px;}
#t1i_243{left:76px;bottom:305px;}
#t1j_243{left:87px;bottom:305px;letter-spacing:0.06px;}
#t1k_243{left:111px;bottom:305px;}
#t1l_243{left:119px;bottom:305px;}
#t1m_243{left:131px;bottom:305px;letter-spacing:0.03px;word-spacing:1.93px;}
#t1n_243{left:57px;bottom:287px;letter-spacing:0.08px;word-spacing:2.7px;}
#t1o_243{left:57px;bottom:268px;letter-spacing:0.09px;word-spacing:0.67px;}
#t1p_243{left:165px;bottom:268px;letter-spacing:0.06px;}
#t1q_243{left:199px;bottom:268px;letter-spacing:-0.01px;word-spacing:0.98px;}
#t1r_243{left:274px;bottom:268px;letter-spacing:0.06px;}
#t1s_243{left:309px;bottom:268px;letter-spacing:0.08px;}
#t1t_243{left:80px;bottom:250px;letter-spacing:0.11px;word-spacing:2.44px;}
#t1u_243{left:333px;bottom:250px;letter-spacing:0.11px;word-spacing:1.85px;}
#t1v_243{left:392px;bottom:250px;letter-spacing:0.14px;}
#t1w_243{left:424px;bottom:250px;letter-spacing:0.16px;word-spacing:1.97px;}
#t1x_243{left:490px;bottom:250px;letter-spacing:0.12px;word-spacing:2.08px;}
#t1y_243{left:57px;bottom:232px;letter-spacing:0.06px;word-spacing:0.58px;}
#t1z_243{left:57px;bottom:214px;letter-spacing:0.07px;word-spacing:1.31px;}
#t20_243{left:459px;bottom:214px;letter-spacing:0.05px;}
#t21_243{left:528px;bottom:214px;letter-spacing:0.09px;word-spacing:1.43px;}
#t22_243{left:57px;bottom:195px;letter-spacing:0.06px;word-spacing:1.49px;}
#t23_243{left:264px;bottom:195px;letter-spacing:0.11px;}
#t24_243{left:333px;bottom:195px;letter-spacing:0.08px;word-spacing:1.42px;}
#t25_243{left:57px;bottom:177px;letter-spacing:0.04px;word-spacing:0.89px;}
#t26_243{left:57px;bottom:159px;letter-spacing:0.11px;word-spacing:1.17px;}
#t27_243{left:544px;bottom:159px;letter-spacing:0.2px;}
#t28_243{left:559px;bottom:159px;}
#t29_243{left:563px;bottom:159px;}
#t2a_243{left:571px;bottom:159px;}
#t2b_243{left:575px;bottom:159px;}
#t2c_243{left:587px;bottom:159px;letter-spacing:0.09px;}
#t2d_243{left:57px;bottom:141px;letter-spacing:0.14px;word-spacing:0.45px;}
#t2e_243{left:57px;bottom:113px;}
#t2f_243{left:63px;bottom:113px;}
#t2g_243{left:74px;bottom:113px;letter-spacing:0.05px;word-spacing:0.41px;}
#t2h_243{left:57px;bottom:98px;letter-spacing:0.07px;word-spacing:2.17px;}
#t2i_243{left:487px;bottom:98px;letter-spacing:0.07px;word-spacing:2.08px;}
#t2j_243{left:57px;bottom:84px;letter-spacing:0.1px;word-spacing:0.17px;}
#t2k_243{left:501px;bottom:84px;}
#t2l_243{left:507px;bottom:84px;word-spacing:0.82px;}
#t2m_243{left:57px;bottom:69px;letter-spacing:0.06px;word-spacing:1.74px;}
#t2n_243{left:57px;bottom:55px;letter-spacing:0.09px;word-spacing:0.56px;}

.s0_243{font-size:15px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s1_243{font-size:15px;font-family:Palatino-Italic_amd;color:#000;}
.s2_243{font-size:15px;font-family:TeXPalladioL-ItalicOsF_amn;color:#000;}
.s3_243{font-size:15px;font-family:Palatino-Roman_ame;color:#000;}
.s4_243{font-size:12px;font-family:TeXPalladioL-SC_amc;color:#000;}
.s5_243{font-size:17px;font-family:TeXPalladioL-BoldOsF_aml;color:#000;}
.s6_243{font-size:17px;font-family:Palatino-Bold_amf;color:#000;}
.s7_243{font-size:15px;font-family:LucidaSans-Italic_ams;color:#000;}
.s8_243{font-size:15px;font-family:LucidaSans_amq;color:#000;}
.s9_243{font-size:16px;font-family:CMR10_amv;color:#000;}
.sa_243{font-size:12px;font-family:Palatino-Roman_ame;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts243" type="text/css" >

@font-face {
	font-family: CMR10_amv;
	src: url("fonts/CMR10_amv.woff") format("woff");
}

@font-face {
	font-family: LucidaSans-Italic_ams;
	src: url("fonts/LucidaSans-Italic_ams.woff") format("woff");
}

@font-face {
	font-family: LucidaSans_amq;
	src: url("fonts/LucidaSans_amq.woff") format("woff");
}

@font-face {
	font-family: Palatino-Bold_amf;
	src: url("fonts/Palatino-Bold_amf.woff") format("woff");
}

@font-face {
	font-family: Palatino-Italic_amd;
	src: url("fonts/Palatino-Italic_amd.woff") format("woff");
}

@font-face {
	font-family: Palatino-Roman_ame;
	src: url("fonts/Palatino-Roman_ame.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-BoldOsF_aml;
	src: url("fonts/TeXPalladioL-BoldOsF_aml.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-ItalicOsF_amn;
	src: url("fonts/TeXPalladioL-ItalicOsF_amn.woff") format("woff");
}

@font-face {
	font-family: TeXPalladioL-SC_amc;
	src: url("fonts/TeXPalladioL-SC_amc.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg243Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg243" style="-webkit-user-select: none;"><object width="662" height="1017" data="243/243.svg" type="image/svg+xml" id="pdf243" style="width:662px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_243" class="t s0_243">222 </span><span id="t2_243" class="t s1_243">Chapter </span><span id="t3_243" class="t s2_243">11</span><span id="t4_243" class="t s1_243">. Performance and Scalability </span>
<span id="t5_243" class="t s3_243">thread creation and teardown, and scheduling overhead. When threading is em- </span>
<span id="t6_243" class="t s3_243">ployed effectively, these costs are more than made up for by greater throughput, </span>
<span id="t7_243" class="t s3_243">responsiveness, or capacity. </span><span id="t8_243" class="t s3_243">On the other hand, a poorly designed concurrent </span>
<span id="t9_243" class="t s3_243">application can perform even worse than a comparable sequential one. </span>
<span id="ta_243" class="t s4_243">2 </span>
<span id="tb_243" class="t s3_243">In using concurrency to achieve better performance, we are trying to do two </span>
<span id="tc_243" class="t s3_243">things: utilize the processing resources we have more effectively, and enable our </span>
<span id="td_243" class="t s3_243">program to exploit additional processing resources if they become available. From </span>
<span id="te_243" class="t s3_243">a performance monitoring perspective, this means we are looking to keep the </span>
<span id="tf_243" class="t s3_243">CPUs as busy as possible. (Of course, this doesn’t mean burning cycles with use- </span>
<span id="tg_243" class="t s3_243">less computation; we want to keep the CPUs busy with </span><span id="th_243" class="t s1_243">useful </span><span id="ti_243" class="t s3_243">work.) If the pro- </span>
<span id="tj_243" class="t s3_243">gram is compute-bound, then we may be able to increase its capacity by adding </span>
<span id="tk_243" class="t s3_243">more processors; if it can’t even keep the processors we have busy, adding more </span>
<span id="tl_243" class="t s3_243">won’t help. Threading offers a means to keep the CPU(s) “hotter” by decompos- </span>
<span id="tm_243" class="t s3_243">ing the application so there is always work to be done by an available processor. </span>
<span id="tn_243" class="t s5_243">11</span><span id="to_243" class="t s6_243">.</span><span id="tp_243" class="t s5_243">1</span><span id="tq_243" class="t s6_243">.</span><span id="tr_243" class="t s5_243">1 </span><span id="ts_243" class="t s6_243">Performance versus scalability </span>
<span id="tt_243" class="t s3_243">Application performance can be measured in a number of ways, such as service </span>
<span id="tu_243" class="t s3_243" data-mappings='[[29,"fi"]]'>time, latency, throughput, efﬁciency, scalability, or capacity. Some of these (service </span>
<span id="tv_243" class="t s3_243">time, latency) are measures of “how fast” a given unit of work can be processed or </span>
<span id="tw_243" class="t s3_243">acknowledged; others (capacity, throughput) are measures of “how much” work </span>
<span id="tx_243" class="t s3_243">can be performed with a given quantity of computing resources. </span>
<span id="ty_243" class="t s7_243">Scalability </span><span id="tz_243" class="t s8_243">describes the ability to improve throughput or capacity when </span>
<span id="t10_243" class="t s8_243">additional computing resources (such as additional CPUs, memory, stor- </span>
<span id="t11_243" class="t s8_243">age, or I/O bandwidth) are added. </span>
<span id="t12_243" class="t s3_243">Designing and tuning concurrent applications for scalability can be very dif- </span>
<span id="t13_243" class="t s3_243">ferent from traditional performance optimization. When tuning for performance, </span>
<span id="t14_243" class="t s3_243">the goal is usually to do the </span><span id="t15_243" class="t s1_243">same </span><span id="t16_243" class="t s3_243">work with </span><span id="t17_243" class="t s1_243">less </span><span id="t18_243" class="t s3_243">effort, such as by reusing previ- </span>
<span id="t19_243" class="t s3_243">ously computed results through caching or replacing an </span><span id="t1a_243" class="t s1_243">O</span><span id="t1b_243" class="t s9_243">(</span><span id="t1c_243" class="t s1_243">n </span>
<span id="t1d_243" class="t sa_243">2 </span>
<span id="t1e_243" class="t s9_243">) </span><span id="t1f_243" class="t s3_243">algorithm with an </span>
<span id="t1g_243" class="t s1_243">O</span><span id="t1h_243" class="t s9_243">(</span><span id="t1i_243" class="t s1_243">n </span><span id="t1j_243" class="t s3_243">log </span><span id="t1k_243" class="t s1_243">n</span><span id="t1l_243" class="t s9_243">) </span><span id="t1m_243" class="t s3_243" data-mappings='[[60,"fi"]]'>one. When tuning for scalability, you are instead trying to ﬁnd ways </span>
<span id="t1n_243" class="t s3_243">to parallelize the problem so you can take advantage of additional processing </span>
<span id="t1o_243" class="t s3_243">resources to do </span><span id="t1p_243" class="t s1_243">more </span><span id="t1q_243" class="t s3_243">work with </span><span id="t1r_243" class="t s1_243">more </span><span id="t1s_243" class="t s3_243">resources. </span>
<span id="t1t_243" class="t s3_243">These two aspects of performance—</span><span id="t1u_243" class="t s1_243">how fast </span><span id="t1v_243" class="t s3_243">and </span><span id="t1w_243" class="t s1_243">how much</span><span id="t1x_243" class="t s3_243">—are completely </span>
<span id="t1y_243" class="t s3_243">separate, and sometimes even at odds with each other. In order to achieve higher </span>
<span id="t1z_243" class="t s3_243">scalability or better hardware utilization, we often end up </span><span id="t20_243" class="t s1_243">increasing </span><span id="t21_243" class="t s3_243">the amount </span>
<span id="t22_243" class="t s3_243">of work done to process each </span><span id="t23_243" class="t s1_243">individual </span><span id="t24_243" class="t s3_243">task, such as when we divide tasks into </span>
<span id="t25_243" class="t s3_243">multiple “pipelined” subtasks. Ironically, many of the tricks that improve perfor- </span>
<span id="t26_243" class="t s3_243">mance in single-threaded programs are bad for scalability (see Section </span><span id="t27_243" class="t s0_243">11</span><span id="t28_243" class="t s3_243">.</span><span id="t29_243" class="t s0_243">4</span><span id="t2a_243" class="t s3_243">.</span><span id="t2b_243" class="t s0_243">4 </span><span id="t2c_243" class="t s3_243">for </span>
<span id="t2d_243" class="t s3_243">an example). </span>
<span id="t2e_243" class="t s4_243">2</span><span id="t2f_243" class="t sa_243">. </span><span id="t2g_243" class="t sa_243">A colleague provided this amusing anecodote: he had been involved in the testing of an expensive </span>
<span id="t2h_243" class="t sa_243">and complex application that managed its work via a tunable thread pool. </span><span id="t2i_243" class="t sa_243">After the system was </span>
<span id="t2j_243" class="t sa_243">complete, testing showed that the optimal number of threads for the pool was . .. </span><span id="t2k_243" class="t s4_243">1</span><span id="t2l_243" class="t sa_243">. This should have </span>
<span id="t2m_243" class="t sa_243">been obvious from the outset; the target system was a single-CPU system and the application was </span>
<span id="t2n_243" class="t sa_243">almost entirely CPU-bound. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
