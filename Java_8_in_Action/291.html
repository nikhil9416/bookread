<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p291" style="overflow: hidden; position: relative; background-color: white; width: 909px; height: 1286px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_291{left:450px;bottom:46px;letter-spacing:-0.13px;}
#t2_291{left:65px;bottom:1188px;letter-spacing:0.14px;word-spacing:0.68px;}
#t3_291{left:65px;bottom:1159px;letter-spacing:0.15px;word-spacing:2.91px;}
#t4_291{left:65px;bottom:1130px;letter-spacing:0.15px;word-spacing:2.91px;}
#t5_291{left:65px;bottom:1101px;letter-spacing:0.15px;word-spacing:1.23px;}
#t6_291{left:65px;bottom:1072px;letter-spacing:0.16px;word-spacing:0.73px;}
#t7_291{left:65px;bottom:1043px;letter-spacing:0.15px;word-spacing:-0.23px;}
#t8_291{left:65px;bottom:992px;letter-spacing:0.15px;word-spacing:1.03px;}
#t9_291{left:554px;bottom:992px;letter-spacing:0.14px;word-spacing:0.93px;}
#ta_291{left:642px;bottom:992px;letter-spacing:0.14px;word-spacing:0.99px;}
#tb_291{left:65px;bottom:963px;letter-spacing:0.15px;word-spacing:-0.23px;}
#tc_291{left:65px;bottom:905px;letter-spacing:0.21px;}
#td_291{left:156px;bottom:905px;letter-spacing:0.2px;}
#te_291{left:224px;bottom:905px;letter-spacing:0.25px;}
#tf_291{left:360px;bottom:905px;letter-spacing:0.26px;}
#tg_291{left:409px;bottom:906px;letter-spacing:0.2px;}
#th_291{left:476px;bottom:905px;}
#ti_291{left:486px;bottom:906px;letter-spacing:0.2px;}
#tj_291{left:520px;bottom:905px;}
#tk_291{left:530px;bottom:906px;letter-spacing:0.22px;}
#tl_291{left:640px;bottom:905px;letter-spacing:0.28px;}
#tm_291{left:703px;bottom:905px;letter-spacing:0.27px;}
#tn_291{left:787px;bottom:905px;letter-spacing:0.26px;}
#to_291{left:65px;bottom:865px;letter-spacing:0.2px;}
#tp_291{left:65px;bottom:507px;letter-spacing:0.15px;word-spacing:2.49px;}
#tq_291{left:65px;bottom:477px;letter-spacing:0.14px;word-spacing:0.58px;}
#tr_291{left:65px;bottom:448px;letter-spacing:0.14px;word-spacing:-0.07px;}
#ts_291{left:242px;bottom:448px;letter-spacing:0.18px;}
#tt_291{left:295px;bottom:448px;letter-spacing:0.18px;}
#tu_291{left:317px;bottom:448px;letter-spacing:0.17px;word-spacing:-0.15px;}
#tv_291{left:402px;bottom:448px;letter-spacing:0.13px;word-spacing:-0.08px;}
#tw_291{left:590px;bottom:448px;letter-spacing:0.18px;}
#tx_291{left:643px;bottom:448px;letter-spacing:0.18px;}
#ty_291{left:665px;bottom:448px;letter-spacing:0.17px;word-spacing:-0.15px;}
#tz_291{left:749px;bottom:448px;letter-spacing:0.14px;word-spacing:-0.21px;}
#t10_291{left:65px;bottom:398px;letter-spacing:0.15px;word-spacing:2.43px;}
#t11_291{left:65px;bottom:369px;letter-spacing:0.15px;word-spacing:1.84px;}
#t12_291{left:65px;bottom:340px;letter-spacing:0.16px;word-spacing:2.67px;}
#t13_291{left:65px;bottom:311px;letter-spacing:0.16px;word-spacing:2.07px;}
#t14_291{left:65px;bottom:282px;letter-spacing:0.21px;}
#t15_291{left:65px;bottom:253px;letter-spacing:0.15px;word-spacing:0.6px;}
#t16_291{left:65px;bottom:224px;letter-spacing:0.15px;word-spacing:0.83px;}
#t17_291{left:65px;bottom:195px;letter-spacing:0.17px;word-spacing:2.57px;}
#t18_291{left:65px;bottom:166px;letter-spacing:0.16px;word-spacing:0.68px;}
#t19_291{left:65px;bottom:137px;letter-spacing:0.14px;word-spacing:1.42px;}
#t1a_291{left:65px;bottom:108px;letter-spacing:0.15px;word-spacing:0.37px;}
#t1b_291{left:390px;bottom:3px;letter-spacing:0.13px;}

.s1_291{font-size:14px;font-family:TimesNewRomanPSMT_g;color:#000;}
.s2_291{font-size:18px;font-family:Georgia_11;color:#000;}
.s3_291{font-size:18px;font-family:Georgia_11;color:#00F;}
.s4_291{font-size:21px;font-family:Georgia-Bold_l;color:#000;}
.s5_291{font-size:18px;font-family:Georgia-Bold_l;color:#000;}
.s6_291{font-size:18px;font-family:Georgia-Italic_16;color:#000;}
.s7_291{font-size:15px;font-family:Helvetica, Arial, sans-serif;color:#00F;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts291" type="text/css" >

@font-face {
	font-family: Georgia-Bold_l;
	src: url("fonts/Georgia-Bold_l.woff") format("woff");
}

@font-face {
	font-family: Georgia-Italic_16;
	src: url("fonts/Georgia-Italic_16.woff") format("woff");
}

@font-face {
	font-family: Georgia_11;
	src: url("fonts/Georgia_11.woff") format("woff");
}

@font-face {
	font-family: TimesNewRomanPSMT_g;
	src: url("fonts/TimesNewRomanPSMT_g.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg291Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg291" style="-webkit-user-select: none;"><object width="909" height="1286" data="291/291.svg" type="image/svg+xml" id="pdf291" style="width:909px; height:1286px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_291" class="t s1_291">291 </span>
<span id="t2_291" class="t s2_291">An important, practical semantic difference in using optionals instead of nulls is that in the first </span>
<span id="t3_291" class="t s2_291">case, declaring a variable of type Optional&lt;Car&gt; instead of Car clearly signals that a missing </span>
<span id="t4_291" class="t s2_291">value is permitted there. Conversely, always using the type Car and possibly assigning a null </span>
<span id="t5_291" class="t s2_291">reference to a variable of that type implies you don’t have any help, other than your knowledge </span>
<span id="t6_291" class="t s2_291">of the business model, to understand whether the null belongs to the valid domain of that given </span>
<span id="t7_291" class="t s2_291">variable or not. </span>
<span id="t8_291" class="t s2_291">With this in mind, you can rework the original model from </span><span id="t9_291" class="t s3_291">listing 10.1 </span><span id="ta_291" class="t s2_291">, using the Optional class </span>
<span id="tb_291" class="t s2_291">as follows. </span>
<span id="tc_291" class="t s4_291">Listing </span><span id="td_291" class="t s4_291">10.4. </span><span id="te_291" class="t s4_291">Redefining </span><span id="tf_291" class="t s4_291">the </span><span id="tg_291" class="t s5_291">Person</span><span id="th_291" class="t s4_291">/</span><span id="ti_291" class="t s5_291">Car</span><span id="tj_291" class="t s4_291">/</span><span id="tk_291" class="t s5_291">Insurance </span><span id="tl_291" class="t s4_291">data </span><span id="tm_291" class="t s4_291">model </span><span id="tn_291" class="t s4_291">using </span>
<span id="to_291" class="t s5_291">Optional </span>
<span id="tp_291" class="t s2_291">Note how the use of the Optional class enriches the semantics of your model. The fact that a </span>
<span id="tq_291" class="t s2_291">person references an Optional&lt;Car&gt;, and a car an Optional&lt;Insurance&gt;, makes it explicit in the </span>
<span id="tr_291" class="t s2_291">domain that a person </span><span id="ts_291" class="t s6_291">might </span><span id="tt_291" class="t s2_291">or </span><span id="tu_291" class="t s6_291">might not </span><span id="tv_291" class="t s2_291">own a car, and that car </span><span id="tw_291" class="t s6_291">might </span><span id="tx_291" class="t s2_291">or </span><span id="ty_291" class="t s6_291">might not </span><span id="tz_291" class="t s2_291">be insured. </span>
<span id="t10_291" class="t s2_291">At the same time, the fact that the name of the insurance company is declared of type String </span>
<span id="t11_291" class="t s2_291">instead of Optional&lt;String&gt; makes it evident that it’s mandatory for an insurance company to </span>
<span id="t12_291" class="t s2_291">have a name. This way you know for certain whether you’ll get a NullPointerException when </span>
<span id="t13_291" class="t s2_291">dereferencing the name of an insurance company; you don’t have to add a null check because </span>
<span id="t14_291" class="t s2_291">doing so will just hide the problem instead of fixing it. An insurance company must have a name, </span>
<span id="t15_291" class="t s2_291">so if you find one without, you’ll have to work out what’s wrong in your data instead of adding a </span>
<span id="t16_291" class="t s2_291">piece of code covering up this circumstance. Using optionals consistently disambiguates beyond </span>
<span id="t17_291" class="t s2_291">any doubt the case of a value that can be structurally missing from the case of a value that’s </span>
<span id="t18_291" class="t s2_291">absent only because of a bug in your algorithm or a problem in your data. It’s important to note </span>
<span id="t19_291" class="t s2_291">that the intention of the Optional class is not to replace every single null reference. Instead, its </span>
<span id="t1a_291" class="t s2_291">purpose is to help you design more-comprehensible APIs so that by just reading the signature of </span>
<span id="t1b_291" class="t s7_291">www.it-ebooks.info </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
