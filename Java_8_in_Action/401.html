<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p401" style="overflow: hidden; position: relative; background-color: white; width: 909px; height: 1286px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_401{left:450px;bottom:46px;letter-spacing:-0.13px;}
#t2_401{left:65px;bottom:1188px;letter-spacing:0.15px;word-spacing:1.1px;}
#t3_401{left:65px;bottom:1159px;letter-spacing:0.19px;word-spacing:-0.05px;}
#t4_401{left:65px;bottom:1130px;letter-spacing:0.15px;word-spacing:-0.14px;}
#t5_401{left:65px;bottom:1079px;letter-spacing:0.15px;word-spacing:1.65px;}
#t6_401{left:65px;bottom:1050px;letter-spacing:0.16px;word-spacing:6.34px;}
#t7_401{left:65px;bottom:1021px;letter-spacing:0.16px;word-spacing:1.79px;}
#t8_401{left:65px;bottom:992px;letter-spacing:0.15px;word-spacing:2.73px;}
#t9_401{left:65px;bottom:963px;letter-spacing:0.14px;word-spacing:0.57px;}
#ta_401{left:65px;bottom:934px;letter-spacing:0.15px;word-spacing:4.13px;}
#tb_401{left:65px;bottom:905px;letter-spacing:0.15px;word-spacing:3.02px;}
#tc_401{left:65px;bottom:876px;letter-spacing:0.15px;word-spacing:0.16px;}
#td_401{left:65px;bottom:847px;letter-spacing:0.14px;word-spacing:2.89px;}
#te_401{left:65px;bottom:818px;letter-spacing:0.14px;word-spacing:0.92px;}
#tf_401{left:65px;bottom:789px;letter-spacing:0.15px;word-spacing:0.59px;}
#tg_401{left:65px;bottom:760px;letter-spacing:0.14px;word-spacing:1.66px;}
#th_401{left:65px;bottom:731px;letter-spacing:0.16px;word-spacing:2.13px;}
#ti_401{left:65px;bottom:702px;letter-spacing:0.16px;word-spacing:2.32px;}
#tj_401{left:65px;bottom:673px;letter-spacing:0.15px;word-spacing:1.01px;}
#tk_401{left:65px;bottom:644px;letter-spacing:0.14px;word-spacing:-0.14px;}
#tl_401{left:65px;bottom:593px;letter-spacing:0.17px;word-spacing:6.08px;}
#tm_401{left:65px;bottom:565px;letter-spacing:0.17px;word-spacing:3.65px;}
#tn_401{left:65px;bottom:535px;letter-spacing:0.14px;word-spacing:-0.14px;}
#to_401{left:65px;bottom:485px;letter-spacing:0.16px;word-spacing:0.74px;}
#tp_401{left:65px;bottom:456px;letter-spacing:0.16px;word-spacing:-0.2px;}
#tq_401{left:65px;bottom:396px;letter-spacing:0.23px;word-spacing:0.25px;}
#tr_401{left:65px;bottom:336px;letter-spacing:0.16px;word-spacing:3.36px;}
#ts_401{left:65px;bottom:307px;letter-spacing:0.16px;word-spacing:1.01px;}
#tt_401{left:251px;bottom:307px;letter-spacing:0.17px;word-spacing:1.29px;}
#tu_401{left:402px;bottom:307px;letter-spacing:0.16px;word-spacing:1.16px;}
#tv_401{left:65px;bottom:279px;letter-spacing:0.13px;word-spacing:-0.08px;}
#tw_401{left:156px;bottom:279px;letter-spacing:0.12px;word-spacing:0.07px;}
#tx_401{left:234px;bottom:279px;letter-spacing:0.15px;word-spacing:-0.11px;}
#ty_401{left:65px;bottom:228px;letter-spacing:0.12px;word-spacing:-0.13px;}
#tz_401{left:65px;bottom:199px;letter-spacing:0.15px;word-spacing:-0.21px;}
#t10_401{left:65px;bottom:149px;letter-spacing:0.15px;word-spacing:1.44px;}
#t11_401{left:65px;bottom:120px;letter-spacing:0.16px;word-spacing:4.91px;}
#t12_401{left:65px;bottom:91px;letter-spacing:0.14px;word-spacing:-0.07px;}
#t13_401{left:390px;bottom:3px;letter-spacing:0.13px;}

.s1_401{font-size:14px;font-family:TimesNewRomanPSMT_390;color:#000;}
.s2_401{font-size:18px;font-family:Georgia_397;color:#000;}
.s3_401{font-size:24px;font-family:Georgia-Bold_391;color:#000;}
.s4_401{font-size:18px;font-family:Georgia-Italic_395;color:#000;}
.s5_401{font-size:18px;font-family:Georgia_397;color:#00F;}
.s6_401{font-size:15px;font-family:Helvetica, Arial, sans-serif;color:#00F;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts401" type="text/css" >

@font-face {
	font-family: Georgia-Bold_391;
	src: url("fonts/Georgia-Bold_391.woff") format("woff");
}

@font-face {
	font-family: Georgia-Italic_395;
	src: url("fonts/Georgia-Italic_395.woff") format("woff");
}

@font-face {
	font-family: Georgia_397;
	src: url("fonts/Georgia_397.woff") format("woff");
}

@font-face {
	font-family: TimesNewRomanPSMT_390;
	src: url("fonts/TimesNewRomanPSMT_390.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg401Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg401" style="-webkit-user-select: none;"><object width="909" height="1286" data="401/401.svg" type="image/svg+xml" id="pdf401" style="width:909px; height:1286px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_401" class="t s1_401">401 </span>
<span id="t2_401" class="t s2_401">calculate eagerly) but that can be created on demand. This would be a lazy tree as opposed to a </span>
<span id="t3_401" class="t s2_401">lazy list. We concentrated on lazy lists because they provide a link back to another Java 8 feature, </span>
<span id="t4_401" class="t s2_401">streams, and we could then discuss the pros and cons of streams compared to lazy lists. </span>
<span id="t5_401" class="t s2_401">There remains the question of performance. It’s easy to assume that doing things lazily will be </span>
<span id="t6_401" class="t s2_401">better than doing things eagerly—surely it’s better to calculate only the values and data </span>
<span id="t7_401" class="t s2_401">structures needed by a program on demand than to create all those values (and perhaps some </span>
<span id="t8_401" class="t s2_401">more) as done under traditional execution. Unfortunately, the real world isn’t so simple. The </span>
<span id="t9_401" class="t s2_401">overhead of doing things lazily (for example, the additional Suppliers between each item in your </span>
<span id="ta_401" class="t s2_401">LazyList) outweighs the notional benefit unless you explore, say, less than 10% of the data </span>
<span id="tb_401" class="t s2_401">structure. Finally, there’s a subtle way in which your LazyList values aren’t truly lazy. If you </span>
<span id="tc_401" class="t s2_401">traverse a LazyList value such as from(2), perhaps up to the 10th item, then it also creates all the </span>
<span id="td_401" class="t s2_401">nodes twice, thus creating 20 nodes rather than 10. This is hardly lazy. The issue is that the </span>
<span id="te_401" class="t s2_401">Supplier in tail is repeatedly called on each on-demand exploration of the Lazy-List; you can fix </span>
<span id="tf_401" class="t s2_401">this by arranging that the Supplier in tail is called only on the first on-demand exploration—and </span>
<span id="tg_401" class="t s2_401">its resulting value is cached—in effect solidifying the list at that point. This can be achieved by </span>
<span id="th_401" class="t s2_401">adding a private Optional&lt;LazyList&lt;T&gt;&gt; alreadyComputed field to your definition of LazyList </span>
<span id="ti_401" class="t s2_401">and arranging for the method tail to consult and update it appropriately. The pure functional </span>
<span id="tj_401" class="t s2_401">language Haskell arranges that all its data structures are properly lazy in this latter sense. Read </span>
<span id="tk_401" class="t s2_401">one of the many articles on Haskell if you’re interested. </span>
<span id="tl_401" class="t s2_401">Our guideline is to remember that lazy data structures can be a useful weapon in your </span>
<span id="tm_401" class="t s2_401">programming armory. Use them when they make an application easier to program. Rewrite </span>
<span id="tn_401" class="t s2_401">them in more traditional style only if they cause unacceptable inefficiency. </span>
<span id="to_401" class="t s2_401">Now let’s turn to another feature of almost all functional programming languages but one that’s </span>
<span id="tp_401" class="t s2_401">lacking from Java: pattern matching. </span>
<span id="tq_401" class="t s3_401">14.4. Pattern matching </span>
<span id="tr_401" class="t s2_401">There’s one other important aspect to what’s generally regarded as functional programming, </span>
<span id="ts_401" class="t s2_401">and that’s (structural) </span><span id="tt_401" class="t s4_401">pattern matching </span><span id="tu_401" class="t s2_401">(not to be confused with pattern matching and regex). </span>
<span id="tv_401" class="t s2_401">Recall that </span><span id="tw_401" class="t s5_401">chapter 1 </span><span id="tx_401" class="t s2_401">ended by observing that mathematics can write definitions such as </span>
<span id="ty_401" class="t s2_401">f(0) = 1 </span>
<span id="tz_401" class="t s2_401">f(n) = n*f(n-1) otherwise </span>
<span id="t10_401" class="t s2_401">whereas in Java, you have to write an if-then-else or a switch statement. As data types become </span>
<span id="t11_401" class="t s2_401">more complex, the amount of code (and clutter) needed to process them increases. Using </span>
<span id="t12_401" class="t s2_401">pattern matching can reduce this clutter. </span>
<span id="t13_401" class="t s6_401">www.it-ebooks.info </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
