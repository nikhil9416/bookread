<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p243" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_243{left:87px;bottom:960px;letter-spacing:-0.13px;}
#t2_243{left:313px;bottom:961px;}
#t3_243{left:321px;bottom:962px;letter-spacing:-0.13px;}
#t4_243{left:361px;bottom:961px;}
#t5_243{left:380px;bottom:960px;letter-spacing:-0.12px;word-spacing:0.01px;}
#t6_243{left:172px;bottom:921px;letter-spacing:0.13px;word-spacing:0.01px;}
#t7_243{left:260px;bottom:906px;letter-spacing:0.14px;}
#t8_243{left:260px;bottom:890px;letter-spacing:0.14px;}
#t9_243{left:480px;bottom:875px;letter-spacing:0.13px;word-spacing:0.01px;}
#ta_243{left:274px;bottom:860px;letter-spacing:0.14px;}
#tb_243{left:260px;bottom:844px;}
#tc_243{left:245px;bottom:829px;}
#td_243{left:172px;bottom:814px;letter-spacing:0.14px;}
#te_243{left:157px;bottom:799px;}
#tf_243{left:142px;bottom:783px;}
#tg_243{left:142px;bottom:743px;letter-spacing:-0.03px;}
#th_243{left:172px;bottom:744px;letter-spacing:0.06px;}
#ti_243{left:261px;bottom:743px;letter-spacing:-0.06px;word-spacing:-0.05px;}
#tj_243{left:347px;bottom:744px;letter-spacing:0.05px;}
#tk_243{left:424px;bottom:743px;letter-spacing:-0.04px;word-spacing:-0.11px;}
#tl_243{left:142px;bottom:723px;letter-spacing:-0.04px;word-spacing:-0.44px;}
#tm_243{left:230px;bottom:724px;letter-spacing:0.05px;}
#tn_243{left:337px;bottom:723px;letter-spacing:-0.03px;word-spacing:-0.41px;}
#to_243{left:551px;bottom:724px;letter-spacing:0.05px;}
#tp_243{left:669px;bottom:723px;letter-spacing:0.1px;word-spacing:-0.4px;}
#tq_243{left:142px;bottom:704px;letter-spacing:0.13px;word-spacing:-0.02px;}
#tr_243{left:413px;bottom:704px;letter-spacing:0.21px;}
#ts_243{left:487px;bottom:704px;letter-spacing:0.12px;}
#tt_243{left:165px;bottom:684px;letter-spacing:-0.03px;word-spacing:0.2px;}
#tu_243{left:329px;bottom:684px;letter-spacing:0.05px;}
#tv_243{left:517px;bottom:684px;letter-spacing:-0.02px;word-spacing:0.21px;}
#tw_243{left:142px;bottom:664px;letter-spacing:0.22px;}
#tx_243{left:311px;bottom:664px;letter-spacing:0.11px;word-spacing:0.55px;}
#ty_243{left:142px;bottom:644px;letter-spacing:0.08px;}
#tz_243{left:168px;bottom:644px;letter-spacing:0.22px;}
#t10_243{left:312px;bottom:644px;letter-spacing:0.11px;word-spacing:-0.13px;}
#t11_243{left:390px;bottom:644px;letter-spacing:0.22px;}
#t12_243{left:480px;bottom:644px;letter-spacing:0.12px;word-spacing:-0.13px;}
#t13_243{left:142px;bottom:624px;letter-spacing:0.13px;}
#t14_243{left:142px;bottom:594px;letter-spacing:0.13px;}
#t15_243{left:142px;bottom:579px;letter-spacing:0.13px;}
#t16_243{left:260px;bottom:563px;letter-spacing:0.14px;}
#t17_243{left:142px;bottom:548px;letter-spacing:0.14px;}
#t18_243{left:142px;bottom:533px;letter-spacing:0.14px;}
#t19_243{left:157px;bottom:502px;letter-spacing:0.14px;}
#t1a_243{left:157px;bottom:487px;letter-spacing:0.14px;}
#t1b_243{left:157px;bottom:456px;letter-spacing:0.14px;}
#t1c_243{left:216px;bottom:441px;letter-spacing:0.14px;}
#t1d_243{left:216px;bottom:426px;letter-spacing:0.14px;}
#t1e_243{left:172px;bottom:411px;letter-spacing:0.13px;word-spacing:0.01px;}
#t1f_243{left:172px;bottom:395px;letter-spacing:0.13px;word-spacing:0.01px;}
#t1g_243{left:157px;bottom:380px;}
#t1h_243{left:157px;bottom:350px;letter-spacing:0.14px;}
#t1i_243{left:157px;bottom:334px;letter-spacing:0.13px;}
#t1j_243{left:157px;bottom:319px;letter-spacing:0.13px;word-spacing:0.01px;}
#t1k_243{left:172px;bottom:304px;letter-spacing:0.13px;}
#t1l_243{left:172px;bottom:288px;letter-spacing:0.14px;}
#t1m_243{left:157px;bottom:273px;}
#t1n_243{left:157px;bottom:243px;letter-spacing:0.14px;}
#t1o_243{left:142px;bottom:212px;}
#t1p_243{left:142px;bottom:172px;letter-spacing:0.13px;word-spacing:0.21px;}
#t1q_243{left:142px;bottom:152px;letter-spacing:0.12px;word-spacing:1.09px;}
#t1r_243{left:142px;bottom:132px;letter-spacing:0.12px;word-spacing:2.12px;}
#t1s_243{left:142px;bottom:112px;letter-spacing:0.13px;word-spacing:0.17px;}
#t1t_243{left:142px;bottom:92px;letter-spacing:-0.06px;}
#t1u_243{left:283px;bottom:92px;letter-spacing:0.11px;word-spacing:0.03px;}

.s1_243{font-size:14px;font-family:NewBaskerville-Bold_h-a;color:#000;}
.s2_243{font-size:12px;font-family:FranklinGothic-Demi_ib4;color:#656565;}
.s3_243{font-size:10px;font-family:FranklinGothic-Demi_ib4;color:#656565;}
.s4_243{font-size:14px;font-family:NewBaskerville-BoldItalic_h-c;color:#656565;}
.s5_243{font-size:12px;font-family:Courier_h-e;color:#252525;}
.s6_243{font-size:15px;font-family:NewBaskerville-Roman_ib3;color:#252525;}
.s7_243{font-size:14px;font-family:Courier_h-e;color:#252525;}
.s8_243{font-size:15px;font-family:NewBaskerville-Roman_ib3;color:#001CA6;}
.t.v0_243{transform:scaleX(0.907);}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts243" type="text/css" >

@font-face {
	font-family: Courier_h-e;
	src: url("fonts/Courier_h-e.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_ib4;
	src: url("fonts/FranklinGothic-Demi_ib4.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_h-c;
	src: url("fonts/NewBaskerville-BoldItalic_h-c.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_h-a;
	src: url("fonts/NewBaskerville-Bold_h-a.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_ib3;
	src: url("fonts/NewBaskerville-Roman_ib3.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg243Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg243" style="-webkit-user-select: none;"><object width="811" height="1017" data="243/243.svg" type="image/svg+xml" id="pdf243" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_243" class="t s1_243">216 </span><span id="t2_243" class="t s2_243">C</span><span id="t3_243" class="t s3_243">HAPTER </span><span id="t4_243" class="t s2_243">9 </span><span id="t5_243" class="t s4_243">Sending messages asynchronously </span>
<span id="t6_243" class="t s5_243">jms.send(new MessageCreator() { </span>
<span id="t7_243" class="t s5_243">@Override </span>
<span id="t8_243" class="t s5_243">public Message createMessage(Session session) </span>
<span id="t9_243" class="t s5_243">throws JMSException { </span>
<span id="ta_243" class="t s5_243">return session.createObjectMessage(order); </span>
<span id="tb_243" class="t s5_243">} </span>
<span id="tc_243" class="t s5_243">} </span>
<span id="td_243" class="t s5_243">); </span>
<span id="te_243" class="t s5_243">} </span>
<span id="tf_243" class="t s5_243">} </span>
<span id="tg_243" class="t s6_243">The </span><span id="th_243" class="t v0_243 s7_243">sendOrder() </span><span id="ti_243" class="t s6_243">method calls </span><span id="tj_243" class="t v0_243 s7_243">jms.send()</span><span id="tk_243" class="t s6_243">, passing in an anonymous inner-class imple- </span>
<span id="tl_243" class="t s6_243">mentation of </span><span id="tm_243" class="t v0_243 s7_243">MessageCreator</span><span id="tn_243" class="t s6_243">. That implementation overrides </span><span id="to_243" class="t v0_243 s7_243">createMessage() </span><span id="tp_243" class="t s6_243">to cre- </span>
<span id="tq_243" class="t s6_243">ate a new object message from the given </span><span id="tr_243" class="t v0_243 s7_243">TacoOrder </span><span id="ts_243" class="t s6_243">object. </span>
<span id="tt_243" class="t s6_243">Because the JMS-specific </span><span id="tu_243" class="t v0_243 s7_243">JmsOrderMessagingService </span><span id="tv_243" class="t s6_243">implements the more generic </span>
<span id="tw_243" class="t v0_243 s7_243">OrderMessagingService </span><span id="tx_243" class="t s6_243">interface, we can put this service to work by injecting it into </span>
<span id="ty_243" class="t s6_243">the </span><span id="tz_243" class="t v0_243 s7_243">OrderApiController </span><span id="t10_243" class="t s6_243">and calling </span><span id="t11_243" class="t v0_243 s7_243">sendOrder() </span><span id="t12_243" class="t s6_243">when an order is created, as shown </span>
<span id="t13_243" class="t s6_243">here: </span>
<span id="t14_243" class="t s5_243">@RestController </span>
<span id="t15_243" class="t s5_243">@RequestMapping(path="/api/orders", </span>
<span id="t16_243" class="t s5_243">produces="application/json") </span>
<span id="t17_243" class="t s5_243">@CrossOrigin(origins="http://localhost:8080") </span>
<span id="t18_243" class="t s5_243">public class OrderApiController { </span>
<span id="t19_243" class="t s5_243">private OrderRepository repo; </span>
<span id="t1a_243" class="t s5_243">private OrderMessagingService messageService; </span>
<span id="t1b_243" class="t s5_243">public OrderApiController( </span>
<span id="t1c_243" class="t s5_243">OrderRepository repo, </span>
<span id="t1d_243" class="t s5_243">OrderMessagingService messageService) { </span>
<span id="t1e_243" class="t s5_243">this.repo = repo; </span>
<span id="t1f_243" class="t s5_243">this.messageService = messageService; </span>
<span id="t1g_243" class="t s5_243">} </span>
<span id="t1h_243" class="t s5_243">@PostMapping(consumes="application/json") </span>
<span id="t1i_243" class="t s5_243">@ResponseStatus(HttpStatus.CREATED) </span>
<span id="t1j_243" class="t s5_243">public TacoOrder postOrder(@RequestBody TacoOrder order) { </span>
<span id="t1k_243" class="t s5_243">messageService.sendOrder(order); </span>
<span id="t1l_243" class="t s5_243">return repo.save(order); </span>
<span id="t1m_243" class="t s5_243">} </span>
<span id="t1n_243" class="t s5_243">... </span>
<span id="t1o_243" class="t s5_243">} </span>
<span id="t1p_243" class="t s6_243">Now when you create an order through the Taco Cloud website, a message should be </span>
<span id="t1q_243" class="t s6_243">sent to the broker for routing to another application that will receive the order. We </span>
<span id="t1r_243" class="t s6_243">don’t yet have anything to receive that message, though. Even so, you can use the </span>
<span id="t1s_243" class="t s6_243">Artemis console to view the contents of the queue. See the Artemis documentation at </span>
<span id="t1t_243" class="t s8_243">http://mng.bz/aZx9 </span><span id="t1u_243" class="t s6_243">for details on how to do this. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
