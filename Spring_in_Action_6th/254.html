<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p254" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_254{left:703px;bottom:960px;letter-spacing:-0.13px;}
#t2_254{left:299px;bottom:961px;letter-spacing:-0.13px;word-spacing:0.01px;}
#t3_254{left:180px;bottom:919px;}
#t4_254{left:198px;bottom:917px;letter-spacing:0.11px;}
#t5_254{left:234px;bottom:917px;letter-spacing:0.13px;word-spacing:0.86px;}
#t6_254{left:198px;bottom:898px;letter-spacing:0.12px;word-spacing:-0.04px;}
#t7_254{left:180px;bottom:877px;}
#t8_254{left:198px;bottom:876px;letter-spacing:0.11px;}
#t9_254{left:233px;bottom:876px;letter-spacing:0.12px;word-spacing:0.23px;}
#ta_254{left:198px;bottom:856px;letter-spacing:0.13px;word-spacing:-0.05px;}
#tb_254{left:180px;bottom:836px;}
#tc_254{left:198px;bottom:835px;letter-spacing:0.15px;}
#td_254{left:242px;bottom:835px;letter-spacing:0.12px;word-spacing:0.77px;}
#te_254{left:198px;bottom:815px;letter-spacing:0.11px;word-spacing:-0.04px;}
#tf_254{left:180px;bottom:795px;}
#tg_254{left:198px;bottom:794px;letter-spacing:0.11px;}
#th_254{left:248px;bottom:794px;letter-spacing:0.13px;word-spacing:0.77px;}
#ti_254{left:198px;bottom:774px;letter-spacing:0.11px;word-spacing:0.02px;}
#tj_254{left:180px;bottom:754px;}
#tk_254{left:198px;bottom:752px;letter-spacing:0.11px;word-spacing:1.52px;}
#tl_254{left:264px;bottom:752px;letter-spacing:0.12px;word-spacing:1.53px;}
#tm_254{left:198px;bottom:733px;letter-spacing:0.12px;word-spacing:-0.02px;}
#tn_254{left:156px;bottom:705px;letter-spacing:0.13px;word-spacing:1.2px;}
#to_254{left:156px;bottom:685px;letter-spacing:0.12px;word-spacing:0.48px;}
#tp_254{left:156px;bottom:665px;letter-spacing:0.13px;word-spacing:-0.05px;}
#tq_254{left:180px;bottom:646px;letter-spacing:0.13px;word-spacing:1.53px;}
#tr_254{left:156px;bottom:626px;letter-spacing:-0.02px;word-spacing:0.52px;}
#ts_254{left:156px;bottom:606px;letter-spacing:-0.03px;word-spacing:-0.01px;}
#tt_254{left:178px;bottom:586px;letter-spacing:0.13px;word-spacing:-0.04px;}
#tu_254{left:156px;bottom:566px;letter-spacing:0.12px;word-spacing:0.21px;}
#tv_254{left:156px;bottom:546px;letter-spacing:0.12px;word-spacing:0.36px;}
#tw_254{left:156px;bottom:526px;letter-spacing:0.11px;word-spacing:0.06px;}
#tx_254{left:174px;bottom:495px;letter-spacing:-0.21px;}
#ty_254{left:220px;bottom:494px;letter-spacing:-0.09px;word-spacing:-0.22px;}
#tz_254{left:174px;bottom:476px;letter-spacing:0.07px;}
#t10_254{left:199px;bottom:476px;letter-spacing:0.14px;word-spacing:-0.14px;}
#t11_254{left:321px;bottom:476px;letter-spacing:0.13px;word-spacing:-0.13px;}
#t12_254{left:547px;bottom:476px;letter-spacing:0.13px;word-spacing:-0.14px;}
#t13_254{left:673px;bottom:476px;letter-spacing:0.11px;}
#t14_254{left:174px;bottom:458px;letter-spacing:0.12px;word-spacing:0.02px;}
#t15_254{left:101px;bottom:425px;letter-spacing:-0.47px;}
#t16_254{left:156px;bottom:425px;letter-spacing:0.02px;word-spacing:-0.07px;}
#t17_254{left:156px;bottom:400px;letter-spacing:0.12px;word-spacing:2.09px;}
#t18_254{left:156px;bottom:380px;letter-spacing:0.13px;word-spacing:1.76px;}
#t19_254{left:156px;bottom:360px;letter-spacing:0.13px;word-spacing:-0.03px;}
#t1a_254{left:156px;bottom:333px;letter-spacing:0.13px;}
#t1b_254{left:185px;bottom:317px;letter-spacing:0.14px;}
#t1c_254{left:185px;bottom:302px;letter-spacing:0.14px;}
#t1d_254{left:156px;bottom:287px;letter-spacing:0.13px;}
#t1e_254{left:156px;bottom:250px;letter-spacing:0.12px;word-spacing:0.58px;}
#t1f_254{left:156px;bottom:230px;letter-spacing:0.13px;word-spacing:0.46px;}
#t1g_254{left:385px;bottom:230px;letter-spacing:0.22px;}
#t1h_254{left:499px;bottom:230px;letter-spacing:0.11px;word-spacing:0.46px;}
#t1i_254{left:156px;bottom:210px;letter-spacing:0.13px;word-spacing:-0.3px;}
#t1j_254{left:156px;bottom:190px;letter-spacing:0.13px;word-spacing:0.95px;}
#t1k_254{left:156px;bottom:170px;letter-spacing:0.11px;word-spacing:0.02px;}
#t1l_254{left:179px;bottom:151px;letter-spacing:0.13px;word-spacing:0.84px;}
#t1m_254{left:156px;bottom:131px;letter-spacing:0.12px;word-spacing:0.33px;}
#t1n_254{left:156px;bottom:111px;letter-spacing:0.12px;word-spacing:0.76px;}
#t1o_254{left:156px;bottom:91px;letter-spacing:0.14px;word-spacing:-0.02px;}

.s1_254{font-size:14px;font-family:NewBaskerville-Bold_h-a;color:#000;}
.s2_254{font-size:14px;font-family:NewBaskerville-BoldItalic_h-c;color:#656565;}
.s3_254{font-size:13px;font-family:Wingdings2_hia;color:#CCA659;}
.s4_254{font-size:15px;font-family:NewBaskerville-Italic_ib2;color:#252525;}
.s5_254{font-size:15px;font-family:NewBaskerville-Roman_ib3;color:#252525;}
.s6_254{font-size:13px;font-family:FranklinGothic-Demi_ib4;color:#476B85;}
.s7_254{font-size:16px;font-family:FranklinGothic-DemiItal_ib5;color:#476B85;}
.s8_254{font-size:12px;font-family:Courier_h-e;color:#252525;}
.s9_254{font-size:14px;font-family:Courier_h-e;color:#252525;}
.t.v0_254{transform:scaleX(0.907);}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts254" type="text/css" >

@font-face {
	font-family: Courier_h-e;
	src: url("fonts/Courier_h-e.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-DemiItal_ib5;
	src: url("fonts/FranklinGothic-DemiItal_ib5.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_ib4;
	src: url("fonts/FranklinGothic-Demi_ib4.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_h-c;
	src: url("fonts/NewBaskerville-BoldItalic_h-c.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_h-a;
	src: url("fonts/NewBaskerville-Bold_h-a.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Italic_ib2;
	src: url("fonts/NewBaskerville-Italic_ib2.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_ib3;
	src: url("fonts/NewBaskerville-Roman_ib3.woff") format("woff");
}

@font-face {
	font-family: Wingdings2_hia;
	src: url("fonts/Wingdings2_hia.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg254Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg254" style="-webkit-user-select: none;"><object width="811" height="1017" data="254/254.svg" type="image/svg+xml" id="pdf254" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_254" class="t s1_254">227 </span><span id="t2_254" class="t s2_254">Working with RabbitMQ and AMQP </span>
<span id="t3_254" class="t s3_254"> </span><span id="t4_254" class="t s4_254">Direct </span><span id="t5_254" class="t s5_254">—Routes messages to a queue whose binding key is the same as the mes- </span>
<span id="t6_254" class="t s5_254">sage’s routing key. </span>
<span id="t7_254" class="t s3_254"> </span><span id="t8_254" class="t s4_254">Topic </span><span id="t9_254" class="t s5_254">—Routes a message to one or more queues where the binding key (which </span>
<span id="ta_254" class="t s5_254">may contain wildcards) matches the message’s routing key. </span>
<span id="tb_254" class="t s3_254"> </span><span id="tc_254" class="t s4_254">Fanout </span><span id="td_254" class="t s5_254">—Routes messages to all bound queues without regard for binding keys </span>
<span id="te_254" class="t s5_254">or routing keys. </span>
<span id="tf_254" class="t s3_254"> </span><span id="tg_254" class="t s4_254">Headers </span><span id="th_254" class="t s5_254">—Similar to a topic exchange, except that routing is based on message </span>
<span id="ti_254" class="t s5_254">header values rather than routing keys. </span>
<span id="tj_254" class="t s3_254"> </span><span id="tk_254" class="t s4_254">Dead letter </span><span id="tl_254" class="t s5_254">—A catchall for any messages that are undeliverable (meaning they </span>
<span id="tm_254" class="t s5_254">don’t match any defined exchange-to-queue binding). </span>
<span id="tn_254" class="t s5_254">The simplest forms of exchanges are default and fanout—these roughly correspond </span>
<span id="to_254" class="t s5_254">to a JMS queue and topic. But the other exchanges allow you to define more flexible </span>
<span id="tp_254" class="t s5_254">routing schemes. </span>
<span id="tq_254" class="t s5_254">The most important thing to understand is that messages are sent to exchanges </span>
<span id="tr_254" class="t s5_254">with routing keys and they’re consumed from queues. How they get from an exchange </span>
<span id="ts_254" class="t s5_254">to a queue depends on the binding definitions and what best suits your use cases. </span>
<span id="tt_254" class="t s5_254">Which exchange type you use and how you define the bindings from exchanges to </span>
<span id="tu_254" class="t s5_254">queues has little bearing on how messages are sent and received in your Spring appli- </span>
<span id="tv_254" class="t s5_254">cations. Therefore, we’ll focus on how to write code that sends and receives messages </span>
<span id="tw_254" class="t s5_254">with Rabbit. </span>
<span id="tx_254" class="t s6_254">NOTE </span><span id="ty_254" class="t s5_254">For a more detailed discussion on how best to bind queues to exchanges, </span>
<span id="tz_254" class="t s5_254">see </span><span id="t10_254" class="t s4_254">RabbitMQ in Depth </span><span id="t11_254" class="t s5_254">by Gavin Roy (Manning, 2017) or </span><span id="t12_254" class="t s4_254">RabbitMQ in Action </span><span id="t13_254" class="t s5_254">by </span>
<span id="t14_254" class="t s5_254">Alvaro Videla and Jason J. W. Williams (Manning, 2012). </span>
<span id="t15_254" class="t s7_254">9.2.1 </span><span id="t16_254" class="t s7_254">Adding RabbitMQ to Spring </span>
<span id="t17_254" class="t s5_254">Before you can start sending and receiving RabbitMQ messages with Spring, you’ll </span>
<span id="t18_254" class="t s5_254">need to add Spring Boot’s AMQP starter dependency to your build in place of the </span>
<span id="t19_254" class="t s5_254">Artemis or ActiveMQ starter you added in the previous section, as shown here: </span>
<span id="t1a_254" class="t s8_254">&lt;dependency&gt; </span>
<span id="t1b_254" class="t s8_254">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; </span>
<span id="t1c_254" class="t s8_254">&lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; </span>
<span id="t1d_254" class="t s8_254">&lt;/dependency&gt; </span>
<span id="t1e_254" class="t s5_254">Adding the AMQP starter to your build will trigger autoconfiguration that will create </span>
<span id="t1f_254" class="t s5_254">an AMQP connection factory and </span><span id="t1g_254" class="t v0_254 s9_254">RabbitTemplate </span><span id="t1h_254" class="t s5_254">beans, as well as other supporting </span>
<span id="t1i_254" class="t s5_254">components. Simply adding this dependency is all you need to do to start sending and </span>
<span id="t1j_254" class="t s5_254">receiving messages from a RabbitMQ broker with Spring. But there are a handful of </span>
<span id="t1k_254" class="t s5_254">useful properties you’ll want to know about, listed in table 9.4. </span>
<span id="t1l_254" class="t s5_254">For development purposes, you’ll probably have a RabbitMQ broker that doesn’t </span>
<span id="t1m_254" class="t s5_254">require authentication running on your local machine, listening on port 5672. These </span>
<span id="t1n_254" class="t s5_254">properties likely won’t get much use while you’re still in development, but they’ll no </span>
<span id="t1o_254" class="t s5_254">doubt prove useful when your applications move into production. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
