<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p157" style="overflow: hidden; position: relative; background-color: white; width: 809px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_157{left:109px;bottom:955px;letter-spacing:0.11px;word-spacing:0.05px;}
#t2_157{left:184px;bottom:955px;letter-spacing:0.13px;}
#t3_157{left:59px;bottom:952px;letter-spacing:0.11px;}
#t4_157{left:109px;bottom:902px;letter-spacing:-0.11px;word-spacing:1.53px;}
#t5_157{left:109px;bottom:881px;letter-spacing:-0.09px;word-spacing:0.02px;}
#t6_157{left:137px;bottom:853px;letter-spacing:-0.17px;word-spacing:0.04px;}
#t7_157{left:137px;bottom:837px;letter-spacing:-0.16px;}
#t8_157{left:170px;bottom:820px;letter-spacing:-0.16px;word-spacing:0.03px;}
#t9_157{left:170px;bottom:803px;letter-spacing:-0.16px;word-spacing:0.02px;}
#ta_157{left:170px;bottom:786px;letter-spacing:-0.16px;word-spacing:0.01px;}
#tb_157{left:170px;bottom:769px;letter-spacing:-0.16px;}
#tc_157{left:137px;bottom:753px;}
#td_157{left:109px;bottom:723px;letter-spacing:-0.1px;word-spacing:1.2px;}
#te_157{left:364px;bottom:725px;letter-spacing:-0.15px;}
#tf_157{left:410px;bottom:725px;letter-spacing:-0.18px;}
#tg_157{left:449px;bottom:725px;letter-spacing:-0.16px;}
#th_157{left:504px;bottom:725px;letter-spacing:-0.16px;}
#ti_157{left:559px;bottom:725px;letter-spacing:-0.16px;}
#tj_157{left:614px;bottom:725px;letter-spacing:-0.15px;}
#tk_157{left:655px;bottom:723px;}
#tl_157{left:109px;bottom:702px;letter-spacing:-0.08px;word-spacing:-0.01px;}
#tm_157{left:137px;bottom:680px;letter-spacing:-0.08px;word-spacing:0.27px;}
#tn_157{left:266px;bottom:682px;letter-spacing:-0.15px;}
#to_157{left:312px;bottom:680px;letter-spacing:-0.08px;word-spacing:0.27px;}
#tp_157{left:109px;bottom:659px;letter-spacing:-0.14px;word-spacing:1.25px;}
#tq_157{left:109px;bottom:638px;letter-spacing:-0.09px;word-spacing:-0.03px;}
#tr_157{left:319px;bottom:638px;letter-spacing:-0.11px;word-spacing:-0.05px;}
#ts_157{left:483px;bottom:638px;letter-spacing:-0.09px;word-spacing:-0.02px;}
#tt_157{left:137px;bottom:616px;letter-spacing:-0.1px;word-spacing:5.53px;}
#tu_157{left:109px;bottom:595px;letter-spacing:-0.1px;word-spacing:0.67px;}
#tv_157{left:109px;bottom:573px;letter-spacing:-0.09px;word-spacing:0.55px;}
#tw_157{left:109px;bottom:552px;letter-spacing:-0.09px;word-spacing:-0.19px;}
#tx_157{left:109px;bottom:531px;letter-spacing:-0.09px;word-spacing:-0.18px;}
#ty_157{left:489px;bottom:531px;letter-spacing:-0.09px;word-spacing:-0.2px;}
#tz_157{left:655px;bottom:531px;}
#t10_157{left:109px;bottom:509px;letter-spacing:-0.09px;word-spacing:1.31px;}
#t11_157{left:427px;bottom:511px;letter-spacing:-0.16px;}
#t12_157{left:625px;bottom:509px;letter-spacing:-0.1px;word-spacing:1.49px;}
#t13_157{left:109px;bottom:488px;letter-spacing:-0.08px;word-spacing:-0.01px;}
#t14_157{left:351px;bottom:489px;letter-spacing:-0.16px;}
#t15_157{left:516px;bottom:488px;}
#t16_157{left:137px;bottom:467px;letter-spacing:-0.11px;word-spacing:1.68px;}
#t17_157{left:109px;bottom:445px;letter-spacing:-0.13px;}
#t18_157{left:166px;bottom:447px;letter-spacing:-0.16px;}
#t19_157{left:306px;bottom:445px;letter-spacing:-0.12px;word-spacing:1.76px;}
#t1a_157{left:109px;bottom:424px;letter-spacing:-0.11px;word-spacing:1.05px;}
#t1b_157{left:109px;bottom:402px;letter-spacing:-0.13px;word-spacing:1.64px;}
#t1c_157{left:109px;bottom:381px;letter-spacing:-0.11px;word-spacing:3.21px;}
#t1d_157{left:109px;bottom:360px;letter-spacing:-0.14px;word-spacing:0.06px;}
#t1e_157{left:137px;bottom:332px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t1f_157{left:137px;bottom:316px;letter-spacing:-0.16px;word-spacing:0.01px;}
#t1g_157{left:137px;bottom:282px;letter-spacing:-0.16px;}
#t1h_157{left:137px;bottom:265px;letter-spacing:-0.16px;word-spacing:-0.02px;}
#t1i_157{left:170px;bottom:248px;letter-spacing:-0.16px;}
#t1j_157{left:228px;bottom:248px;letter-spacing:-0.16px;}
#t1k_157{left:385px;bottom:248px;letter-spacing:-0.16px;}
#t1l_157{left:137px;bottom:232px;}
#t1m_157{left:137px;bottom:192px;letter-spacing:-0.07px;word-spacing:2.34px;}
#t1n_157{left:223px;bottom:193px;letter-spacing:-0.17px;}
#t1o_157{left:320px;bottom:192px;letter-spacing:-0.03px;}
#t1p_157{left:340px;bottom:193px;letter-spacing:-0.16px;}
#t1q_157{left:495px;bottom:192px;letter-spacing:-0.11px;word-spacing:2.42px;}
#t1r_157{left:109px;bottom:170px;letter-spacing:-0.1px;word-spacing:1.23px;}
#t1s_157{left:225px;bottom:172px;letter-spacing:-0.16px;}
#t1t_157{left:404px;bottom:170px;letter-spacing:-0.08px;word-spacing:1.26px;}
#t1u_157{left:460px;bottom:172px;letter-spacing:-0.16px;}
#t1v_157{left:598px;bottom:170px;letter-spacing:-0.19px;word-spacing:1.31px;}
#t1w_157{left:109px;bottom:150px;}
#t1x_157{left:116px;bottom:149px;letter-spacing:-0.09px;word-spacing:1.47px;}
#t1y_157{left:109px;bottom:127px;letter-spacing:-0.09px;word-spacing:0.23px;}
#t1z_157{left:358px;bottom:129px;letter-spacing:-0.16px;}
#t20_157{left:490px;bottom:127px;letter-spacing:-0.14px;word-spacing:0.31px;}
#t21_157{left:648px;bottom:129px;}
#t22_157{left:655px;bottom:127px;}

.s1_157{font-size:12px;font-family:NLEJCL-2bTimes-2dItalic_6pw;color:#000;}
.s2_157{font-size:15px;font-family:NLEJCK-2bTimes-2dRoman_6ps;color:#000;}
.s3_157{font-size:17px;font-family:NLEJCK-2bTimes-2dRoman_6ps;color:#000;}
.s4_157{font-size:14px;font-family:NLEMHM-2bLucidaSans-2dTypew_6qf;color:#000;}
.s5_157{font-size:14px;font-family:NLEKDK-2bLucidaSans-2dTypew_6pu;color:#000;}
.s6_157{font-size:17px;font-family:NLEJCL-2bTimes-2dItalic_6pw;color:#000;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts157" type="text/css" >

@font-face {
	font-family: NLEJCK-2bTimes-2dRoman_6ps;
	src: url("fonts/NLEJCK-2bTimes-2dRoman_6ps.woff") format("woff");
}

@font-face {
	font-family: NLEJCL-2bTimes-2dItalic_6pw;
	src: url("fonts/NLEJCL-2bTimes-2dItalic_6pw.woff") format("woff");
}

@font-face {
	font-family: NLEKDK-2bLucidaSans-2dTypew_6pu;
	src: url("fonts/NLEKDK-2bLucidaSans-2dTypew_6pu.woff") format("woff");
}

@font-face {
	font-family: NLEMHM-2bLucidaSans-2dTypew_6qf;
	src: url("fonts/NLEMHM-2bLucidaSans-2dTypew_6qf.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg157Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg157" style="-webkit-user-select: none;"><object width="809" height="1017" data="157/157.svg" type="image/svg+xml" id="pdf157" style="width:809px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_157" class="t s1_157">CHAPTER 5 </span><span id="t2_157" class="t s1_157">GENERICS </span>
<span id="t3_157" class="t s2_157">136 </span>
<span id="t4_157" class="t s3_157">use. Here’s a simple program to exercise the method. This program contains no </span>
<span id="t5_157" class="t s3_157">casts and compiles without errors or warnings: </span>
<span id="t6_157" class="t s4_157">// Simple program to exercise generic method </span>
<span id="t7_157" class="t s5_157">public static void main(String[] args) { </span>
<span id="t8_157" class="t s5_157">Set&lt;String&gt; guys = Set.of("Tom", "Dick", "Harry"); </span>
<span id="t9_157" class="t s5_157">Set&lt;String&gt; stooges = Set.of("Larry", "Moe", "Curly"); </span>
<span id="ta_157" class="t s5_157">Set&lt;String&gt; aflCio = union(guys, stooges); </span>
<span id="tb_157" class="t s5_157">System.out.println(aflCio); </span>
<span id="tc_157" class="t s5_157">} </span>
<span id="td_157" class="t s3_157">When you run the program, it prints </span><span id="te_157" class="t s5_157">[Moe, </span><span id="tf_157" class="t s5_157">Tom, </span><span id="tg_157" class="t s5_157">Harry, </span><span id="th_157" class="t s5_157">Larry, </span><span id="ti_157" class="t s5_157">Curly, </span><span id="tj_157" class="t s5_157">Dick]</span><span id="tk_157" class="t s3_157">. </span>
<span id="tl_157" class="t s3_157">(The order of the elements in the output is implementation-dependent.) </span>
<span id="tm_157" class="t s3_157">A limitation of the </span><span id="tn_157" class="t s5_157">union </span><span id="to_157" class="t s3_157">method is that the types of all three sets (both input </span>
<span id="tp_157" class="t s3_157">parameters and the return value) have to be exactly the same. You can make the </span>
<span id="tq_157" class="t s3_157">method more flexible by using </span><span id="tr_157" class="t s6_157">bounded wildcard types </span><span id="ts_157" class="t s3_157">(Item 31). </span>
<span id="tt_157" class="t s3_157">On occasion, you will need to create an object that is immutable but </span>
<span id="tu_157" class="t s3_157">applicable to many different types. Because generics are implemented by erasure </span>
<span id="tv_157" class="t s3_157">(Item 28), you can use a single object for all required type parameterizations, but </span>
<span id="tw_157" class="t s3_157">you need to write a static factory method to repeatedly dole out the object for each </span>
<span id="tx_157" class="t s3_157">requested type parameterization. This pattern, called the </span><span id="ty_157" class="t s6_157">generic singleton factory </span><span id="tz_157" class="t s3_157">, </span>
<span id="t10_157" class="t s3_157">is used for function objects (Item 42) such as </span><span id="t11_157" class="t s5_157">Collections.reverseOrder</span><span id="t12_157" class="t s3_157">, and </span>
<span id="t13_157" class="t s3_157">occasionally for collections such as </span><span id="t14_157" class="t s5_157">Collections.emptySet</span><span id="t15_157" class="t s3_157">. </span>
<span id="t16_157" class="t s3_157">Suppose that you want to write an identity function dispenser. The libraries </span>
<span id="t17_157" class="t s3_157">provide </span><span id="t18_157" class="t s5_157">Function.identity </span><span id="t19_157" class="t s3_157">, so there’s no reason to write your own (Item 59), </span>
<span id="t1a_157" class="t s3_157">but it is instructive. It would be wasteful to create a new identity function object </span>
<span id="t1b_157" class="t s3_157">time one is requested, because it’s stateless. If Java’s generics were reified, you </span>
<span id="t1c_157" class="t s3_157">would need one identity function per type, but since they’re erased a generic </span>
<span id="t1d_157" class="t s3_157">singleton will suffice. Here’s how it looks: </span>
<span id="t1e_157" class="t s4_157">// Generic singleton factory pattern </span>
<span id="t1f_157" class="t s5_157">private static UnaryOperator&lt;Object&gt; IDENTITY_FN = (t) -&gt; t; </span>
<span id="t1g_157" class="t s4_157">@SuppressWarnings("unchecked") </span>
<span id="t1h_157" class="t s5_157">public static &lt;T&gt; UnaryOperator&lt;T&gt; identityFunction() { </span>
<span id="t1i_157" class="t s5_157">return </span><span id="t1j_157" class="t s4_157">(UnaryOperator&lt;T&gt;) </span><span id="t1k_157" class="t s5_157">IDENTITY_FN; </span>
<span id="t1l_157" class="t s5_157">} </span>
<span id="t1m_157" class="t s3_157">The cast of </span><span id="t1n_157" class="t s5_157">IDENTITY_FN </span><span id="t1o_157" class="t s3_157">to </span><span id="t1p_157" class="t s5_157">(UnaryFunction&lt;T&gt;) </span><span id="t1q_157" class="t s3_157">generates an unchecked </span>
<span id="t1r_157" class="t s3_157">cast warning, as </span><span id="t1s_157" class="t s5_157">UnaryOperator&lt;Object&gt; </span><span id="t1t_157" class="t s3_157">is not a </span><span id="t1u_157" class="t s5_157">UnaryOperator&lt;T&gt; </span><span id="t1v_157" class="t s3_157">for every </span>
<span id="t1w_157" class="t s5_157">T </span><span id="t1x_157" class="t s3_157">. But the identity function is special: it returns its argument unmodified, so we </span>
<span id="t1y_157" class="t s3_157">know that it is typesafe to use it as a </span><span id="t1z_157" class="t s5_157">UnaryFunction&lt;T&gt;</span><span id="t20_157" class="t s3_157">, whatever the value of </span><span id="t21_157" class="t s5_157">T </span><span id="t22_157" class="t s3_157">. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
