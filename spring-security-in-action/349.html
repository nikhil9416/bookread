<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p349" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_349{left:703px;bottom:960px;letter-spacing:-0.13px;}
#t2_349{left:340px;bottom:960px;letter-spacing:-0.12px;word-spacing:0.01px;}
#t3_349{left:200px;bottom:921px;letter-spacing:0.14px;}
#t4_349{left:185px;bottom:906px;letter-spacing:0.13px;}
#t5_349{left:171px;bottom:890px;letter-spacing:0.13px;}
#t6_349{left:156px;bottom:875px;letter-spacing:0.14px;}
#t7_349{left:156px;bottom:838px;letter-spacing:0.1px;word-spacing:1.69px;}
#t8_349{left:526px;bottom:838px;letter-spacing:0.3px;}
#t9_349{left:666px;bottom:838px;letter-spacing:0.11px;word-spacing:1.71px;}
#ta_349{left:156px;bottom:818px;letter-spacing:0.1px;word-spacing:2.99px;}
#tb_349{left:233px;bottom:818px;letter-spacing:0.3px;}
#tc_349{left:361px;bottom:818px;letter-spacing:0.12px;word-spacing:2.99px;}
#td_349{left:156px;bottom:798px;letter-spacing:0.3px;}
#te_349{left:382px;bottom:798px;letter-spacing:0.09px;word-spacing:2.61px;}
#tf_349{left:156px;bottom:778px;letter-spacing:0.1px;word-spacing:-0.25px;}
#tg_349{left:156px;bottom:757px;letter-spacing:0.11px;word-spacing:0.97px;}
#th_349{left:346px;bottom:758px;letter-spacing:0.3px;}
#ti_349{left:664px;bottom:757px;letter-spacing:0.1px;word-spacing:1.08px;}
#tj_349{left:156px;bottom:737px;letter-spacing:0.11px;word-spacing:2.37px;}
#tk_349{left:156px;bottom:717px;letter-spacing:0.1px;word-spacing:-0.03px;}
#tl_349{left:241px;bottom:717px;letter-spacing:0.3px;}
#tm_349{left:384px;bottom:717px;letter-spacing:0.09px;}
#tn_349{left:156px;bottom:646px;letter-spacing:0.13px;}
#to_349{left:156px;bottom:631px;letter-spacing:0.14px;}
#tp_349{left:156px;bottom:615px;letter-spacing:0.13px;}
#tq_349{left:178px;bottom:600px;letter-spacing:0.14px;}
#tr_349{left:156px;bottom:584px;}
#ts_349{left:156px;bottom:547px;letter-spacing:0.1px;word-spacing:0.92px;}
#tt_349{left:156px;bottom:527px;letter-spacing:0.1px;word-spacing:-0.08px;}
#tu_349{left:156px;bottom:506px;letter-spacing:0.11px;word-spacing:-0.02px;}
#tv_349{left:101px;bottom:468px;letter-spacing:-0.53px;}
#tw_349{left:156px;bottom:468px;letter-spacing:0.02px;word-spacing:-0.02px;}
#tx_349{left:156px;bottom:446px;letter-spacing:0.13px;word-spacing:0.94px;}
#ty_349{left:156px;bottom:426px;letter-spacing:0.09px;word-spacing:0.51px;}
#tz_349{left:156px;bottom:406px;letter-spacing:0.1px;word-spacing:2.99px;}
#t10_349{left:156px;bottom:386px;letter-spacing:0.11px;word-spacing:1.15px;}
#t11_349{left:681px;bottom:386px;letter-spacing:0.3px;}
#t12_349{left:156px;bottom:366px;letter-spacing:0.29px;}
#t13_349{left:217px;bottom:366px;}
#t14_349{left:226px;bottom:366px;letter-spacing:0.29px;}
#t15_349{left:396px;bottom:366px;letter-spacing:0.14px;}
#t16_349{left:427px;bottom:366px;letter-spacing:0.29px;}
#t17_349{left:588px;bottom:366px;letter-spacing:0.13px;word-spacing:0.96px;}
#t18_349{left:156px;bottom:346px;letter-spacing:0.13px;word-spacing:2.33px;}
#t19_349{left:594px;bottom:346px;letter-spacing:0.3px;}
#t1a_349{left:156px;bottom:325px;letter-spacing:0.12px;word-spacing:0.6px;}
#t1b_349{left:156px;bottom:305px;letter-spacing:0.13px;word-spacing:0.42px;}
#t1c_349{left:156px;bottom:285px;letter-spacing:0.12px;word-spacing:-0.01px;}
#t1d_349{left:178px;bottom:265px;letter-spacing:0.12px;word-spacing:-0.22px;}
#t1e_349{left:156px;bottom:245px;letter-spacing:0.11px;word-spacing:5.17px;}
#t1f_349{left:156px;bottom:225px;letter-spacing:0.12px;word-spacing:6.75px;}
#t1g_349{left:156px;bottom:205px;letter-spacing:0.3px;}
#t1h_349{left:294px;bottom:204px;letter-spacing:0.13px;word-spacing:3.17px;}
#t1i_349{left:156px;bottom:184px;letter-spacing:0.1px;word-spacing:-0.06px;}
#t1j_349{left:444px;bottom:185px;letter-spacing:0.29px;}
#t1k_349{left:575px;bottom:184px;letter-spacing:0.12px;word-spacing:-0.14px;}
#t1l_349{left:156px;bottom:164px;letter-spacing:0.14px;word-spacing:3.29px;}
#t1m_349{left:430px;bottom:164px;letter-spacing:0.29px;}
#t1n_349{left:517px;bottom:164px;letter-spacing:0.09px;word-spacing:3.33px;}
#t1o_349{left:156px;bottom:144px;letter-spacing:0.29px;}
#t1p_349{left:247px;bottom:144px;letter-spacing:0.09px;word-spacing:0.02px;}
#t1q_349{left:174px;bottom:675px;letter-spacing:-0.12px;word-spacing:0.02px;}
#t1r_349{left:262px;bottom:675px;letter-spacing:-0.15px;}
#t1s_349{left:289px;bottom:675px;letter-spacing:0.22px;}
#t1t_349{left:431px;bottom:675px;letter-spacing:-0.12px;}

.s1_349{font-size:14px;font-family:NewBaskerville-Bold_w3;color:#252525;}
.s2_349{font-size:14px;font-family:NewBaskerville-BoldItalic_zn;color:#656565;}
.s3_349{font-size:12px;font-family:Courier_166;color:#252525;}
.s4_349{font-size:15px;font-family:NewBaskerville-Roman_xo;color:#252525;}
.s5_349{font-size:14px;font-family:Courier_166;color:#252525;}
.s6_349{font-size:19px;font-family:FranklinGothic-DemiItal_15g;color:#476B85;}
.s7_349{font-size:14px;font-family:FranklinGothic-Demi_yq;color:#FFF;}
.s8_349{font-size:14px;font-family:Courier-Bold_194;color:#FFF;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts349" type="text/css" >

@font-face {
	font-family: Courier-Bold_194;
	src: url("fonts/Courier-Bold_194.woff") format("woff");
}

@font-face {
	font-family: Courier_166;
	src: url("fonts/Courier_166.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-DemiItal_15g;
	src: url("fonts/FranklinGothic-DemiItal_15g.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_yq;
	src: url("fonts/FranklinGothic-Demi_yq.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_zn;
	src: url("fonts/NewBaskerville-BoldItalic_zn.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_w3;
	src: url("fonts/NewBaskerville-Bold_w3.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_xo;
	src: url("fonts/NewBaskerville-Roman_xo.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg349Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg349" style="-webkit-user-select: none;"><object width="811" height="1017" data="349/349.svg" type="image/svg+xml" id="pdf349" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_349" class="t s1_349">319 </span><span id="t2_349" class="t s2_349">Defining user management </span>
<span id="t3_349" class="t s3_349">&lt;scope&gt;import&lt;/scope&gt; </span>
<span id="t4_349" class="t s3_349">&lt;/dependency&gt; </span>
<span id="t5_349" class="t s3_349">&lt;/dependencies&gt; </span>
<span id="t6_349" class="t s3_349">&lt;/dependencyManagement&gt; </span>
<span id="t7_349" class="t s4_349">We can now define a configuration class, which I call </span><span id="t8_349" class="t s5_349">AuthServerConfig</span><span id="t9_349" class="t s4_349">. Besides </span>
<span id="ta_349" class="t s4_349">the classic </span><span id="tb_349" class="t s5_349">@Configuration </span><span id="tc_349" class="t s4_349">annotation, we also need to annotate this class with </span>
<span id="td_349" class="t s5_349">@EnableAuthorizationServer</span><span id="te_349" class="t s4_349">. This way, we instruct Spring Boot to enable the </span>
<span id="tf_349" class="t s4_349">configuration specific to the OAuth 2 authorization server. We can customize this con- </span>
<span id="tg_349" class="t s4_349">figuration by extending the </span><span id="th_349" class="t s5_349">AuthorizationServerConfigurerAdapter </span><span id="ti_349" class="t s4_349">class and </span>
<span id="tj_349" class="t s4_349">overriding specific methods that we’ll discuss in this chapter. The following listing </span>
<span id="tk_349" class="t s4_349">presents the </span><span id="tl_349" class="t s5_349">AuthServerConfig </span><span id="tm_349" class="t s4_349">class. </span>
<span id="tn_349" class="t s3_349">@Configuration </span>
<span id="to_349" class="t s3_349">@EnableAuthorizationServer </span>
<span id="tp_349" class="t s3_349">public class AuthServerConfig </span>
<span id="tq_349" class="t s3_349">extends AuthorizationServerConfigurerAdapter { </span>
<span id="tr_349" class="t s3_349">} </span>
<span id="ts_349" class="t s4_349">We already have the minimal configuration for our authorization server. This is awe- </span>
<span id="tt_349" class="t s4_349">some! However, to make it usable, we still have to implement user management, regis- </span>
<span id="tu_349" class="t s4_349">ter at least one client, and decide which grant types to support. </span>
<span id="tv_349" class="t s6_349">13.2 </span><span id="tw_349" class="t s6_349">Defining user management </span>
<span id="tx_349" class="t s4_349">In this section, we discuss user management. The authorization server is the compo- </span>
<span id="ty_349" class="t s4_349">nent that deals with authenticating a user in the OAuth 2 framework. So, naturally, it </span>
<span id="tz_349" class="t s4_349">needs to manage users. Fortunately, the user management implementation hasn’t </span>
<span id="t10_349" class="t s4_349">changed from what you learned in chapters 3 and 4. We continue to use the </span><span id="t11_349" class="t s5_349">User- </span>
<span id="t12_349" class="t s5_349">Details</span><span id="t13_349" class="t s4_349">, </span><span id="t14_349" class="t s5_349">UserDetailsService, </span><span id="t15_349" class="t s4_349">and </span><span id="t16_349" class="t s5_349">UserDetailsManager </span><span id="t17_349" class="t s4_349">contracts to manage </span>
<span id="t18_349" class="t s4_349">credentials. And to manage passwords, we continue to use the </span><span id="t19_349" class="t s5_349">PasswordEncoder </span>
<span id="t1a_349" class="t s4_349">contract. Here, these have the same roles and work the same as you learned in chap- </span>
<span id="t1b_349" class="t s4_349">ters 3 and 4. Behind the scenes is the standard authentication architecture, which we </span>
<span id="t1c_349" class="t s4_349">discussed throughout previous chapters. </span>
<span id="t1d_349" class="t s4_349">Figure 13.2 reminds you of the main components acting in the authentication pro- </span>
<span id="t1e_349" class="t s4_349">cess in Spring Security. What you should observe differently from the way we </span>
<span id="t1f_349" class="t s4_349">described the authentication architecture until now is that we don’t have a </span>
<span id="t1g_349" class="t s5_349">SecurityContext </span><span id="t1h_349" class="t s4_349">in this diagram anymore. This change happened because the </span>
<span id="t1i_349" class="t s4_349">result of authentication is not stored in the </span><span id="t1j_349" class="t s5_349">SecurityContext</span><span id="t1k_349" class="t s4_349">. The authentication is </span>
<span id="t1l_349" class="t s4_349">instead managed with a token from a </span><span id="t1m_349" class="t s5_349">TokenStore</span><span id="t1n_349" class="t s4_349">. You’ll learn more about the </span>
<span id="t1o_349" class="t s5_349">TokenStore </span><span id="t1p_349" class="t s4_349">in chapter 14, where we discuss the resource server. </span>
<span id="t1q_349" class="t s7_349">Listing 13.1 </span><span id="t1r_349" class="t s7_349">The </span><span id="t1s_349" class="t s8_349">AuthServerConfig </span><span id="t1t_349" class="t s7_349">class </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
