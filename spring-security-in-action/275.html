<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p275" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_275{left:703px;bottom:960px;letter-spacing:-0.13px;}
#t2_275{left:288px;bottom:960px;letter-spacing:-0.11px;word-spacing:0.01px;}
#t3_275{left:179px;bottom:917px;letter-spacing:0.09px;word-spacing:0.28px;}
#t4_275{left:156px;bottom:898px;letter-spacing:0.1px;word-spacing:2.26px;}
#t5_275{left:156px;bottom:878px;letter-spacing:0.11px;word-spacing:4.17px;}
#t6_275{left:156px;bottom:858px;letter-spacing:0.13px;word-spacing:0.06px;}
#t7_275{left:156px;bottom:838px;letter-spacing:0.11px;word-spacing:-0.01px;}
#t8_275{left:180px;bottom:818px;letter-spacing:0.11px;word-spacing:1.58px;}
#t9_275{left:156px;bottom:798px;letter-spacing:0.06px;word-spacing:-1.04px;}
#ta_275{left:156px;bottom:778px;letter-spacing:0.13px;word-spacing:3.44px;}
#tb_275{left:156px;bottom:759px;letter-spacing:0.1px;word-spacing:-0.44px;}
#tc_275{left:156px;bottom:739px;letter-spacing:0.12px;word-spacing:0.22px;}
#td_275{left:156px;bottom:719px;letter-spacing:0.09px;word-spacing:0.03px;}
#te_275{left:101px;bottom:681px;letter-spacing:-0.53px;}
#tf_275{left:156px;bottom:681px;letter-spacing:0.05px;}
#tg_275{left:156px;bottom:659px;letter-spacing:0.12px;word-spacing:0.75px;}
#th_275{left:156px;bottom:639px;letter-spacing:0.11px;word-spacing:-0.2px;}
#ti_275{left:156px;bottom:619px;letter-spacing:0.13px;word-spacing:1.35px;}
#tj_275{left:156px;bottom:599px;letter-spacing:0.12px;word-spacing:0.27px;}
#tk_275{left:156px;bottom:579px;letter-spacing:0.11px;word-spacing:1.3px;}
#tl_275{left:156px;bottom:558px;letter-spacing:0.11px;word-spacing:0.03px;}
#tm_275{left:180px;bottom:533px;}
#tn_275{left:198px;bottom:532px;letter-spacing:0.08px;word-spacing:-0.02px;}
#to_275{left:258px;bottom:532px;letter-spacing:0.12px;word-spacing:-0.12px;}
#tp_275{left:198px;bottom:512px;letter-spacing:0.12px;word-spacing:2.39px;}
#tq_275{left:198px;bottom:492px;letter-spacing:0.06px;word-spacing:1.14px;}
#tr_275{left:198px;bottom:472px;letter-spacing:0.12px;word-spacing:0.72px;}
#ts_275{left:198px;bottom:452px;letter-spacing:0.12px;word-spacing:0.01px;}
#tt_275{left:180px;bottom:431px;}
#tu_275{left:198px;bottom:430px;letter-spacing:0.14px;word-spacing:0.72px;}
#tv_275{left:352px;bottom:430px;letter-spacing:0.12px;word-spacing:0.69px;}
#tw_275{left:198px;bottom:410px;letter-spacing:0.11px;word-spacing:-0.05px;}
#tx_275{left:198px;bottom:389px;letter-spacing:0.14px;word-spacing:0.7px;}
#ty_275{left:198px;bottom:369px;letter-spacing:0.12px;word-spacing:2.28px;}
#tz_275{left:198px;bottom:349px;letter-spacing:0.1px;word-spacing:0.02px;}
#t10_275{left:217px;bottom:327px;letter-spacing:0.11px;word-spacing:2.29px;}
#t11_275{left:198px;bottom:307px;letter-spacing:0.1px;word-spacing:2.5px;}
#t12_275{left:198px;bottom:287px;letter-spacing:0.06px;word-spacing:3.72px;}
#t13_275{left:365px;bottom:287px;letter-spacing:0.01px;}
#t14_275{left:566px;bottom:287px;letter-spacing:-0.01px;word-spacing:3.81px;}
#t15_275{left:643px;bottom:287px;letter-spacing:-0.18px;}
#t16_275{left:198px;bottom:267px;letter-spacing:0.12px;}
#t17_275{left:304px;bottom:267px;letter-spacing:0.1px;word-spacing:0.06px;}
#t18_275{left:180px;bottom:245px;}
#t19_275{left:198px;bottom:244px;letter-spacing:0.13px;word-spacing:0.28px;}
#t1a_275{left:344px;bottom:244px;letter-spacing:0.12px;word-spacing:0.26px;}
#t1b_275{left:198px;bottom:224px;letter-spacing:0.11px;word-spacing:1.29px;}
#t1c_275{left:198px;bottom:203px;letter-spacing:0.12px;word-spacing:1.94px;}
#t1d_275{left:198px;bottom:183px;letter-spacing:0.09px;word-spacing:-0.78px;}
#t1e_275{left:198px;bottom:163px;letter-spacing:0.09px;word-spacing:0.03px;}

.s1_275{font-size:14px;font-family:NewBaskerville-Bold_w3;color:#252525;}
.s2_275{font-size:14px;font-family:NewBaskerville-BoldItalic_zn;color:#656565;}
.s3_275{font-size:15px;font-family:NewBaskerville-Roman_xo;color:#252525;}
.s4_275{font-size:19px;font-family:FranklinGothic-DemiItal_15g;color:#476B85;}
.s5_275{font-size:13px;font-family:Wingdings2_15e;color:#CCA659;}
.s6_275{font-size:15px;font-family:NewBaskerville-Italic_vq;color:#252525;}
.s7_275{font-size:15px;font-family:NewBaskerville-Roman_xo;color:#001CA6;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts275" type="text/css" >

@font-face {
	font-family: FranklinGothic-DemiItal_15g;
	src: url("fonts/FranklinGothic-DemiItal_15g.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_zn;
	src: url("fonts/NewBaskerville-BoldItalic_zn.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_w3;
	src: url("fonts/NewBaskerville-Bold_w3.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Italic_vq;
	src: url("fonts/NewBaskerville-Italic_vq.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_xo;
	src: url("fonts/NewBaskerville-Roman_xo.woff") format("woff");
}

@font-face {
	font-family: Wingdings2_15e;
	src: url("fonts/Wingdings2_15e.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg275Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg275" style="-webkit-user-select: none;"><object width="811" height="1017" data="275/275.svg" type="image/svg+xml" id="pdf275" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_275" class="t s1_275">245 </span><span id="t2_275" class="t s2_275">The scenario and requirements of the example </span>
<span id="t3_275" class="t s3_275">In this chapter, we’ll design a system of three actors: the client, the authentication </span>
<span id="t4_275" class="t s3_275">server, and the business logic server. From these three actors, we’ll implement the </span>
<span id="t5_275" class="t s3_275">backend part of the authentication server and a business logic server. As you’ll </span>
<span id="t6_275" class="t s3_275">observe, our examples are more complex. This is a sign that we are getting closer and </span>
<span id="t7_275" class="t s3_275">closer to real-world scenarios. </span>
<span id="t8_275" class="t s3_275">This exercise is also a great chance to recap, apply, and better understand what </span>
<span id="t9_275" class="t s3_275">you’ve already learned and to touch on new subjects like JSON Web Tokens (JWTs). You </span>
<span id="ta_275" class="t s3_275">also see a first demonstration of separating the authentication and authorization </span>
<span id="tb_275" class="t s3_275">responsibilities in a system. We’ll extend this discussion in chapters 12 through 15 with </span>
<span id="tc_275" class="t s3_275">the OAuth 2 framework. Getting closer to what we’ll discuss in the following chapters </span>
<span id="td_275" class="t s3_275">is one of the reasons for the design I chose for the exercise in this chapter. </span>
<span id="te_275" class="t s4_275">11.1 </span><span id="tf_275" class="t s4_275">The scenario and requirements of the example </span>
<span id="tg_275" class="t s3_275">In this section, we discuss the requirements for the applications we develop together </span>
<span id="th_275" class="t s3_275">throughout this chapter. Once you understand what has to be done, we discuss how to </span>
<span id="ti_275" class="t s3_275">implement the system and which are our best options in section 11.2. Then, we get </span>
<span id="tj_275" class="t s3_275">our hands dirty with Spring Security and implement the scenario from head to toe in </span>
<span id="tk_275" class="t s3_275">sections 11.3 and 11.4. The architecture of the system has three components. You’ll </span>
<span id="tl_275" class="t s3_275">find these components illustrated in figure 11.1. The three components are </span>
<span id="tm_275" class="t s5_275"> </span><span id="tn_275" class="t s6_275">The client </span><span id="to_275" class="t s3_275">—This is the application consuming the backend. It could be a mobile </span>
<span id="tp_275" class="t s3_275">app or the frontend of a web application developed using a framework like </span>
<span id="tq_275" class="t s3_275">Angular, ReactJS, or Vue.js. We don’t implement the client part of the system, </span>
<span id="tr_275" class="t s3_275">but keep in mind that it exists in a real-world application. Instead of using the </span>
<span id="ts_275" class="t s3_275">client to call endpoints, we use cURL. </span>
<span id="tt_275" class="t s5_275"> </span><span id="tu_275" class="t s6_275">The authentication server </span><span id="tv_275" class="t s3_275">—This is an application with a database of user creden- </span>
<span id="tw_275" class="t s3_275">tials. The purpose of this application is to authenticate users based on their cre- </span>
<span id="tx_275" class="t s3_275">dentials (username and password) and send them a one-time password (OTP) </span>
<span id="ty_275" class="t s3_275">through SMS. Because we won’t actually send an SMS in this example, we’ll </span>
<span id="tz_275" class="t s3_275">read the value of the OTP from the database directly. </span>
<span id="t10_275" class="t s3_275">In this chapter, we implement this whole application without sending the </span>
<span id="t11_275" class="t s3_275">SMS. Later, you can also extend it to send messages using a service of your </span>
<span id="t12_275" class="t s3_275">choice, like AWS SNS (</span><span id="t13_275" class="t s7_275">https://aws.amazon.com/sns/</span><span id="t14_275" class="t s3_275">), Twillio (</span><span id="t15_275" class="t s7_275">https://www </span>
<span id="t16_275" class="t s7_275">.twilio.com/sms</span><span id="t17_275" class="t s3_275">), or others. </span>
<span id="t18_275" class="t s5_275"> </span><span id="t19_275" class="t s6_275">The business logic server </span><span id="t1a_275" class="t s3_275">—This is the application exposing endpoints that our cli- </span>
<span id="t1b_275" class="t s3_275">ent consumes. We want to secure access to these endpoints. Before calling an </span>
<span id="t1c_275" class="t s3_275">endpoint, the user must authenticate with their username and password and </span>
<span id="t1d_275" class="t s3_275">then send an OTP. The user receives the OTP through an SMS message. Because </span>
<span id="t1e_275" class="t s3_275">this application is our target application, we secure it with Spring Security. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
