<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p160" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_160{left:87px;bottom:960px;letter-spacing:-0.13px;}
#t2_160{left:287px;bottom:961px;}
#t3_160{left:295px;bottom:962px;letter-spacing:-0.14px;}
#t4_160{left:335px;bottom:961px;}
#t5_160{left:354px;bottom:960px;letter-spacing:-0.11px;word-spacing:0.01px;}
#t6_160{left:142px;bottom:888px;letter-spacing:0.13px;}
#t7_160{left:142px;bottom:873px;letter-spacing:0.14px;}
#t8_160{left:157px;bottom:842px;letter-spacing:0.13px;}
#t9_160{left:157px;bottom:827px;letter-spacing:0.13px;word-spacing:0.01px;}
#ta_160{left:172px;bottom:811px;letter-spacing:0.13px;word-spacing:0.01px;}
#tb_160{left:157px;bottom:796px;}
#tc_160{left:142px;bottom:781px;}
#td_160{left:142px;bottom:747px;letter-spacing:0.11px;word-spacing:0.57px;}
#te_160{left:281px;bottom:747px;letter-spacing:0.3px;}
#tf_160{left:416px;bottom:747px;letter-spacing:0.11px;word-spacing:0.56px;}
#tg_160{left:502px;bottom:747px;letter-spacing:0.3px;}
#th_160{left:598px;bottom:747px;letter-spacing:0.1px;word-spacing:0.61px;}
#ti_160{left:142px;bottom:727px;letter-spacing:0.13px;word-spacing:3.37px;}
#tj_160{left:142px;bottom:707px;letter-spacing:0.12px;word-spacing:-0.01px;}
#tk_160{left:479px;bottom:687px;letter-spacing:0.09px;word-spacing:3.25px;}
#tl_160{left:458px;bottom:668px;letter-spacing:0.09px;word-spacing:0.72px;}
#tm_160{left:458px;bottom:648px;letter-spacing:0.11px;word-spacing:-0.23px;}
#tn_160{left:458px;bottom:629px;letter-spacing:0.13px;word-spacing:4.68px;}
#to_160{left:458px;bottom:609px;letter-spacing:0.11px;word-spacing:5.74px;}
#tp_160{left:458px;bottom:589px;letter-spacing:0.13px;word-spacing:0.87px;}
#tq_160{left:458px;bottom:570px;letter-spacing:0.12px;word-spacing:2.74px;}
#tr_160{left:458px;bottom:550px;letter-spacing:0.12px;word-spacing:-0.05px;}
#ts_160{left:478px;bottom:531px;letter-spacing:0.12px;word-spacing:2.95px;}
#tt_160{left:458px;bottom:511px;letter-spacing:0.12px;word-spacing:3.23px;}
#tu_160{left:458px;bottom:492px;letter-spacing:0.12px;word-spacing:2.6px;}
#tv_160{left:458px;bottom:472px;letter-spacing:0.12px;word-spacing:6.36px;}
#tw_160{left:458px;bottom:453px;letter-spacing:0.12px;word-spacing:1.3px;}
#tx_160{left:458px;bottom:433px;letter-spacing:0.11px;word-spacing:-0.41px;}
#ty_160{left:458px;bottom:413px;letter-spacing:0.11px;word-spacing:-0.3px;}
#tz_160{left:142px;bottom:394px;letter-spacing:0.12px;word-spacing:2.07px;}
#t10_160{left:414px;bottom:394px;letter-spacing:0.3px;}
#t11_160{left:516px;bottom:394px;letter-spacing:0.15px;word-spacing:2.04px;}
#t12_160{left:142px;bottom:374px;letter-spacing:0.09px;}
#t13_160{left:175px;bottom:375px;letter-spacing:0.3px;}
#t14_160{left:462px;bottom:374px;letter-spacing:0.13px;word-spacing:1.14px;}
#t15_160{left:142px;bottom:355px;letter-spacing:0.11px;word-spacing:-0.05px;}
#t16_160{left:489px;bottom:355px;letter-spacing:0.29px;}
#t17_160{left:655px;bottom:355px;letter-spacing:0.14px;}
#t18_160{left:142px;bottom:335px;letter-spacing:0.11px;word-spacing:-0.04px;}
#t19_160{left:142px;bottom:266px;letter-spacing:0.13px;}
#t1a_160{left:142px;bottom:251px;letter-spacing:0.13px;}
#t1b_160{left:157px;bottom:235px;letter-spacing:0.13px;word-spacing:0.01px;}
#t1c_160{left:172px;bottom:220px;letter-spacing:0.13px;}
#t1d_160{left:201px;bottom:205px;letter-spacing:0.14px;}
#t1e_160{left:172px;bottom:177px;letter-spacing:0.14px;}
#t1f_160{left:201px;bottom:162px;letter-spacing:0.14px;}
#t1g_160{left:142px;bottom:147px;}
#t1h_160{left:142px;bottom:113px;letter-spacing:0.12px;word-spacing:4.33px;}
#t1i_160{left:580px;bottom:113px;letter-spacing:0.3px;}
#t1j_160{left:142px;bottom:93px;letter-spacing:0.3px;}
#t1k_160{left:273px;bottom:93px;letter-spacing:0.09px;}
#t1l_160{left:307px;bottom:93px;letter-spacing:0.3px;}
#t1m_160{left:559px;bottom:93px;letter-spacing:0.14px;word-spacing:4.54px;}
#t1n_160{left:161px;bottom:916px;letter-spacing:-0.12px;word-spacing:0.02px;}
#t1o_160{left:249px;bottom:916px;letter-spacing:-0.12px;}
#t1p_160{left:161px;bottom:294px;letter-spacing:-0.12px;word-spacing:0.02px;}
#t1q_160{left:249px;bottom:294px;letter-spacing:-0.12px;word-spacing:0.01px;}
#t1r_160{left:143px;bottom:469px;letter-spacing:0.1px;word-spacing:-1.29px;}
#t1s_160{left:218px;bottom:469px;letter-spacing:0.09px;word-spacing:-1.21px;}
#t1t_160{left:143px;bottom:454px;letter-spacing:0.1px;}
#t1u_160{left:143px;bottom:439px;letter-spacing:0.12px;}

.s1_160{font-size:14px;font-family:NewBaskerville-Bold_w3;color:#252525;}
.s2_160{font-size:12px;font-family:FranklinGothic-Demi_yq;color:#656565;}
.s3_160{font-size:10px;font-family:FranklinGothic-Demi_yq;color:#656565;}
.s4_160{font-size:14px;font-family:NewBaskerville-BoldItalic_zn;color:#656565;}
.s5_160{font-size:12px;font-family:Courier_166;color:#252525;}
.s6_160{font-size:15px;font-family:NewBaskerville-Roman_xo;color:#252525;}
.s7_160{font-size:14px;font-family:Courier_166;color:#252525;}
.s8_160{font-size:14px;font-family:FranklinGothic-Demi_yq;color:#FFF;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts160" type="text/css" >

@font-face {
	font-family: Courier_166;
	src: url("fonts/Courier_166.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_yq;
	src: url("fonts/FranklinGothic-Demi_yq.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_zn;
	src: url("fonts/NewBaskerville-BoldItalic_zn.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_w3;
	src: url("fonts/NewBaskerville-Bold_w3.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_xo;
	src: url("fonts/NewBaskerville-Roman_xo.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg160Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg160" style="-webkit-user-select: none;"><object width="811" height="1017" data="160/160.svg" type="image/svg+xml" id="pdf160" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_160" class="t s1_160">130 </span><span id="t2_160" class="t s2_160">C</span><span id="t3_160" class="t s3_160">HAPTER </span><span id="t4_160" class="t s2_160">5 </span><span id="t5_160" class="t s4_160">Implementing authentication </span>
<span id="t6_160" class="t s5_160">@Controller </span>
<span id="t7_160" class="t s5_160">public class HelloController { </span>
<span id="t8_160" class="t s5_160">@GetMapping("/home") </span>
<span id="t9_160" class="t s5_160">public String home() { </span>
<span id="ta_160" class="t s5_160">return "home.html"; </span>
<span id="tb_160" class="t s5_160">} </span>
<span id="tc_160" class="t s5_160">} </span>
<span id="td_160" class="t s6_160">Mind that it is not a </span><span id="te_160" class="t s7_160">@RestController </span><span id="tf_160" class="t s6_160">but a simple </span><span id="tg_160" class="t s7_160">@Controller</span><span id="th_160" class="t s6_160">. Because of this, </span>
<span id="ti_160" class="t s6_160">Spring does not send the value returned by the method in the HTTP response. </span>
<span id="tj_160" class="t s6_160">Instead, it finds and renders the view with the name home.html. </span>
<span id="tk_160" class="t s6_160">Trying to access the /home path </span>
<span id="tl_160" class="t s6_160">now, you are first asked if you want to </span>
<span id="tm_160" class="t s6_160">log in. After a successful login, you are </span>
<span id="tn_160" class="t s6_160">redirected to the homepage, where </span>
<span id="to_160" class="t s6_160">the welcome message appears. You </span>
<span id="tp_160" class="t s6_160">can now access the /logout path, and </span>
<span id="tq_160" class="t s6_160">this should redirect you to a log-out </span>
<span id="tr_160" class="t s6_160">page (figure 5.15). </span>
<span id="ts_160" class="t s6_160">After attempting to access a path </span>
<span id="tt_160" class="t s6_160">without being logged in, the user is </span>
<span id="tu_160" class="t s6_160">automatically redirected to the login </span>
<span id="tv_160" class="t s6_160">page. After a successful login, the </span>
<span id="tw_160" class="t s6_160">application redirects the user back to </span>
<span id="tx_160" class="t s6_160">the path they tried to originally access. </span>
<span id="ty_160" class="t s6_160">If that path does not exist, the applica- </span>
<span id="tz_160" class="t s6_160">tion displays a default error page. The </span><span id="t10_160" class="t s7_160">formLogin() </span><span id="t11_160" class="t s6_160">method returns an object of </span>
<span id="t12_160" class="t s6_160">type </span><span id="t13_160" class="t s7_160">FormLoginConfigurer&lt;HttpSecurity&gt;</span><span id="t14_160" class="t s6_160">, which allows us to work on custom- </span>
<span id="t15_160" class="t s6_160">izations. For example, you can do this by calling the </span><span id="t16_160" class="t s7_160">defaultSuccessUrl()</span><span id="t17_160" class="t s6_160">method, </span>
<span id="t18_160" class="t s6_160">as shown in the following listing. </span>
<span id="t19_160" class="t s5_160">@Override </span>
<span id="t1a_160" class="t s5_160">protected void configure(HttpSecurity http) </span>
<span id="t1b_160" class="t s5_160">throws Exception { </span>
<span id="t1c_160" class="t s5_160">http.formLogin() </span>
<span id="t1d_160" class="t s5_160">.defaultSuccessUrl("/home", true); </span>
<span id="t1e_160" class="t s5_160">http.authorizeRequests() </span>
<span id="t1f_160" class="t s5_160">.anyRequest().authenticated(); </span>
<span id="t1g_160" class="t s5_160">} </span>
<span id="t1h_160" class="t s6_160">If you need to go even more in depth with this, using the </span><span id="t1i_160" class="t s7_160">Authentication- </span>
<span id="t1j_160" class="t s7_160">SuccessHandler </span><span id="t1k_160" class="t s6_160">and </span><span id="t1l_160" class="t s7_160">AuthenticationFailureHandler </span><span id="t1m_160" class="t s6_160">objects offers a more </span>
<span id="t1n_160" class="t s8_160">Listing 5.20 </span><span id="t1o_160" class="t s8_160">Defining the action method of the controller for the home.html page </span>
<span id="t1p_160" class="t s8_160">Listing 5.21 </span><span id="t1q_160" class="t s8_160">Setting a default success URL for the login form </span>
<span id="t1r_160" class="t s2_160">Figure 5.15 </span><span id="t1s_160" class="t s2_160">The log-out page configured by Spring </span>
<span id="t1t_160" class="t s2_160">Security for the form-based login authentication </span>
<span id="t1u_160" class="t s2_160">method. </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
